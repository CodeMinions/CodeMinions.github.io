<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"codeminions.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="引入听说其实Android直接连接数据库的情况是比较少的，出于安全和内存都不建议，一般是连接服务器，通过服务器操作数据库。但毕竟还是有必要掌握这项技能（其实是已经记不清前几天是为什么要写这么个东西了，纠缠几天下来已然混乱）这几天这是焦头烂额，每一步都会卡一下，网上的博客也是看了不少，没能很直接解决问题（虽然最后的结果也是令我哭笑不得）    可能出现的问题：JDBC URL中的IP地址或主机名错误">
<meta property="og:type" content="article">
<meta property="og:title" content="Android&#x2F;Java连接Mysql数据库">
<meta property="og:url" content="http://codeminions.github.io/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/index.html">
<meta property="og:site_name" content="初学者">
<meta property="og:description" content="引入听说其实Android直接连接数据库的情况是比较少的，出于安全和内存都不建议，一般是连接服务器，通过服务器操作数据库。但毕竟还是有必要掌握这项技能（其实是已经记不清前几天是为什么要写这么个东西了，纠缠几天下来已然混乱）这几天这是焦头烂额，每一步都会卡一下，网上的博客也是看了不少，没能很直接解决问题（虽然最后的结果也是令我哭笑不得）    可能出现的问题：JDBC URL中的IP地址或主机名错误">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-02-04T16:00:00.000Z">
<meta property="article:modified_time" content="2019-02-04T16:00:00.000Z">
<meta property="article:author" content="minions">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="技能帖">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://codeminions.github.io/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Android/Java连接Mysql数据库 | 初学者</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2e98ba91428e00ba53246c847babdd82";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="初学者" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">初学者</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/CodeMinions" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://codeminions.github.io/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="minions">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="初学者">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Android/Java连接Mysql数据库
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-02-05 00:00:00" itemprop="dateCreated datePublished" datetime="2019-02-05T00:00:00+08:00">2019-02-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/" itemprop="url" rel="index"><span itemprop="name">Code</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h1><p>听说其实Android直接连接数据库的情况是比较少的，出于安全和内存都不建议，一般是连接服务器，通过服务器操作数据库。<br>但毕竟还是有必要掌握这项技能（其实是已经记不清前几天是为什么要写这么个东西了，纠缠几天下来已然混乱）<br>这几天这是焦头烂额，每一步都会卡一下，网上的博客也是看了不少，没能很直接解决问题（虽然最后的结果也是令我哭笑不得）  </p>
<blockquote>
<p>可能出现的问题：<br>JDBC URL中的IP地址或主机名错误<br>本地DNS服务器无法识别JDBC URL中的主机名<br>JDBC URL中的端口号丢失或错误<br>数据库服务器关闭<br>数据库服务器不接受TCP/IP连接<br>数据库服务器已用完连接<br>Java和DB之间的某些东西阻止了连接，例如防火墙或代理  </p>
<p>可以尝试以下操作：<br>测试ip地址能否ping通<br>刷新DNS或使用JDBC URL中的IP地址<br>根据MySQL DB的my.cnf进行验证<br>启动数据库服务<br>验证是否在没有–skip-networking选项的情况下启动mysqld<br>重新启动数据库并相应地修改代码，以便最终关闭连接<br>禁用防火墙和/或配置防火墙/代理以允许/转发端口<br>注意别忘了给app添加internet权限  <code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</code></p>
</blockquote>
<p>以上是在其他地方看到简单总结的一些要点。<br>然后要开始来讲故事了。。<br><a id="more"></a></p>
<h1 id="Mysql的远程登录授权"><a href="#Mysql的远程登录授权" class="headerlink" title="Mysql的远程登录授权"></a>Mysql的远程登录授权</h1><p>Mysql需要在允许远程登录的情况下才能被其他主机访问。像在android中就不可能可以本地登录吧，无论是在实体机中还是虚拟机中。</p>
<blockquote>
<p>这里顺便记录一下一些虚拟机中主机的IP地址：<br>Google模拟器<br>emulator-5554<br>开发机地址: [net.eth0.gw]: [10.0.2.2]<br>模拟器本机地址: [net.gprs.local-ip]: [10.0.2.15]<br>夜神模拟器<br>127.0.0.1:62001<br>开发机地址: [dhcp.eth1.gateway]: 172.17.100.2<br>模拟器本机地址: [dhcp.eth1.ipaddress]: [172.17.100.15]<br>逍遥模拟器<br>127.0.0.1:21503<br>开发机地址: [dhcp.eth1.gateway]: [10.0.3.2]<br>模拟器本机地址: [dhcp.eth1.ipaddress]: [10.0.3.15]  </p>
</blockquote>
<h2 id="开放3306端口"><a href="#开放3306端口" class="headerlink" title="开放3306端口"></a>开放3306端口</h2><p>查看3306端口情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -an | grep 3306</span><br><span class="line">tcp6       0      0 :::3306                 :::*                    LISTEN</span><br></pre></td></tr></table></figure><br>说明3306只是监听本地，拒绝了其他IP访问，mysql默认状态下是不开放对外访问功能。那么开放端口。<br>打开etc/mysql/my.cnf（也有人说是/etc/mysql/mysql.conf.d/mysqld.cnf），找到bind-address = 127.0.0.1（大概47行）加 # 注释即可。  </p>
<ul>
<li>其实可能是因为我是tar二进制直接安装的缘故，没有找到mysql.cnf，但后来也是可以连接上emmm  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">连接成功时3306的状态如下</span><br><span class="line">$ netstat -an | grep 3306</span><br><span class="line">tcp6       0      0 :::3306                 :::*                    ESTABLISHED</span><br></pre></td></tr></table></figure>
<h2 id="MySQL授权"><a href="#MySQL授权" class="headerlink" title="MySQL授权"></a>MySQL授权</h2><p>启动mysql.server，进入账户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo .&#x2F;mysql.server start</span><br><span class="line">Starting MySQL</span><br><span class="line">[ ok ..</span><br><span class="line">$ mysql -uroot -p</span><br></pre></td></tr></table></figure><br>然后问题来了。其他IP的访问授权方式有两种，<strong>授权法</strong> 和 <strong>改表法</strong>。注意Mysql5和Mysql8的授权方法有所不同，主要是语法上的改变。</p>
<h3 id="授权法"><a href="#授权法" class="headerlink" title="授权法"></a>授权法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grant all on 数据库名.表名 to &#39;root&#39;@&#39;%&#39; identified by &#39;password&#39;;</span><br><span class="line"></span><br><span class="line"># all 代表权限，可以是select,insert,update,delete等一个或多个，all和all privileges代表所有权限</span><br><span class="line"># 数据库.表名 指定具体开放的数据库表，不用加&#39;&#39;</span><br><span class="line"># root 是远程登录用的用户名，加不加&#39;&#39;都可以</span><br><span class="line"># % 是指定开放的具体IP，%指对所有主机开放，需加&#39;&#39;，@两边不要有空格</span><br><span class="line"># password是远程登录时用的密码</span><br></pre></td></tr></table></figure>
<p>以上在Mysql5下使用，也是网上查到的99%的方法。然而在Mysql8中会报语法错误<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to<br>your MySQL server version for the right syntax to use near ‘identified by ‘psw’’ at line 1<br>这个问题也折腾了我一下午，最后是求助了学长才意识到版本的问题。<br><strong>Mysql8</strong> 下的授权方法如下，没错就是没有identified部分。<br>而且需要 <strong>先创建一个用户，在对其进行授权</strong>，否则直接grant会报错 You are not allowed to create a user with GRANT。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 先创建用户</span><br><span class="line">create user &#39;root&#39;@&#39;%&#39; identified by &#39;pwd&#39;;</span><br><span class="line"></span><br><span class="line"># 再进行授权</span><br><span class="line">grant all on *.* to &#39;root&#39;@&#39;%&#39; with grant option;</span><br><span class="line"></span><br><span class="line"># 权限刷新</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><br>注意最后 <strong>刷新权限</strong>。</p>
<h3 id="改表法"><a href="#改表法" class="headerlink" title="改表法"></a>改表法</h3><p>其实最后我是通过这个方法完成的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; update user set host&#x3D;&#39;%&#39; where user&#x3D;&#39;root&#39;;</span><br><span class="line">Query OK, 1 row affected (0.63 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.21 sec)</span><br></pre></td></tr></table></figure><br>如上，进入mysql数据库，查看user，host可看到root用户的host是localhost。修改该项为%，刷新权限。<br>我是使用idea集成的数据库工具测试连接，连接成功。</p>
<h1 id="Android-Java数据库连接"><a href="#Android-Java数据库连接" class="headerlink" title="Android/Java数据库连接"></a>Android/Java数据库连接</h1><h2 id="导入数据库驱动JDBC"><a href="#导入数据库驱动JDBC" class="headerlink" title="导入数据库驱动JDBC"></a>导入数据库驱动JDBC</h2><p>到官网下载获取JDBC的jar包，常见的版本是mysql-connector-java-5.1.47.jar，较新的版本是mysql-connector-java-8.0.13。（有空了会试着把这两个上传）。<br>导包方式：复制jar到项目的libs目录下<br>右键jar选择Add as libs<br>或者直接在app的build.gradle中添加<br>implementation files(‘libs/mysql-connector-java-5.1.47.jar’)</p>
<h2 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态加载类</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"><span class="comment">// 设置连接地址以及数据库名称</span></span><br><span class="line">String DB_URL = <span class="string">&quot;jdbc:mysql://mysql.数据库所在主机IP:3306/表名&quot;</span>;</span><br><span class="line"><span class="comment">// 连接数据库</span></span><br><span class="line">Connection conn = DriverManager.getConnection(DB_URL, <span class="string">&quot;用户名&quot;</span>, <span class="string">&quot;密码&quot;</span>);</span><br><span class="line"><span class="comment">// 创建Statement对象(可执行SQL语句的对象)</span></span><br><span class="line">Statement stmt = conn.createStatement();</span><br><span class="line"><span class="comment">// 执行sql语句 返回一个ResultSet对象（返回数据集合）</span></span><br><span class="line">ResultSet rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="comment">// rs调用数据</span></span><br><span class="line">rs.getString(<span class="number">1</span>);  <span class="comment">// 遍历索引</span></span><br><span class="line">rs.getString(<span class="string">&quot;name&quot;</span>); <span class="comment">// 字段名索引</span></span><br></pre></td></tr></table></figure>
<h2 id="注："><a href="#注：" class="headerlink" title="注："></a>注：</h2><h3 id="新建线程"><a href="#新建线程" class="headerlink" title="新建线程"></a>新建线程</h3><p>Android不支持在转线程执行网络请求（耗时操作）会有UnsupportedOperationException。<br>注意包括stmt.executeQuery(str) 方法也是联网操作，也要放在多线程中执行</p>
<h3 id="版本问题"><a href="#版本问题" class="headerlink" title="版本问题"></a>版本问题</h3><p>5.0和8.0驱动包有几个地方不同  </p>
<ul>
<li><p>加载8.0驱动的时候报错</p>
<blockquote>
<p>Loading class <code>&#39;com.mysql.jdbc.Driver&#39;. This is deprecated. The new driver class is &#39;com.mysql.cj.jdbc.Driver&#39;</code>. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.  </p>
</blockquote>
<p>提示，8.0包的驱动名应该改为 <strong>com.mysql.cj.jdbc.Driver</strong></p>
</li>
<li><p>建立连接时报错</p>
<blockquote>
<p>Establishing SSL connection without server’s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn’t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to ‘false’. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</p>
</blockquote>
<p>mysql8.0是不需要建立ssl连接，需要使用useSSL=false手动关闭。即URL改为 <strong>jdbc:mysql://mysql.数据库所在主机IP:3306/表名?useSSL=false</strong></p>
</li>
<li>8.0驱动包只能兼容minSdkVersion = 26，我的测试机SdkVersion是24的，所以我只能用5.0的驱动包</li>
</ul>
<h3 id="一些报错"><a href="#一些报错" class="headerlink" title="一些报错"></a>一些报错</h3><ul>
<li>serverTimezone=UTC，可以指定时区（非必要）</li>
<li>数据库或表明出错会有报错：No address associated with hostname，Unknown database</li>
<li>用户名或密码错误：Access denied for user (using password: YES)</li>
<li>网络原因（无权限，无网络连接，在主线程执行）：com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.  </li>
<li>注意在适当位置关闭相关资源流</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// java</span></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String JDBC_DRIVER = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String DB_URL = <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/table&quot;</span>;</span><br><span class="line">    <span class="comment">// 注意修改DB_URL，和UER，PASS</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String PASS = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        ResultSet re;</span><br><span class="line">        Connection con;</span><br><span class="line">        Statement stmt;</span><br><span class="line">        String str = <span class="string">&quot;select * from books&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(JDBC_DRIVER);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Fail to load JDBC dirver.&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            con = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line">            stmt = con.createStatement();</span><br><span class="line"></span><br><span class="line">            re = stmt.executeQuery(str);</span><br><span class="line">            <span class="keyword">while</span>(re.next())&#123;</span><br><span class="line">                System.out.println(re.getString(<span class="number">2</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            con.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android</span></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String JDBC_DRIVER = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String DB_URL = <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/table?useSSL=false&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String PASS = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ResultSet re;</span><br><span class="line">    <span class="keyword">private</span> Connection con;</span><br><span class="line">    <span class="keyword">private</span> Statement stmt;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="keyword">final</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> String str = <span class="string">&quot;select book_title from books&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Class.forName(JDBC_DRIVER);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;驱动加载失败&quot;</span>, e.toString());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    con = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line">                    stmt = con.createStatement();</span><br><span class="line"></span><br><span class="line">                    re = stmt.executeQuery(str);</span><br><span class="line">                    <span class="keyword">if</span> (re != <span class="keyword">null</span>)</span><br><span class="line">                        Log.i(<span class="string">&quot;标记&quot;</span>, <span class="string">&quot;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n&quot;</span>);</span><br><span class="line">                    <span class="keyword">while</span> (re.next())</span><br><span class="line">                        Log.i(<span class="string">&quot;Data&quot;</span>, re.getString(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;连接失败&quot;</span>, e.toString());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="我碰到的问题："><a href="#我碰到的问题：" class="headerlink" title="我碰到的问题："></a>我碰到的问题：</h2><p><del>以下内容非重点</del>  </p>
<ul>
<li>Communications link failure  </li>
<li>The last packet sent successfully to the server was 0 milliseconds ago.The driver has not received any packets from the server.  </li>
</ul>
<p>这两个报错贯穿了我两天的debug过程，也大概是android连接Mysql最常见的报错<br>查到的都是超时相关问题，超时回收机制云云。<strong>该问题是程序运行过程中使用的连接池不知道连接被回收了所以报出的异常，解决方案大概是 修改连接池配置 或 修改mysql空闲超时时间配置</strong>，否则默认是8小时。  </p>
<p>但这是数据库连接中断的问题，我连都连不上。这大年初一的，就是熬夜掉头发，想起这一年的漫漫debug之路，忍不住捏了把汗。<br>我不抱希望修改了如下URL，然后气急败坏的跑去和我妹看电视。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;table?useUnicode&#x3D;true&amp;characterEncoding&#x3D;UTF-8&amp;autoReconnect&#x3D;true&amp;failOverReadOnly&#x3D;false</span><br></pre></td></tr></table></figure><br>半晌，就在我回来继续时候，看到logout上终于打上了数据库的内容，欣喜若狂，扯着一脸问号的妹妹条了半天广场舞。<br>接下来的事令我不知该哭还是该笑，倒不是程序又不能跑了，是就在我将上面的指令一个一个删去，尝试找到罪归祸首时，发现已经是把代码恢复到原来状态了，app还是十分乖巧的连上了数据库，即jdbc:mysql://ip:3306/table。<br>我：？？？？？<br>刚刚到底发生什么了，难道还有打开某个开关以后他就默认开启之类的操作？</p>
<p>无论如何，总算是成功了。老泪纵横。<br>愿天下码农和八哥终成眷属。。TAT</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/CristianTang/article/details/79553947">参考博客</a></p>

    </div>

    
    
    

    <div style=" width:100%; text-align:center; margin-left:15px; margin-right:15px;">
	<hr style="width:30%;vertical-align:middle; display:inline-block;"/>  
	    完结 
	    <i class="fa fa-paw"></i> 
	     撒花 ฅ&gt;ω&lt;*ฅ  
	<hr style="width:30%;vertical-align:middle; display:inline-block;"/>
    </div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>minions
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://codeminions.github.io/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/" title="Android&#x2F;Java连接Mysql数据库">http://codeminions.github.io/2019/02/05/android连接Mysql/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"><i class="fa fa-tag"></i> Android</a>
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
              <a href="/tags/%E6%8A%80%E8%83%BD%E5%B8%96/" rel="tag"><i class="fa fa-tag"></i> 技能帖</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="prev" title="计算机网络">
      <i class="fa fa-chevron-left"></i> 计算机网络
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/03/06/Android%E6%89%8B%E5%8A%BF%E7%9B%91%E5%90%AC%E5%85%A5%E9%97%A8/" rel="next" title="Android手势监听入门">
      Android手势监听入门 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%95%E5%85%A5"><span class="nav-number">1.</span> <span class="nav-text">引入</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mysql%E7%9A%84%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E6%8E%88%E6%9D%83"><span class="nav-number">2.</span> <span class="nav-text">Mysql的远程登录授权</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E6%94%BE3306%E7%AB%AF%E5%8F%A3"><span class="nav-number">2.1.</span> <span class="nav-text">开放3306端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL%E6%8E%88%E6%9D%83"><span class="nav-number">2.2.</span> <span class="nav-text">MySQL授权</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%88%E6%9D%83%E6%B3%95"><span class="nav-number">2.2.1.</span> <span class="nav-text">授权法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%B9%E8%A1%A8%E6%B3%95"><span class="nav-number">2.2.2.</span> <span class="nav-text">改表法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Android-Java%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="nav-number">3.</span> <span class="nav-text">Android&#x2F;Java数据库连接</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8JDBC"><span class="nav-number">3.1.</span> <span class="nav-text">导入数据库驱动JDBC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81"><span class="nav-number">3.2.</span> <span class="nav-text">主要代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%EF%BC%9A"><span class="nav-number">3.3.</span> <span class="nav-text">注：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E7%BA%BF%E7%A8%8B"><span class="nav-number">3.3.1.</span> <span class="nav-text">新建线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="nav-number">3.3.2.</span> <span class="nav-text">版本问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E6%8A%A5%E9%94%99"><span class="nav-number">3.3.3.</span> <span class="nav-text">一些报错</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%88%91%E7%A2%B0%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="nav-number">3.4.</span> <span class="nav-text">我碰到的问题：</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="minions"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">minions</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">34</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CodeMinions" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CodeMinions" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="rss → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>rss</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">minions</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0 & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.8.0 强力驱动
  </div>
  <div class="post-count> 
    <span class="post-meta-item-icon">
      <!-- <i class="fa fa-chart-area"></i> -->
    </span>
    <span title="post-meta-item-text">
	博主minions已经码了
	  151k
	字辣  ~\(≧▽≦)/~
    </span>
    
  </div>
  <div class="busuanzi-count">
    <span id="busuanzi_container_site_pv" style='display:none'>
        ///▽///
	本站已经被访问<span id="busuanzi_value_site_pv"></span>次	 	 
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: inline;">
      <span class="post-meta-item-icon">
        <!-- <i class="fa fa-user"></i> -->
      </span>
      <span class="site-uv" title="一共有">
        <span id="busuanzi_value_site_uv"></span>人来过辣
	♪( ´θ｀)ノ
      </span>
    </span>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'ksFXxiyOicesm1H1gQuK6RvU-MdYXbMMI',
      appKey     : 'eswY6MY2MKFfOeYILl9HsUHo',
      placeholder: "Just go go",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      avatar_cdn:'https://www.gravatar.com/avatar/',
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : '',
    });
  }, window.Valine);
});
</script>

</body>
</html>
