<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>åˆå­¦è€…</title>
  
  
  <link href="http://codeminions.github.io/atom.xml" rel="self"/>
  
  <link href="http://codeminions.github.io/"/>
  <updated>2021-02-12T09:42:57.961Z</updated>
  <id>http://codeminions.github.io/</id>
  
  <author>
    <name>minions</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://codeminions.github.io/2021/02/12/hello-world/"/>
    <id>http://codeminions.github.io/2021/02/12/hello-world/</id>
    <published>2021-02-12T09:42:57.961Z</published>
    <updated>2021-02-12T09:42:57.961Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.<br><a id="more"></a></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;</summary>
    
    
    
    <category term="Blog" scheme="http://codeminions.github.io/categories/Blog/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo åšå®¢æœ¬åœ°è¿ç§»</title>
    <link href="http://codeminions.github.io/2021/01/31/Hexo%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E8%BF%81%E7%A7%BB/"/>
    <id>http://codeminions.github.io/2021/01/31/Hexo%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E8%BF%81%E7%A7%BB/</id>
    <published>2021-01-30T16:00:00.000Z</published>
    <updated>2021-02-01T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>èƒŒæ™¯ï¼šæœ€è¿‘æ¢äº†ä¸€å°ç”µè„‘ï¼ŒåŸæ¥çš„ä¸»åŠ›æœºå‡ è¿‘é€€å½¹ï¼Œæ•…éœ€è¦æŠŠå·¥ä½œå°è¿›è¡Œè¿ç§»ã€‚å…¶ä¸­åŒ…æ‹¬æŠŠHexoçš„æœ¬åœ°æ–‡ä»¶è¿›è¡Œè½¬ç§»ã€‚ç»è¿‡æŸ¥æ‰¾æ€»ç»“ï¼Œå¾—å‡ºæ­¤æ–‡ã€‚</p></blockquote><h1 id="å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶"><a href="#å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶" class="headerlink" title="å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶"></a>å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_config.yml&#x2F;&#x2F; ä¿å­˜å¯¹äºhexoçš„ä¸€äº›ä¸ªæ€§åŒ–è®¾ç½®</span><br><span class="line">package.json&#x2F;&#x2F; è®°å½•hexoæ¡†æ¶ä¾èµ–çš„ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">scaffolds&#x2F;&#x2F;&#x2F; è‡ªåŠ¨ç”Ÿæˆpostä½¿ä½¿ç”¨çš„è„šæ‰‹æ¶</span><br><span class="line">source&#x2F;&#x2F;&#x2F; æ–‡ç¨¿æºæ–‡ä»¶</span><br><span class="line">themes&#x2F;&#x2F;&#x2F; ä½¿ç”¨çš„ä¸»é¢˜æ–‡ä»¶</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="npmå®‰è£…hexoæ’ä»¶"><a href="#npmå®‰è£…hexoæ’ä»¶" class="headerlink" title="npmå®‰è£…hexoæ’ä»¶"></a>npmå®‰è£…hexoæ’ä»¶</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install</span></span><br></pre></td></tr></table></figure><p>è¯¥æŒ‡ä»¤ä¼šé€šè¿‡package.jsonæ–‡ä»¶è·å–æ¨¡å—åŠç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œä¸‹è½½å®‰è£…ã€‚å¯ä»¥ä½¿ç”¨npm updateæŒ‡ä»¤è¿›è¡Œæ¨¡å—æ›´æ–°<br>å¦‚æœæ²¡æœ‰package.jsonï¼Œä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…ä»¥ä¸‹æ¨¡å—ï¼Œå¯ä»¥ä¿è¯hexoæ¨¡å—è¿è¡Œï¼Œä½†æ˜¯ä¸€äº›å…¶ä»–çš„æ’ä»¶ï¼Œéœ€è¦è‡ªå·±é‡æ–°å®‰è£…<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-deployer-git --save</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-generator-feed --save</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-generator-sitemap --save</span></span><br></pre></td></tr></table></figure><br>é€šè¿‡npmå®‰è£…æ¨¡å—ä¹‹åï¼Œåˆ™ä¼šç”Ÿæˆ<strong>node_modules</strong>æ–‡ä»¶å¤¹</p><h1 id="è¿è¡Œhexo"><a href="#è¿è¡Œhexo" class="headerlink" title="è¿è¡Œhexo"></a>è¿è¡Œhexo</h1><p>ä½¿ç”¨<strong>hexo g</strong>å°è¯•ç”Ÿæˆéƒ¨ç½²æ–‡ä»¶ï¼ˆ<strong>publicæ–‡ä»¶å¤¹</strong>ï¼‰<br>ä½¿ç”¨<strong>hexo s</strong>åœ¨æœ¬åœ°4000ï¼ˆå¯é€‰æ‹©ï¼‰ç«¯å£è¿è¡ŒæœåŠ¡<br>è‡³æ­¤è¿ç§»å·¥ä½œå®Œæˆï½</p><h1 id="å‡ºç°çš„ä¸€äº›é—®é¢˜"><a href="#å‡ºç°çš„ä¸€äº›é—®é¢˜" class="headerlink" title="å‡ºç°çš„ä¸€äº›é—®é¢˜"></a>å‡ºç°çš„ä¸€äº›é—®é¢˜</h1><ol><li>swigæ’ä»¶é—®é¢˜<br>ç°è±¡ï¼šgeneratorè¿‡ç¨‹ä¸­å‡ºç°æŠ¥é”™ï¼Œä¸”ç”Ÿæˆindex.htmlæ–‡ä»¶ä¸æ˜¯æ­£å¸¸çš„htmlæ ‡ç­¾<blockquote><p><code>&#123;% extends â€˜_layout.swigâ€™ %&#125; &#123;% import â€˜_macro/post.swigâ€˜ as post_template %&#125;</code></p></blockquote>ç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯<br>åŸå› æ˜¯hexo5ä»¥ååˆ é™¤äº†swigï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨å®‰è£…<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-renderer-swig</span></span><br></pre></td></tr></table></figure></li><li><p>å›¾ç‰‡èµ„æºé—®é¢˜<br>å…³äºåšå®¢ä¸­çš„æ’å›¾ï¼Œæˆ‘ä¹‹å‰çš„æ–¹æ¡ˆæ˜¯æ”¾åˆ°theme/images/ä¸­ï¼Œè¿™æ ·æ‰“åŒ…æ—¶å€™å¯ä»¥åŸå°ä¸åŠ¨çš„æ‰“åŒ…åˆ°public/imagesä¸­ï¼Œç„¶åæˆ‘å†å¼•ç”¨ã€‚<br>å¦‚ä»Šå‘ç°ä¸€ç§æ­£ç¡®çš„å§¿åŠ¿ï¼Œå³åœ¨<code>_config.yml</code>ä¸­è®¾ç½®<strong>post_asset_folder</strong>ä¸ºtrueï¼Œç„¶åç”Ÿæˆpostï¼ˆhexo new xxï¼‰æ—¶ä¾¿ä¼šåœ¨sourceä¸­åŒæ—¶ç”Ÿæˆä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­å­˜æ”¾è¯¥æ–‡ç« çš„æ’å›¾èµ„æºç­‰ï¼Œæ‰“åŒ…æ—¶å°†ä¸€åŒæ‰“åŒ…ã€‚æœ€ååœ¨ç”Ÿæˆçš„publicæ–‡ä»¶ä¸­ï¼Œå›¾ç‰‡ä¸æ–‡ç« çš„indexæ–‡ä»¶æ˜¯åœ¨åŒä¸€çº§æ–‡ä»¶å¤¹ä¸‹çš„ã€‚<br>ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå›¾ç‰‡çš„è·¯å¾„é»˜è®¤ç›¸å¯¹æ ¹ç›®å½•æ˜¯/year/month/day/title/image.jpgï¼Œè€Œè™½ç„¶åœ¨åšå®¢ä¸­ç›´æ¥é€šè¿‡å›¾ç‰‡åå­—å¼•ç”¨<code>![xx](image.jpg)</code>æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®é™…ä¸Šå°±æ˜¯åœ¨ç»Ÿä¸€ç›®å½•ä¸‹ã€‚ä½†æ˜¯è¿™æ ·çš„å†™æ³•ï¼Œåœ¨å…¶ä»–é¡µé¢å¦‚é¢„è§ˆé¡µæ—¶å›¾ç‰‡æ˜¯æ— æ³•åŠ è½½çš„ï¼ˆå› ä¸ºç”¨çš„ä¸æ˜¯å›¾ç‰‡åŒçº§çš„index.htmlï¼Œè‡ªç„¶ç´¢å¼•ä¸åˆ°ï¼‰ã€‚æ‰‹åŠ¨å†™ä¸Š/year/month/day/title/image.jpgï¼Œåˆæ„Ÿè§‰æ€ªæ€ªçš„ï¼Œå› æ­¤æœ‰å¤§ä½¬ä¸ºhexoæ¡†æ¶æä¾›äº†ä¸€ä¸ªè„šæœ¬æ¨¡å—<strong>hexo-asset-link</strong>ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°äº†mdæ–‡ä»¶è½¬æ¢ä¸ºindex.htmlæ—¶å›¾ç‰‡è·¯å¾„çš„å¡«å……å®Œå–„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-asset-link</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…hexo-asset-linkæ¨¡å—ä¹‹åï¼Œç›´æ¥é€šè¿‡![xx](title/iamge.jpg)åˆ™å¯ä»¥åŠ è½½å›¾ç‰‡</span></span><br></pre></td></tr></table></figure><p>çœ‹åˆ°å¾ˆå¤šå¸–å­ä½¿ç”¨hexo-asset-imageï¼Œä½†æ˜¯è¿™ä¸ªæ’ä»¶å¡«å……çš„è·¯å¾„æ˜¯åŸºäº<code>_config.yml</code>ä¸­çš„urlé¡¹ç»å¯¹è·¯å¾„è®¿é—®ï¼Œå¾ˆå¤šäººéƒ½å†å»ä¿®æ”¹äº†å…¶index.jsæ–‡ä»¶ä»£ç ï¼Œå®ç°ç›¸å¯¹è·¯å¾„çš„è®¿é—®ï¼Œç§ä»¥ä¸ºæœ‰äº›ç”»è›‡æ·»è¶³ã€‚ä¹Ÿæœ‰äººç›´æ¥å°†ä¿®æ”¹åçš„ä»£ç ï¼Œå°è£…ä¸ºä¸€ä¸ªmoduleï¼Œå³æ˜¯hexo-zngw-asset-imageï¼Œå› æ­¤è¿™ä¸ªæ’ä»¶è·Ÿhexo-asset-linkä¸€æ ·ä¹Ÿæ˜¯ç›´æ¥å¯ç”¨çš„ï¼Œåªæ˜¯å®ç°æ–¹å¼ä¸åŒè€Œå·²ã€‚</p></li><li><p>å…³äºhexoè½¬ä¹‰çš„å°é—®é¢˜<br>ç°è±¡ï¼šgeneratoræ—¶å€™å‡ºç°æŠ¥é”™</p><blockquote><p>  err: Template render error: (unknown path)<br>  Error: template names must be a string: undefined<br>è¿™æ—¶å€™å¯ä»¥é€šè¿‡<strong>hexo g â€“debug</strong>ï¼Œçœ‹åˆ°æ›´å¤šçš„logä¿¡æ¯ã€‚ï¼ˆæœ‰äººè¯´ç”šè‡³å¯ä»¥æ˜¾ç¤ºå…·ä½“è¡Œæ•°ï¼‰<br>å¯çœ‹åˆ°æˆ‘è¿™ä¸ªé—®é¢˜æ˜¯åœ¨æ¸²æŸ“æŸç¯‡æ–‡ç« å‡ºç°çš„ã€‚ç»æ’æŸ¥å‘ç°æ˜¯ä½¿ç”¨äº†<code>&#123;[%]&#125;</code>è¿™äº›ç¬¦å·å¯¼è‡´è½¬ä¹‰å‡ºç°é—®é¢˜ã€‚è§£å†³æ–¹å¼æ˜¯ä½¿ç”¨<code></code>å°†æ–‡æœ¬å—æ‹¬èµ·æ¥ï¼Œå³å¯è§£å†³ã€‚</p></blockquote></li></ol><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>ä»¥ä¸Šæ˜¯æœ¬æ¬¡è¿ç§»Hexoåšå®¢æ—¶å€™å‡ºç°çš„ä¸€äº›é—®é¢˜ä¸éƒ¨åˆ†å¿ƒå¾—ä½“ä¼šã€‚åŠ æ·±äº†äº›å¯¹Hexoçš„ç†è§£ã€‚åç»­å¯ä»¥æŠŠè¿™äº›åŸæ–‡ä»¶æ”¾åˆ°å¦ä¸€ä¸ªä»“åº“æˆ–å¦ä¸€ä¸ªåˆ†æ”¯ä¸­ï¼Œè¿›è¡Œç‰ˆæœ¬ç®¡ç†åŠå¤‡ä»½ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p><hr><h1 id="NexTä¸»é¢˜é…ç½®"><a href="#NexTä¸»é¢˜é…ç½®" class="headerlink" title="NexTä¸»é¢˜é…ç½®"></a>NexTä¸»é¢˜é…ç½®</h1><h2 id="é€šè¿‡cssè®¾ç½®èƒŒæ™¯é€æ˜åº¦ç­‰"><a href="#é€šè¿‡cssè®¾ç½®èƒŒæ™¯é€æ˜åº¦ç­‰" class="headerlink" title="é€šè¿‡cssè®¾ç½®èƒŒæ™¯é€æ˜åº¦ç­‰"></a>é€šè¿‡cssè®¾ç½®èƒŒæ™¯é€æ˜åº¦ç­‰</h2><p>é¦–å…ˆåœ¨NexTçš„_config.ymlä¸­å¯ç”¨è‡ªå®šä¹‰style</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define custom file paths.</span></span><br><span class="line"><span class="comment"># Create your custom files in site directory `source/_data` and uncomment needed files below.</span></span><br><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.swig</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ˜¾ç¤ºçš„è·¯å¾„æ˜¯ç›¸å¯¹æ ¹ç›®å½•ï¼Œå³Hexoæ ¹ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»º_dataæ–‡ä»¶å¤¹ï¼ˆå³è·Ÿ<code>_post</code>æ–‡ä»¶å¤¹æ”¾ä¸€å—ï¼‰ï¼Œå…¶ä¸­æ–°å»ºstyles.stylæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼Œæœ‰ä¸€ç‚¹ç‚¹cssåŸºç¡€çš„å¯ä»¥ä¿®æ”¹æˆ–è€…è‡ªå·±å†™ï¼ˆæ²¡æœ‰å…¶å®ä¹Ÿå¯ä»¥ï¼‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// æ·»åŠ èƒŒæ™¯å›¾ç‰‡</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">      background: url(/images/wall.png);// èƒŒæ™¯å›¾è·¯å¾„ï¼Œç›¸å¯¹NexTçš„sourceç›®å½•</span><br><span class="line">      <span class="selector-tag">background-size</span>: <span class="selector-tag">cover</span>;</span><br><span class="line">      <span class="selector-tag">background-repeat</span>: <span class="selector-tag">no-repeat</span>;</span><br><span class="line">      <span class="selector-tag">background-attachment</span>: <span class="selector-tag">fixed</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åšå®¢å†…å®¹é€æ˜åŒ–</span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä¾§è¾¹æ¡†çš„é€æ˜åº¦è®¾ç½®</span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//èœå•æ çš„é€æ˜åº¦è®¾ç½®</span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.85</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æœç´¢æ¡†ï¼ˆ<span class="selector-tag">local-search</span>ï¼‰çš„é€æ˜åº¦è®¾ç½®</span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š</p><ol><li>æ—§ç‰ˆæœ¬çš„NexTæ˜¯åœ¨css/_custom/é‡Œåšçš„ä¿®æ”¹ï¼Œæ–°ç‰ˆæœ¬å·²ç»å–æ¶ˆäº†è¿™ä¸ªæ–‡ä»¶ã€‚å…·ä½“æ–¹å¼è¯·ç™¾åº¦</li><li>Linux/Macä¸‹å¯ä»¥ç”¨vimç¼–è¾‘ï¼ŒWindowså¯ä»¥ç”¨notepadï¼ˆè®°äº‹æœ¬ï¼‰ç¼–è¾‘</li></ol><h2 id="æ–‡æœ«æ·»åŠ ç»“æŸè¯­"><a href="#æ–‡æœ«æ·»åŠ ç»“æŸè¯­" class="headerlink" title="æ–‡æœ«æ·»åŠ ç»“æŸè¯­"></a>æ–‡æœ«æ·»åŠ ç»“æŸè¯­</h2><p>NexTåŒæ ·ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªå®šä¹‰ç»“æŸè¯­æ ·å¼çš„æ–¹å¼</p><ul><li><p>é¦–å…ˆåœ¨theme/_config.ymlçš„<code>custom_file_path</code>ä¸­å–æ¶ˆ<code>postBodyEnd</code>çš„æ³¨é‡Šï¼Œå³å¯ç”¨è¯¥æ–‡ä»¶ï¼Œç„¶ååœ¨<code>_data</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºè¯¥æ–‡ä»¶post-body-end.swig</p></li><li><p>æˆ‘å¸Œæœ›å®ç°åœ¨æ–‡ç« é…ç½®ä¸­å¯ä»¥è®¾å®šæ˜¯å¦å¯ç”¨ç»“æŸè¯­ã€‚äºæ˜¯å…ˆè‡ªå®šä¹‰ä¸€ä¸ªå±æ€§æ¯”å¦‚<code>end</code>ï¼Œè¡¨ç¤ºè¯¥æ–‡æ˜¯å¦å·²ç»ç»“æŸ</p></li><li><p>åœ¨post-body-end.swigæ–‡ä»¶ä¸­é€šè¿‡åˆ¤æ–­è¯¥å±æ€§ä»¥å†³å®šæ˜¯å¦æ˜¾ç¤ºè‡ªå®šä¹‰æ ·å¼çš„ç»“æŸè¯­ã€ç´¢å¼•å±æ€§æ–¹å¼ä¼šåœ¨<a href="#ä¿®æ”¹swigæ–‡ä»¶">è¿™é‡Œ</a>æåˆ°ã€‘ã€‚æ¯”å¦‚æˆ‘æ˜¯è¿™ä¹ˆå†™çš„ï¼ˆhtmlæ˜¯ä¸œæ‹¼è¥¿å‡‘ä¹±å†™çš„ï¼Œå¦‚æœæœ‰æ›´å¥½çš„å»ºè®®å¯ä»¥å‘Šè¯‰æˆ‘è°¢è°¢ï½ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;%- if post.end != false %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot; width:100%; text-align:center; margin-left:15px; margin-right:15px;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">style</span>=<span class="string">&quot;width:30%;vertical-align:middle; display:inline-block;&quot;</span>/&gt;</span></span><br><span class="line">    å®Œç»“</span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-paw&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    æ’’èŠ± à¸…<span class="symbol">&amp;gt;</span>Ï‰<span class="symbol">&amp;lt;</span>*à¸…</span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">style</span>=<span class="string">&quot;width:30%;vertical-align:middle; display:inline-block;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure><p>æ–‡ç« endå±æ€§ä¸è®¾ç½®æˆ–è®¾ç½®trueï¼Œåˆ™å¯ä»¥åœ¨æ–‡ç« åº•éƒ¨çœ‹åˆ°æ•ˆæœå¦‚ä¸‹ï¼š<img src="/2021/01/31/Hexo%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E8%BF%81%E7%A7%BB/end.png" alt="end"></p></li></ul><h2 id="NexTé…ç½®æ–‡ä»¶"><a href="#NexTé…ç½®æ–‡ä»¶" class="headerlink" title="NexTé…ç½®æ–‡ä»¶"></a>NexTé…ç½®æ–‡ä»¶</h2><p>æœ‰ç‚¹å¼ºè¿«ç—‡ï¼Œç¨å¾®çœ‹äº†ä¸‹NexTä¸»é¢˜çš„_config.ymlä¸­çš„å¯é…ç½®é¡¹ï¼Œç¨ä½œè®°å½•ï¼ˆåŸºäºv7.8.0ï¼‰</p><p>ã€å†™å®Œå‘ç°ï¼Œå·²ç»æœ‰å¤§ä½¬å¯¹æ‰€æœ‰é…ç½®é¡¹è¿›è¡Œè§£é‡Šï¼Œè™½ç„¶ç‰ˆæœ¬å¯èƒ½æ²¡è¿™ä¹ˆæ–°ï¼Œå†™çš„å¾ˆè¯¦ç»†ï¼Œæ„Ÿè°¢<a href="https://blog.csdn.net/weixin_42119041/article/details/104101566">è¿™ç¯‡æ–‡ç« </a>ã€‘</p><ul><li>å‰è¾¹minifyç­‰é¡¹é…ç½®è¿è¡Œæ—¶æ–‡ä»¶æ“ä½œï¼Œå¦‚ç”Ÿå‡ºhexo generationç”Ÿæˆçš„æ–‡ä»¶ï¼Œç¼“å­˜æ¸…ç†ç­‰</li><li>faviconæ ‡ç­¾ï¼šè®¾ç½®ä¸€äº›ç½‘ç«™å›¾æ ‡</li><li>footerï¼šç½‘ç«™åº•éƒ¨çš„è¿™ä¸€éƒ¨åˆ†ã€‚<br>  <img src="/2021/01/31/Hexo%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E8%BF%81%E7%A7%BB/footer.png" alt="footer"><ul><li>sinceï¼šè®¾ç½®èµ·å§‹æ—¶é—´</li><li>iconï¼šæŒ‡ğŸ§¡å›¾æ ‡ï¼Œå¯ä¿®æ”¹å›¾æ ‡ï¼Œé¢œè‰²ï¼Œä»¥åŠåŠ¨ç”»å¼€å…³ï¼ˆè·³åŠ¨ï¼‰</li><li>copyrightï¼šç‰ˆæƒä¿¡æ¯ï¼Œé»˜è®¤ä½¿ç”¨hexoä¸­é…ç½®çš„author</li><li>powerï¼šæ˜¯å¦æ˜¾ç¤ºx xå¼ºåŠ›é©±åŠ¨ä¿¡æ¯</li><li>beianï¼šæ˜¾ç¤ºå¤‡æ¡ˆä¿¡æ¯</li></ul></li><li>schemeï¼šé…ç½®ä¸»é¢˜ï¼Œå†…ç½®ä¸€å…±å››æ¬¾ä¸»é¢˜</li><li>darkmodeï¼šæƒŠå–œå‘ç°ï¼Œå±…ç„¶å†…ç½®äº†é»‘å¤œä¸»é¢˜ï¼Œå¹¶æœ‰ä¸€é”®å¼€å…³</li><li>menuï¼šé…ç½®èœå•æ çš„å•é¡¹ï¼Œâ€œ||â€ä¹‹å‰ä»£è¡¨è·³è½¬è·¯å¾„ï¼Œâ€œ||â€ä¹‹åä»£è¡¨æ‰€ä½¿ç”¨çš„å›¾æ ‡</li><li>sidebarï¼šé…ç½®è¾¹æ çš„æ ·å¼ï¼Œå®½åº¦ç­‰</li><li>socialï¼šé…ç½®ç¤¾äº¤å¹³å°æ˜¾ç¤ºåŠåœ°å€</li><li>links_settingï¼šå…³äºå‹é“¾è®¾ç½®ã€‚ä¸‹è¾¹çš„linkså¯æ·»åŠ å‹é“¾ã€‚<ul><li>layoutï¼šå¤šä¸ªå‹é“¾çš„å¸ƒå±€ã€‚å—çŠ¶æˆ–å†…è”ã€‚å¯ç†è§£ä¸ºå‚ç›´æˆ–æ°´å¹³</li></ul></li><li>tocï¼šè®¾ç½®æ–‡ç« é¡µè¾¹æ ç›®å½•çš„å±•ç¤ºæƒ…å†µ<ul><li>numberï¼šç›®å½•æ·»åŠ åºå·</li><li>wrapï¼šå¤šçº§ç›®å½•ç¼©è¿›</li><li>expand_allï¼šç›´æ¥å±•å¼€å…¨éƒ¨ï¼Œå¦åˆ™åªå®Œå…¨å±•å¼€å½“å‰å°èŠ‚</li></ul></li><li>tagcloudï¼šä¸ºæ ‡ç­¾é¡µæ·»åŠ æ ‡ç­¾äº‘æ•ˆæœï¼Œå³æ˜¯ä»¥è¯äº‘å½¢å¼æ˜¾ç¤ºæ ‡ç­¾ã€‚éœ€è¦é›†æˆå¦‚hexo-tag-cloudæ’ä»¶</li><li>calendarï¼šè®¾ç½®äº‘æ—¥å†ï¼Œå¯ä»¥æ˜¾ç¤ºæäº¤æ—¥æœŸã€‚æ‰¾åˆ°ä¸€ä¸ªæŒºå¥½çš„æ’ä»¶hexo-generator-calendar</li><li>codeblockï¼šä»£ç å—æ ·å¼ã€‚è®¾ç½®ä»£ç é«˜äº®ï¼Œå¤åˆ¶æŒ‰é’®ï¼Œè¾¹æ¡†æ ·å¼ï¼ˆmacï¼‰ç­‰</li><li>reading_progressï¼šé¡¶éƒ¨æ˜¾ç¤ºé˜…è¯»è¿›åº¦æ¡</li></ul><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç¬¬ä¸‰æ–¹æ’ä»¶çš„é›†æˆæ–¹å¼ã€‚æœ€å¤§çš„ä½“éªŒå°±æ˜¯NexTçœŸçš„æ˜¯ä¸€ä¸ªå¾ˆæˆç†Ÿçš„ä¸»é¢˜æ¡†æ¶ï¼Œå¾ˆå¤šå¾ˆå¤šçš„åœ°æ–¹éƒ½å·²ç»é…ç½®å¥½äº†æ¨¡ç‰ˆï¼Œåªéœ€è¦ç®€å•å®‰è£…æ’ä»¶ï¼Œé…ç½®é¡¹ä¸­å¯ç”¨å³å¯ï¼</p><h2 id="ç™¾åº¦ç»Ÿè®¡åŠŸèƒ½é›†æˆ"><a href="#ç™¾åº¦ç»Ÿè®¡åŠŸèƒ½é›†æˆ" class="headerlink" title="ç™¾åº¦ç»Ÿè®¡åŠŸèƒ½é›†æˆ"></a>ç™¾åº¦ç»Ÿè®¡åŠŸèƒ½é›†æˆ</h2><p>NexTçš„<a href="http://theme-next.iissnan.com/getting-started.html">å®˜æ–¹æ–‡æ¡£</a>ä¸­å³æœ‰ç™¾åº¦ç»Ÿè®¡é›†æˆæ–¹å¼</p><p>å…·ä½“æ–¹æ³•ä¹Ÿæ˜¯ååˆ†ç®€å•ï¼Œé¦–å…ˆè¿›å…¥<a href="https://tongji.baidu.com/">ç™¾åº¦ç»Ÿè®¡å®˜ç½‘</a>ï¼Œç™»é™†åæ–°å¢ç½‘å€å¡«å†™åŸŸååœ°å€ç­‰ä¿¡æ¯ï¼Œå³å¯ä»¥å¾—åˆ°ä¸€æ®µjsè„šæœ¬</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> _hmt = _hmt || [];</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> hm = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">  hm.src = &quot;https://hm.baidu.com/hm.js?1af6bacc90d9688e38f7413e7080cb35&quot;;# éœ€è¦æ³¨æ„è¿™æ®µid</span><br><span class="line">  <span class="keyword">var</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;script&quot;</span>)[<span class="number">0</span>]; </span><br><span class="line">  s.parentNode.insertBefore(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å°†æ­¤è„šæœ¬æ·»åŠ åˆ°åšå®¢ç½‘ç«™çš„htmlæ–‡ä»¶ä¸­å³å¯ã€‚ä½†è¿™æ®µè„šæœ¬æ¨¡ç‰ˆNexTå·²ç»å¸®æˆ‘ä»¬å†™å¥½ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä¸­é…ç½®<strong>baidu_analytics</strong>å­—æ®µå³å¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> <span class="comment"># å†…å®¹æ˜¯è„šæœ¬ä¸­çš„hm.srcä¸­çš„urlä¸­js?ä»¥åçš„é‚£æ®µidæ•°å­—</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åœ¨æµè§ˆå™¨ä¸­é€šè¿‡å¼€å‘è€…å·¥å…·æŸ¥çœ‹htmlæºç ï¼Œæœç´¢<code>baidu</code>å­—æ®µå³å¯çœ‹åˆ°è¯¥è„šæœ¬å·²ç»åœ¨htmlä¸­ç”Ÿæˆ</p><p>æ ¹æ®ç™¾åº¦å®˜ç½‘æç¤ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡<a href="https://tongji.baidu.com/web/help/article?id=93">è¿™äº›æ–¹å¼</a>ç¡®è®¤æ˜¯å¦é›†æˆæˆåŠŸ</p><h2 id="Gitalkè¯„è®ºåŠŸèƒ½é›†æˆ"><a href="#Gitalkè¯„è®ºåŠŸèƒ½é›†æˆ" class="headerlink" title="Gitalkè¯„è®ºåŠŸèƒ½é›†æˆ"></a>Gitalkè¯„è®ºåŠŸèƒ½é›†æˆ</h2><p>æƒ³è¦é›†æˆä¸€ä¸ªè¯„è®ºåŠŸèƒ½ï¼Œçœ‹äº†å¥½äº›ç¬¬ä¸‰æ–¹åƒç•…èŠï¼Œå¤šè¯´ï¼Œç½‘æ˜“ç­‰éƒ½åœæ­¢æœåŠ¡äº†ï¼Œdisqusåˆå¯èƒ½å› ä¸ºqiangçš„åŸå› ä¸æ–¹ä¾¿ä½¿ç”¨ã€‚åæ¥å‘ç°äº†<strong>gitment</strong>å’Œ<strong>gitalk</strong>ï¼Œéƒ½æ˜¯åŸºäºgithubä»“åº“çš„issuesçš„è¯„è®ºæœåŠ¡ï¼Œæ„Ÿè§‰å¾ˆæ»¡è¶³æˆ‘çš„éœ€æ±‚äº†ï¼Œåœ¨NexTä¸­é…ç½®gitalkæ¯”è¾ƒæ–¹ä¾¿ï¼Œæ•…ä½¿ç”¨ä¹‹ã€‚</p><ol><li><p>é¦–å…ˆéœ€è¦åœ¨githubæ³¨å†ŒOAuth Applicationã€‚å¡«å†™Appåç§°ï¼ŒåŸŸåï¼Œå’Œæè¿°ã€‚ä¸¤ä¸ªURLéœ€å¡«å†™åšå®¢åœ°å€ï¼Œå…¶ä½™æ— ç”šè¦æ±‚ã€‚æ³¨æ„URLéœ€è¦åŠ ä¸Šhttps://ï¼Œå»ºè®®ç›´æ¥åœ°å€æ å¤åˆ¶</p><p>ç”³è¯·æˆåŠŸåä¼šå¾—åˆ°ä¸€ä¸ªClient IDå’ŒClient secretsï¼Œè¿™æ˜¯é…ç½®éœ€è¦ç”¨åˆ°çš„ä¸¤ä¸ªå­—æ®µ</p></li><li><p>NexTçš„_config.ymlä¸­å·²ç»æœ‰gitalkå­—æ®µï¼Œåªè¦æ ¹æ®æ³¨é‡Šè¿›è¡Œé…ç½®å³å¯ï¼Œå¤§æ¦‚æ˜¯githubç”¨æˆ·åï¼Œåšå®¢åœ°å€ï¼Œä¸¤ä¸ªidè¿™æ ·ã€‚</p></li><li><p>ç”±äºæ˜¯åŸºäºissuesï¼Œæ‰€ä»¥æ¯ä¸€ç¯‡æ–‡ç« éƒ½éœ€è¦åœ¨githubcä»“åº“çš„issuesé‡Œè¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šå‡ºç°</p><p><img src="/2021/01/31/Hexo%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E8%BF%81%E7%A7%BB/gitalk.png" alt="æœªåˆå§‹åŒ–"></p></li></ol><p>æ­¤æ—¶éƒ¨ç½²æˆåŠŸä¹‹åï¼Œå³å¯åœ¨æ–‡ç« åº•éƒ¨çœ‹åˆ°è¯„è®ºæ ã€‚å¦‚æœæŸä¸€ç¯‡æ–‡ç« ä¸å¼€æ”¾è¯„è®ºåŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ–‡ä¸­è®¾ç½®<code>comment: false</code></p><h2 id="valineè¯„è®ºåŠŸèƒ½é›†æˆ"><a href="#valineè¯„è®ºåŠŸèƒ½é›†æˆ" class="headerlink" title="valineè¯„è®ºåŠŸèƒ½é›†æˆ"></a>valineè¯„è®ºåŠŸèƒ½é›†æˆ</h2><p>åæ¥åˆå‘ç°ä¸€ç§æ›´å¥½çš„è¯„è®ºæ’ä»¶valineï¼Œä¹Ÿå¯ä»¥ç”±NexTçš„_config.ymlç›´æ¥é›†æˆ</p><p>valineæ˜¯ç”±cloudcleanæä¾›çš„è¯„è®ºåŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€ä¸ªCloudcleanå¹³å°è´¦å·ï¼Œè¯„è®ºæ•°æ®ä¼šå­˜å‚¨åœ¨cloudcleanå¹³å°é‡Œã€‚å› æ­¤ç®¡ç†ï¼ˆåˆ é™¤ï¼‰è¯„è®ºä¹Ÿæ˜¯ç›´æ¥æ“ä½œå¹³å°æ•°æ®åº“è¿›è¡Œã€‚</p><p>Cloudcleanåˆ›å»ºåº”ç”¨å…·ä½“æ“ä½œåŠé…ç½®å¯ä»¥å‚è€ƒ<a href="https://www.luanzhuxian.com/post/c49d1b87.html">è¿™ç¯‡åšå®¢</a>ã€‚</p><p>åˆ›å»ºå®Œåº”ç”¨ï¼Œå¾—åˆ°appidï¼Œappkeyï¼Œå°±å¯ä»¥å¡«å…¥NexTçš„_config.ymlä¸­ï¼Œenableå¯ç”¨ï¼Œå³å¯åœ¨é¡µé¢ä¸Šçœ‹åˆ°æ•ˆæœã€‚ä¸”å¦‚æœä¸å¼€å¯éªŒè¯çš„è¯<code>notify</code>ï¼Œç›´æ¥è¾“å…¥å³å¯è¿›è¡Œè¯„è®ºï¼Œæ•ˆæœå°†ä¼šä»¥ä¸€ä¸ªAnonymousçš„èº«ä»½è¿›è¡Œè¯„è®ºã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valine</span></span><br><span class="line"><span class="comment"># For more information: https://valine.js.org, https://github.com/xCss/Valine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="string">xxxxx</span> <span class="comment"># Your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="string">xxxxx</span> <span class="comment"># Your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># Mail notifier</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">Just</span> <span class="string">go</span> <span class="string">go</span> <span class="comment"># Comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># Gravatar style</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment"># Custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">language:</span> <span class="comment"># Language, available values: en, zh-cn</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span> <span class="comment"># Article reading statistic</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">true</span> <span class="comment"># If false, comment count will only be displayed in post page, not in home page</span></span><br><span class="line">  <span class="attr">recordIP:</span> <span class="literal">false</span> <span class="comment"># Whether to record the commenter IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></span><br><span class="line">  <span class="comment">#post_meta_order: 0</span></span><br></pre></td></tr></table></figure><blockquote><p>åœ¨<code>source/categories/index.md</code>å’Œ<code>source/tags/index.md</code>é‡Œè¦ç¦ç”¨<code>comments</code>ï¼Œå¦åˆ™åˆ†ç±»å’Œæ ‡ç­¾é¡µé¢ä¼šæ˜¾ç¤ºè¯„è®ºæ¡†</p></blockquote><h2 id="é…ç½®ç«™å†…æœç´¢"><a href="#é…ç½®ç«™å†…æœç´¢" class="headerlink" title="é…ç½®ç«™å†…æœç´¢"></a>é…ç½®ç«™å†…æœç´¢</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line">  <span class="comment"># æ ¹æ®è¾“å…¥è‡ªåŠ¨å‘èµ·æ£€ç´¢ä¸éœ€è¦å›è½¦</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="comment"># æ˜¾ç¤ºæ¯ç¯‡æ–‡ç« ä¸­å‘½ä¸­çš„å‰nä¸ªå…³é”®å­—ã€‚è®¾ç½®-1å¯å±•ç¤ºæ‰€æœ‰ç»“æœ</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>NexTä¸»é¢˜_config.ymlæ–‡ä»¶ä¸­local_searchå­—æ®µå¯ç”¨ï¼Œæ ¹æ®æç¤ºå®‰è£…æ’ä»¶<code>npm install hexo-generator-searchdb</code></p><h2 id="æ˜¾ç¤ºæ–‡ç« å­—æ•°åŠé˜…è¯»æ—¶é—´"><a href="#æ˜¾ç¤ºæ–‡ç« å­—æ•°åŠé˜…è¯»æ—¶é—´" class="headerlink" title="æ˜¾ç¤ºæ–‡ç« å­—æ•°åŠé˜…è¯»æ—¶é—´"></a>æ˜¾ç¤ºæ–‡ç« å­—æ•°åŠé˜…è¯»æ—¶é—´</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>åŒæ ·åœ¨ä¸»é¢˜_config.xmlä¸­symbols_count_timeï¼Œå¹¶å®‰è£…æ’ä»¶<code>npm install hexo-symbols-count-time</code></p><h2 id="RSSé…ç½®"><a href="#RSSé…ç½®" class="headerlink" title="RSSé…ç½®"></a>RSSé…ç½®</h2><blockquote><p>RSS å¹¿æ³›ç”¨äºç½‘ä¸Šæ–°é—»é¢‘é“ï¼Œblogå’Œ wikiï¼Œä¸»è¦çš„ç‰ˆæœ¬æœ‰ 0.91, 1.0, 2.0ã€‚ä½¿ç”¨ RSS è®¢é˜…èƒ½æ›´å¿«åœ°è·å–ä¿¡æ¯ï¼Œç½‘ç«™æä¾› RSS è¾“å‡ºï¼Œæœ‰åˆ©äºè®©ç”¨æˆ·è·å–ç½‘ç«™å†…å®¹çš„æœ€æ–°æ›´æ–°ã€‚ç½‘ç»œç”¨æˆ·å¯ä»¥åœ¨å®¢æˆ·ç«¯å€ŸåŠ©äºæ”¯æŒ RSS çš„èšåˆå·¥å…·è½¯ä»¶ï¼Œåœ¨ä¸æ‰“å¼€ç½‘ç«™å†…å®¹é¡µé¢çš„æƒ…å†µä¸‹é˜…è¯»æ”¯æŒ RSS è¾“å‡ºçš„ç½‘ç«™å†…å®¹ã€‚</p></blockquote><p>RSSåŠŸèƒ½å…·ä½“æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå…¶å®æˆ‘è¿˜æ˜¯çœ‹ä¸æ˜ç™½ã€‚è¿™é‡Œä¸»è¦æ˜¯é…ç½®è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸€äº›å…¶ä»–çš„å°å°é—®é¢˜ï¼Œæ‰€ä»¥é¡ºä¾¿è®°å½•ä¸€ä¸‹ã€‚</p><div class="note info">            <p>åæ¥é€šè¿‡è¿™ä¸ª<a href="https://www.zhihu.com/question/19580096/answer/20490041">å›ç­”</a>ï¼Œå¯¹RSSæœ‰äº†ä¸€äº›äº†è§£ï¼Œç¡®å®æ˜¯ä¸€ç§ç°åœ¨å¾ˆå°‘è§çš„è®¢é˜…å’¨è¯¢æ–¹å¼</p>          </div><p>åŒæ ·ï¼ŒNexTæ”¯æŒç›´æ¥é…ç½®rssï¼Œä½†è¿˜éœ€è¦å®‰è£…æ’ä»¶<strong><code>npm install hexo-generator-feed</code></strong>ï¼Œç„¶ååœ¨NexTçš„_config.ymlä¸­ï¼Œç›´æ¥å–æ¶ˆrssçš„æ³¨é‡Šå³å¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">follow_me:</span></span><br><span class="line">  <span class="attr">RSS:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br></pre></td></tr></table></figure><p>æ„Ÿåˆ°å¥‡æ€ªçš„æ˜¯ï¼Œé¡µé¢åˆ·æ–°äº†ï¼Œä½†æ˜¯æ²¡æœ‰çœ‹åˆ°åœ¨ä¾§è¾¹æ å‡ºç°RSSçš„å›¾æ ‡æŒ‰é’®ï¼Œpublic/ä¸‹ç¡®å®å¦‚å…¶ä»–æ–‡ç« æ‰€è¯´å‡ºç°äº†atom.xmlæ–‡ä»¶ã€‚ä¸€ç­¹è«å±•ä¹‹é™…çœ‹åˆ°<a href="https://suyin-blog.club/2020/2M3YWE7/">è¿™ç¯‡åšå®¢</a>ï¼Œå…¶ä¸­è¯´åˆ°</p><blockquote><p>åœ¨ <code>social:</code> ä¸‹æ·»åŠ ä»¥ä¸Šä»£ç ã€‚åœ¨ Next v7.7.2 ä¸­å°† RSS è®¾ç½®åœ¨äº† <code>follow_me:</code> ä¸‹ï¼Œè¿™ä¸ªæ˜¯åœ¨æ–‡ç« çš„ç»“å°¾å¤„æ˜¾ç¤º RSSï¼Œè€Œä¸”å åœ°æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä¸å¤ªå–œæ¬¢è¿™ä¸ªä½ç½®ï¼Œè¿˜æ˜¯å–œæ¬¢ä»¥å‰çš„ <code>social:</code> è¿™ä¸ªä½ç½®ï¼Œè¿™æ ·ä¼šæ˜¾ç¤ºåœ¨ä¾§è¾¹æ é‡Œï¼Œè€Œä¸”å åœ°å¾ˆå°ã€‚</p></blockquote><p>æœä¸å…¶ç„¶ï¼Œfollow meä¸‹è®¾ç½®çš„RSSï¼Œä¼šå‡ºç°åœ¨æ–‡ç« åº•ä¸‹ï¼Œè€Œä¸”ç¡®å®æœ‰ä¸€å¤§å—ã€‚äºæ˜¯åœ¨_config.ymlä¸­æ‰¾åˆ°socialï¼Œè™½ç„¶å…¶ä¸­æ²¡æœ‰é¢„ç½®rssä¸€é¡¹ï¼Œä½†æ˜¯ç›´æ¥å°†<code>follow me</code>ä¸‹çš„rsså¤åˆ¶è¿‡å»å³å¯ã€‚æƒ³æƒ³ç¡®å®ä¹Ÿæ²¡æœ‰æ¯›ç—…ï¼Œç¬¦åˆæ ¼å¼ï¼Œæœ‰é“¾æ¥ï¼Œæœ‰å›¾æ ‡ï¼Œå¾ˆæ­£å¸¸</p><h2 id="ä¿®æ”¹swigæ–‡ä»¶"><a href="#ä¿®æ”¹swigæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹swigæ–‡ä»¶"></a>ä¿®æ”¹swigæ–‡ä»¶</h2><p>ä¿®æ”¹ä¸»é¢˜æ ·å¼æ—¶ç»å¸¸éœ€è¦ç›´æ¥ä¿®æ”¹swigæ–‡ä»¶ã€‚å…³äºswigï¼Œæˆ‘å…¶å®æ²¡æœ‰è§è¿‡ï¼Œå¤§æ¦‚æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆhtmlçš„æ¨¡ç‰ˆæ–‡ä»¶ï¼Œè§£é‡Šå™¨æ ¹æ®è¯¥æ–‡ä»¶æ‰€ä»¥å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶è¿›è¡Œæ•´åˆï¼Œæ‹¼å‡‘æœ€ç»ˆçš„htmlæ–‡ä»¶</p><ul><li>languageçš„æ–‡æ¡ˆï¼šåœ¨swigä¸­ï¼Œå¯ä»¥é€šè¿‡<strong><code>__(&#39;xx.xx&#39;)</code></strong>çš„æ–¹å¼è·å–languageä¸­é…ç½®çš„æ–‡æœ¬</li><li>theme/_config.ymlé…ç½®ï¼šåœ¨swigä¸­ï¼Œå¯ä»¥é€šè¿‡<strong><code>theme.xx</code></strong>è·å–ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</li><li>posté…ç½®ï¼šåœ¨swigä¸­ï¼Œå¯ä»¥é€šè¿‡<strong><code>post.xx</code></strong>è·å–åœ¨æ–‡ç« ä¸­é…ç½®çš„ä¿¡æ¯ï¼Œå½“ç„¶è‡ªå®šä¹‰çš„å±æ€§ä¹Ÿå¯ä»¥</li></ul><h2 id="æ‹‰æ‹‰æ‚æ‚"><a href="#æ‹‰æ‹‰æ‚æ‚" class="headerlink" title="æ‹‰æ‹‰æ‚æ‚"></a>æ‹‰æ‹‰æ‚æ‚</h2><p>ä»¥ä¸‹è®°å½•ä¸€ä¸‹çœ‹åˆ°çš„ä¸€äº›å¥½ç©ï¼ˆèŠ±é‡Œèƒ¡å“¨ï¼‰çš„é…ç½®ã€‚</p><ul><li><p>åœ¨çº¿èŠå¤©æ’ä»¶<a href="https://www.daocloud.io/">DaoVoice</a></p><p>å»ºç«™æ—¶é—´ï¼Œåœ¨<code>/blog/themes/next/layout/_partials/footer.swig</code>ä¸­æ·»åŠ è¿™éƒ¨åˆ†ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;days&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show_date_time</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.setTimeout(<span class="string">&quot;show_date_time()&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">    BirthDay=<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;04/17/2018 15:13:14&quot;</span>);<span class="comment">//ä¿®æ”¹ä¸ºè‡ªå·±çš„blogå»ºç«™æ—¶é—´</span></span><br><span class="line">    today=<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    timeold=(today.getTime()-BirthDay.getTime());</span><br><span class="line">    sectimeold=timeold/<span class="number">1000</span></span><br><span class="line">    secondsold=<span class="built_in">Math</span>.floor(sectimeold);</span><br><span class="line">    msPerDay=<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">1000</span></span><br><span class="line">    e_daysold=timeold/msPerDay</span><br><span class="line">    daysold=<span class="built_in">Math</span>.floor(e_daysold);</span><br><span class="line">    e_hrsold=(e_daysold-daysold)*<span class="number">24</span>;</span><br><span class="line">    hrsold=setzero(<span class="built_in">Math</span>.floor(e_hrsold));</span><br><span class="line">    e_minsold=(e_hrsold-hrsold)*<span class="number">60</span>;</span><br><span class="line">    minsold=setzero(<span class="built_in">Math</span>.floor((e_hrsold-hrsold)*<span class="number">60</span>));</span><br><span class="line">    seconds=setzero(<span class="built_in">Math</span>.floor((e_minsold-minsold)*<span class="number">60</span>));</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;days&#x27;</span>).innerHTML=<span class="string">&quot;æœ¬ç«™å·²å®‰å…¨è¿è¡Œ&quot;</span>+daysold+<span class="string">&quot;å¤©&quot;</span>+hrsold+<span class="string">&quot;å°æ—¶&quot;</span>+minsold+<span class="string">&quot;åˆ†&quot;</span>+seconds+<span class="string">&quot;ç§’&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setzero</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i&lt;<span class="number">10</span>)</span><br><span class="line">    &#123;i=<span class="string">&quot;0&quot;</span> + i&#125;;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line">show_date_time();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ–‡ç« åŠ å¯†åŠŸèƒ½</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&#x27;&#123;&#123; page.password &#125;&#125;&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (prompt(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ç« å¯†ç &#x27;</span>) !== <span class="string">&#x27;&#123;&#123; page.password &#125;&#125;&#x27;</span>)&#123;</span><br><span class="line">                alert(<span class="string">&#x27;å¯†ç é”™è¯¯ï¼&#x27;</span>);</span><br><span class="line">                history.back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å­—ä½“å¤§å°ã€‚</p><p>åœ¨<code>themes/next/source/css/_variables/base.styl</code>ä¸­çš„<code>font-size-headings-step</code></p><p>ä»¥åŠ<code>themes/next/source/css/_variables/Mist.styl</code>ä¸­çš„<code>font-size-headings-base</code></p></li></ul><h2 id="å®˜æ–¹æ–‡æ¡£"><a href="#å®˜æ–¹æ–‡æ¡£" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a><a href="http://theme-next.iissnan.com">å®˜æ–¹æ–‡æ¡£</a></h2><p><a href="http://theme-next.iissnan.com/third-party-services.html#algolia-search">ç¬¬ä¸‰æ–¹æ’ä»¶é…ç½®</a>ï¼šä»¥ä¸Šé…ç½®æ–‡æ¡£åŸºæœ¬éƒ½æœ‰è¯´æ˜</p><p><a href="http://theme-next.iissnan.com/tag-plugins.html">å†…ç½®æ ‡ç­¾ä½¿ç”¨</a>ï¼šå¯ä»¥é€‚å½“ç¾åŒ–æ–‡ç« </p><p><a href="http://theme-next.iissnan.com/theme-settings.html">æ–‡ç« é…ç½®</a></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;èƒŒæ™¯ï¼šæœ€è¿‘æ¢äº†ä¸€å°ç”µè„‘ï¼ŒåŸæ¥çš„ä¸»åŠ›æœºå‡ è¿‘é€€å½¹ï¼Œæ•…éœ€è¦æŠŠå·¥ä½œå°è¿›è¡Œè¿ç§»ã€‚å…¶ä¸­åŒ…æ‹¬æŠŠHexoçš„æœ¬åœ°æ–‡ä»¶è¿›è¡Œè½¬ç§»ã€‚ç»è¿‡æŸ¥æ‰¾æ€»ç»“ï¼Œå¾—å‡ºæ­¤æ–‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶&quot;&gt;&lt;/a&gt;å¯èƒ½éœ€ä¿ç•™çš„åŸæ–‡ä»¶&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_config.yml	&amp;#x2F;&amp;#x2F; ä¿å­˜å¯¹äºhexoçš„ä¸€äº›ä¸ªæ€§åŒ–è®¾ç½®&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;package.json	&amp;#x2F;&amp;#x2F; è®°å½•hexoæ¡†æ¶ä¾èµ–çš„ç‰ˆæœ¬ä¿¡æ¯&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scaffolds&amp;#x2F;	&amp;#x2F;&amp;#x2F; è‡ªåŠ¨ç”Ÿæˆpostä½¿ä½¿ç”¨çš„è„šæ‰‹æ¶&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source&amp;#x2F;		&amp;#x2F;&amp;#x2F; æ–‡ç¨¿æºæ–‡ä»¶&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;themes&amp;#x2F;		&amp;#x2F;&amp;#x2F; ä½¿ç”¨çš„ä¸»é¢˜æ–‡ä»¶&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Blog" scheme="http://codeminions.github.io/categories/Blog/"/>
    
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
    <category term="Hexo" scheme="http://codeminions.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆJavaé”æœºåˆ¶</title>
    <link href="http://codeminions.github.io/2020/10/24/%E6%B5%85%E8%B0%88Java%E9%94%81%E6%9C%BA%E5%88%B6/"/>
    <id>http://codeminions.github.io/2020/10/24/%E6%B5%85%E8%B0%88Java%E9%94%81%E6%9C%BA%E5%88%B6/</id>
    <published>2020-10-23T16:00:00.000Z</published>
    <updated>2021-02-12T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>é”çš„æ¦‚å¿µï¼Œæ¥è‡ªäºæ“ä½œç³»ç»Ÿã€‚<br>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ˜¯å†…å­˜ç‹¬ç«‹ï¼Œå®ç°è¿›ç¨‹é—´çš„é€šä¿¡éœ€è¦é€šè¿‡ä¸€äº›å…¶ä»–çš„æ‰‹æ®µï¼›ä½†æ˜¯çº¿ç¨‹ä¹‹é—´æ˜¯å†…å­˜å…±äº«çš„ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹å¯¹æŸä¸€ä¸´ç•Œèµ„æºï¼ˆæœ‰å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œå­˜åœ¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ï¼‰è¿›è¡Œè¯»å†™è®¿é—®æ—¶ï¼Œå°±ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚<br><em>é”æ¦‚å¿µ</em></p><a id="more"></a><p>æ ¹æ®é”å¯¹è®¿é—®é™åˆ¶è§„åˆ™çš„ä¸åŒï¼Œå¯ä»¥å°†é”è¿›è¡Œåˆ†ç±»ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹åœ¨Javaä¸­ä¸»è¦çš„é”ã€‚</p><h2 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h2><h2 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é”"></a>æ‚²è§‚é”</h2><h2 id="è‡ªæ—‹é”"><a href="#è‡ªæ—‹é”" class="headerlink" title="è‡ªæ—‹é”"></a>è‡ªæ—‹é”</h2><h3 id="é€‚åº”æ€§è‡ªæ—‹é”"><a href="#é€‚åº”æ€§è‡ªæ—‹é”" class="headerlink" title="é€‚åº”æ€§è‡ªæ—‹é”"></a>é€‚åº”æ€§è‡ªæ—‹é”</h3><h2 id="å…¬å¹³é”"><a href="#å…¬å¹³é”" class="headerlink" title="å…¬å¹³é”"></a>å…¬å¹³é”</h2><h2 id="éå…¬å¹³é”"><a href="#éå…¬å¹³é”" class="headerlink" title="éå…¬å¹³é”"></a>éå…¬å¹³é”</h2><h2 id="å¯é‡å…¥é”"><a href="#å¯é‡å…¥é”" class="headerlink" title="å¯é‡å…¥é”"></a>å¯é‡å…¥é”</h2><h2 id="ä¸å¯é‡å…¥é”"><a href="#ä¸å¯é‡å…¥é”" class="headerlink" title="ä¸å¯é‡å…¥é”"></a>ä¸å¯é‡å…¥é”</h2><h2 id="å…±äº«é”"><a href="#å…±äº«é”" class="headerlink" title="å…±äº«é”"></a>å…±äº«é”</h2><h2 id="æ’ä»–é”"><a href="#æ’ä»–é”" class="headerlink" title="æ’ä»–é”"></a>æ’ä»–é”</h2><h1 id="Javaé”å®ç°"><a href="#Javaé”å®ç°" class="headerlink" title="Javaé”å®ç°"></a>Javaé”å®ç°</h1><p>åœ¨Javaä¸­ï¼Œé™¤äº†ä½¿ç”¨å…³é”®å­—synchronizedè¿›è¡ŒåŠ é”ï¼Œåœ¨Java5ä»¥åï¼Œè¿˜å¼•å…¥äº†ä¸€ä¸ªjucåŒ…ï¼Œå…¶ä¸­å¢åŠ äº†è®¸å¤šé€‚ç”¨äºJavaçš„çº¿ç¨‹å®‰å…¨çš„å®ç°ï¼Œæ¯”å¦‚ä¸€ç³»åˆ—Lockç±»ã€‚<br>å®ç°Lockçš„é”ç±»å‹ï¼Œå¯ä»¥é€šè¿‡lock.lock()æˆ–lock.unLock()è¿›è¡Œçµæ´»çš„åŠ é”å’Œé‡Šæ”¾é”ã€‚å…¶åº•å±‚å®ç°åŸç†å…¶å®æ˜¯é€šè¿‡Javaä»£ç è°ƒç”¨nativeå±‚ï¼Œå†è°ƒç³»ç»Ÿæ¥å£å®ç°çš„ã€‚è€Œsynchronizedåˆ™ä¸»è¦æ˜¯JVMå±‚å®ç°ã€‚è¿™é‡Œä¸»è¦è®²ä¸€ä¸‹synchronizedçš„è¿ä½œæœºåˆ¶ã€‚</p><h2 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h2><p><img src="https://upload-images.jianshu.io/upload_images/2062729-b98084591219da8c.png" style="zoom:40%;" /></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡ç¼–è¯‘ä»¥åï¼Œsynchronizedå…³é”®å­—çš„ä»£ç å—ï¼Œä¼šè¢«ç¼–è¯‘ä¸ºä¸¤ä¸ªè™šæ‹ŸæœºæŒ‡ä»¤ï¼Œåˆ†åˆ«å¯¹åº”ç€åŠ é”å’Œé‡Šæ”¾é”æ“ä½œã€‚</p><p>è¿™é‡Œæˆ‘æƒ³è¯´ä¸€ä¸‹è‡ªå·±å¯¹åŠ é”çš„ç†è§£ã€‚Javaä¸­çš„åŠ é”æ“ä½œï¼Œå…¶å®æ˜¯æŠŠæŸä¸ªå¯¹è±¡å½“åšé”ï¼ˆmonitorï¼‰ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªé”ï¼Œå¯¹è±¡å¤´ä¸­çš„MaskWordä¸­ï¼Œè®°å½•ç€è¯¥å¯¹è±¡çš„é”çŠ¶æ€åŠæ‹¥æœ‰çš„çº¿ç¨‹ä¿¡æ¯ã€‚</p><p>å½“ä»£ç è¿è¡Œè¿›å…¥åˆ°åŒæ­¥ä»£ç å—ä¸­ï¼Œæ‰§è¡ŒmonitorenteræŒ‡ä»¤ï¼Œjvmä¼šå»å°è¯•è·å–monitorçš„æ‰€æœ‰æƒã€‚å¦‚æœmonitorçš„è¿›å…¥æ•°ä¸º0ï¼Œåˆ™çº¿ç¨‹å¯ä»¥æ‹¥æœ‰è¯¥monitorï¼Œå¹¶ä¸”è¿›å…¥æ•°ç½®1ã€‚synchronizedæ˜¯ä¸€ç§å¯é‡å…¥é”ï¼Œå› æ­¤å¦‚æœè·å–æ‰€æœ‰æƒæ—¶å‘ç°å·²æœ‰çº¿ç¨‹æ‹¥æœ‰ï¼Œä½†æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œåˆ™å¯ä»¥ç›´æ¥è¿›å…¥ï¼Œå¹¶ä¸”è¿›å…¥æ•°+1ã€‚</p><p>å½“åŒæ­¥ä»£ç å—è¿è¡Œç»“æŸï¼Œæ‰§è¡Œmonitorexitï¼Œjvmä¼šå…ˆå»åˆ¤æ–­ï¼Œæ‰§è¡Œè¯¥æŒ‡ä»¤çš„å¿…é¡»æ˜¯monitorçš„æ‹¥æœ‰è€…ï¼Œç„¶åè¿›å…¥æ•°-1ã€‚å¦‚æœè¿›å…¥æ•°ä¸º0ï¼Œåˆ™è¯¥çº¿ç¨‹ä¸å†æ˜¯è¯¥monitoræ‹¥æœ‰è€…ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/2062729-8b7734120fae6645.png" style="zoom:40%;" /></p><blockquote><p>ä¸¤ç§åŒæ­¥æ–¹å¼æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯æ–¹æ³•çš„åŒæ­¥æ˜¯ä¸€ç§éšå¼çš„æ–¹å¼æ¥å®ç°ï¼Œæ— éœ€é€šè¿‡å­—èŠ‚ç æ¥å®Œæˆã€‚ä¸¤ä¸ªæŒ‡ä»¤çš„æ‰§è¡Œæ˜¯JVMé€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿçš„äº’æ–¥åŸè¯­mutexæ¥å®ç°ï¼Œè¢«é˜»å¡çš„çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€ç­‰å¾…é‡æ–°è°ƒåº¦ï¼Œä¼šå¯¼è‡´â€œç”¨æˆ·æ€å’Œå†…æ ¸æ€â€ä¸¤ä¸ªæ€ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œå¯¹æ€§èƒ½æœ‰è¾ƒå¤§å½±å“ã€‚</p></blockquote><h2 id="å®ç°æœºåˆ¶"><a href="#å®ç°æœºåˆ¶" class="headerlink" title="å®ç°æœºåˆ¶"></a>å®ç°æœºåˆ¶</h2><p>åœ¨Java1.6ä»¥å‰ï¼Œsynchronizedçš„æ€§èƒ½æ˜¯æ¯”è¾ƒç³Ÿç³•çš„ï¼Œæ¯”ä¸ä¸ŠLockã€‚ä½†æ˜¯åœ¨Java1.6ä»¥åï¼Œå¯¹synchronizedåšäº†æ€§èƒ½ä¼˜åŒ–ï¼Œå’ŒLockå…¶å®æ˜¯å¹¶é©¾é½é©±çš„ï¼Œå¯ä»¥æ ¹æ®å…·ä½“åœºæ™¯è¿›è¡Œé€‰æ‹©ã€‚</p><p>åœ¨1.6ä¸­ï¼Œsynchronizedå¢åŠ äº†ä¸€ä¸ªé”å‡çº§çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆï¼Œsynchronizedé»˜è®¤æ˜¯ä¹è§‚é”ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ— é”ï¼Œå³å‡è®¾æ²¡æœ‰çº¿ç¨‹ç«äº‰ï¼Œé€šè¿‡casæ“ä½œå®ç°ã€‚</p><p>å¦‚æœé”ä¸€ç›´åªè¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ï¼Œé‚£ä¹ˆä¹è§‚é”è½¬å˜ä¸ºåå‘é”ã€‚ç›´æ¥æ£€æµ‹å¯¹è±¡å¤´é‡Œæ˜¯å¦å­˜åœ¨è¯¥çº¿ç¨‹idï¼Œè€Œä¸æ˜¯ç”¨casæ“ä½œï¼Œè¿›è€Œæé«˜äº†æ€§èƒ½ã€‚å¹¶ä¸”ä¸ä¼šä¸»åŠ¨é‡Šæ”¾åå‘é”ã€‚</p><p>å½“æœ‰å…¶ä»–çº¿ç¨‹è®¿é—®åŒæ­¥ä»£ç å—æ—¶ï¼Œé”ä¼šå‡çº§ä¸ºè½»é‡é”ï¼ŒåŒºåˆ«åœ¨äºç­‰å¾…çº¿ç¨‹ä¼šè¿›è¡Œè‡ªæ—‹</p><p>è‡ªæ—‹è¶…è¿‡ä¸€å®šæ¬¡æ•° æˆ–è€…æœ‰ç¬¬ä¸‰ä¸ªçº¿ç¨‹ç«äº‰ï¼Œåˆ™å‡çº§ä¸ºé‡é‡é”ï¼Œç­‰å¾…çš„çº¿ç¨‹ç›´æ¥æŒ‚èµ·</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h1&gt;&lt;p&gt;é”çš„æ¦‚å¿µï¼Œæ¥è‡ªäºæ“ä½œç³»ç»Ÿã€‚&lt;br&gt;åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ˜¯å†…å­˜ç‹¬ç«‹ï¼Œå®ç°è¿›ç¨‹é—´çš„é€šä¿¡éœ€è¦é€šè¿‡ä¸€äº›å…¶ä»–çš„æ‰‹æ®µï¼›ä½†æ˜¯çº¿ç¨‹ä¹‹é—´æ˜¯å†…å­˜å…±äº«çš„ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹å¯¹æŸä¸€ä¸´ç•Œèµ„æºï¼ˆæœ‰å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œå­˜åœ¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ï¼‰è¿›è¡Œè¯»å†™è®¿é—®æ—¶ï¼Œå°±ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚&lt;br&gt;&lt;em&gt;é”æ¦‚å¿µ&lt;/em&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆequals()å’ŒhashCode()</title>
    <link href="http://codeminions.github.io/2020/10/18/equals%E5%92%8ChashCode/"/>
    <id>http://codeminions.github.io/2020/10/18/equals%E5%92%8ChashCode/</id>
    <published>2020-10-17T16:00:00.000Z</published>
    <updated>2021-02-12T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼€å§‹æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œè¦ä»ä¸€é“é¢è¯•é¢˜å¼€å§‹ï¼Œé¢è¯•å®˜é—®æˆ‘ï¼ŒHashMapä¸­å­˜çš„å¯¹è±¡æ²¡æœ‰é‡å†™hashCode()ä¼šæœ‰ä»€ä¹ˆå½±å“â€¦</p></blockquote><a id="more"></a><h1 id="equals"><a href="#equals" class="headerlink" title="equals()"></a>equals()</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œequals()æ˜¯Javaä¸­Objectçš„åŸºæœ¬æ–¹æ³•ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚</p><h2 id="å’Œequals"><a href="#å’Œequals" class="headerlink" title="==å’Œequals()"></a>==å’Œequals()</h2><p>ç»å¸¸ä¼šè¢«é—®çš„é—®é¢˜æ˜¯==å’Œequals()çš„åŒºåˆ«ã€‚ä½¿ç”¨==å¯¹å¯¹è±¡è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒï¼Œequals()çš„è¯ï¼Œå¦‚æœæ²¡æœ‰å¯¹å®ƒè¿›è¡Œé‡å†™ï¼Œå…¶å®ä¹Ÿæ˜¯æ¯”è¾ƒå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚æ‰€ä»¥ä¸€èˆ¬éœ€è¦æˆ‘ä»¬å¯¹ä»–æ ¹æ®å…·ä½“çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œé‡å†™ã€‚</p><h1 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode()"></a>hashCode()</h1><p>è¿™ä¸ªæ–¹æ³•å¾ˆå¤šäººéƒ½çŸ¥é“ï¼Œä½†ä¸ä¸€å®šçœŸçš„çŸ¥é“ï¼Œæ¯”å¦‚æˆ‘ã€‚<br>hashCode()ä¹Ÿæ˜¯Objectçš„åŸºæœ¬æ–¹æ³•ï¼Œç”¨äºè®¡ç®—å¯¹è±¡çš„hashå€¼ï¼Œé»˜è®¤ä¹Ÿæ˜¯è¿”å›å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚å¦‚æœé—®æœ‰æ²¡æœ‰è¿‡é‡å†™hashCodeçš„åœºæ™¯ï¼Œæˆ‘æ˜¯æ²¡æœ‰çš„ï¼›ä½†å¦‚æœé—®ï¼Œæœ‰æ²¡æœ‰ä½¿ç”¨HashMapå­˜è¿‡è‡ªå®šä¹‰å¯¹è±¡ï¼Œé‚£è‚¯å®šæ˜¯æœ‰çš„ã€‚ä½†æ˜¯ä½¿ç”¨HashMapå­˜è‡ªå®šä¹‰å¯¹è±¡å´ä¸é‡å†™hashCode()æ–¹æ³•ï¼Œé‚£ä¾¿æœ‰é—®é¢˜äº†ã€‚</p><h2 id="HashMapå’ŒhashCode"><a href="#HashMapå’ŒhashCode" class="headerlink" title="HashMapå’ŒhashCode()"></a>HashMapå’ŒhashCode()</h2><p>é¦–å…ˆè®¾å®šä¸€ä¸ªåœºæ™¯<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Key</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> k;</span><br><span class="line">    <span class="comment">// å…ˆä¸å¯¹Keyçš„equalså’ŒhashCodeè¿›è¡Œé‡å†™</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">HashMap&lt;Key, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="keyword">new</span> Key(<span class="number">1</span>), <span class="string">&quot;1&quot;</span>);</span><br><span class="line">map.get(<span class="keyword">new</span> Key(<span class="number">1</span>));</span><br></pre></td></tr></table></figure><br>å‡å®šint kå¯ä»¥å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªKeyå¯¹è±¡ï¼ˆæ¯”å¦‚æ˜¯èº«ä»½è¯å·ï¼‰ï¼Œé‚£ä¹ˆä»ä¸šåŠ¡è§’åº¦è¯´ï¼Œmap.getæ˜¯å¯ä»¥getåˆ°ä¸Šä¸€è¡Œputçš„è¿™ä¸ªå¯¹è±¡è¿”å›â€1â€çš„ï¼Œå› ä¸ºè®¤ä¸ºä¸¤æ¬¡newçš„Keyæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚<br>ä½†å®é™…ä¸Šget()è¿”å›çš„ç»“æœæ˜¯nullã€‚ä¸ºä»€ä¹ˆï¼Ÿ<br>è¿™è¦ä»HashMapçš„putæ“ä½œå¼€å§‹è¯´èµ·ã€‚HashMap putå¯¹è±¡æ—¶ï¼Œä¼šå…ˆé€šè¿‡hashCode()æ–¹æ³•è·å–å¯¹è±¡Hashå€¼ï¼Œè¿›è¡Œè®¡ç®—å¾—åˆ°ç´¢å¼•ä½ç½®ä»¥åå­˜åˆ°å¯¹åº”ä½ç½®ã€‚getå¯¹è±¡æ—¶ï¼Œä»ç„¶é€šè¿‡hashCode()æ–¹æ³•è·å–hashå€¼è®¡ç®—å‡ºç´¢å¼•ï¼Œè¿›è€Œæ‰¾åˆ°å¯¹è±¡ã€‚è€Œå¦‚æœæ²¡æœ‰é‡å†™hashCode()ï¼Œåˆ™é»˜è®¤è¿”å›å¯¹è±¡çš„åœ°å€ï¼Œæ‰€ä»¥ä»¥ä¸Šåœºæ™¯ï¼Œä¸¤æ¬¡newçš„Keyå¯¹è±¡åœ°å€è‚¯å®šä¸ä¸€æ ·ï¼Œæ‰€ä»¥getå‡ºæ¥ä¼šæ˜¯nullã€‚<br>é‚£é‡å†™äº†hashCodeæ–¹æ³•ï¼Œè¿”å›k.hashCode()ï¼Œå› ä¸ºåŒæ ·çš„kçš„Hashå€¼è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼ˆ<strong>Integerçš„hashCode()æ˜¯è¿”å›è‡ªèº«çš„å€¼</strong>ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™èƒ½å¦getåˆ°å‘¢ï¼Ÿå®é™…ä¸Šè¿˜æ˜¯ä¸èƒ½ã€‚å› ä¸ºè¿˜éœ€è¦é‡å†™equals()ã€‚<br>ä¸Šæ–‡è¯´åˆ°HashMapæ–¹æ³•getæ—¶é€šè¿‡å¯¹è±¡çš„hashå€¼æ‰¾åˆ°å…·ä½“ä½ç½®ï¼Œç”±äºJavaçš„HashMapå®ç°æ˜¯ä½¿ç”¨é“¾è¡¨è§£å†³å†²çªï¼Œå³å†²çªçš„å¯¹è±¡ä»¬ä¼šåœ¨ç›¸åº”çš„ç´¢å¼•ä½ç½®ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨ï¼Œå› æ­¤hashå€¼ç›¸åŒçš„å¯¹è±¡å¯èƒ½ä¼šæœ‰å¤šä¸ªï¼Œéœ€è¦å¯¹é“¾è¡¨å…ƒç´ è¿›è¡Œéå†æ¯”è¾ƒï¼Œè¿™æ—¶å€™ä½¿ç”¨çš„ä¾¿æ˜¯equals()æ–¹æ³•ã€‚ç”±äºæ²¡æœ‰é‡å†™equals()æ‰€ä»¥é»˜è®¤æ¯”è¾ƒå¯¹è±¡çš„åœ°å€ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šæœ‰åŒ¹é…çš„å¯¹è±¡ã€‚<br>å¦‚æœå¯¹equals()å’ŒhashCode()éƒ½è¿›è¡Œé‡å†™ï¼Œå°±èƒ½æ»¡è¶³æˆ‘ä»¬éœ€è¦ï¼Œè¿”å›â€1â€äº†ã€‚</p><p><img src="/Users/linweixian/Desktop/æˆªå±2020-10-18 ä¸Šåˆ1.27.35.png" alt="code" style="zoom:45%;" /></p><h1 id="equals-ä¸hashCode"><a href="#equals-ä¸hashCode" class="headerlink" title="equals()ä¸hashCode()"></a>equals()ä¸hashCode()</h1><p>å¦‚æ­¤è¯´æ¥ï¼Œequals()ä¸hashCode()éƒ½èƒ½ç”¨äºå¯¹è±¡ä¹‹é—´çš„æ¯”è¾ƒï¼Œé‚£ä¹ˆä»–ä»¬æœ‰ä½•åŒºåˆ«å‘¢ï¼Ÿ</p><ul><li>ä»æ•ˆæœï¼ˆå¯é æ€§ï¼‰ä¸Šè¯´ï¼Œä½¿ç”¨equals()æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç»“æœæ˜¯trueçš„ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆä¸šåŠ¡é€»è¾‘ä¸Šæ¥è¯´ï¼‰ï¼›å¦‚æœequals()æ¯”è¾ƒæ˜¯ç›¸ç­‰çš„ï¼Œåˆ™hashCode()è¿”å›çš„ç»“æœä¹Ÿä¼šæ˜¯ç›¸ç­‰çš„ï¼Œå› ä¸ºéƒ½æ˜¯ç›¸åŒçš„æ•°å€¼è¿›è¡Œè®¡ç®—å˜›ã€‚ä½†æ˜¯å¦‚æœæ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œå…¶hashå€¼è®¡ç®—ç»“æœå´æ˜¯æœ‰å¯èƒ½ç›¸ç­‰çš„ï¼ˆå¦åˆ™ä¹Ÿä¸ä¼šæœ‰hashå†²çªè¿™ä¸€è¯´äº†ï¼Œè¿™å–å†³äºè®¡ç®—çš„æ–¹å¼ï¼‰ã€‚</li><li>ä»æ€§èƒ½ä¸Šæ¥è¯´ï¼Œç”±äºequals()çš„æ¯”è¾ƒæ¶‰åŠå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ›´åŠ å…¨é¢å¾€å¾€å¤æ‚ä¸€äº›ï¼Œæ•ˆç‡å°±æ¯”è¾ƒä½ï¼›è€ŒhashCode()ç”±äºåªæ˜¯æ¶‰åŠhashç çš„è®¡ç®—ç”Ÿæˆï¼Œæ‰€ä»¥é€Ÿåº¦è‡ªç„¶æ›´å¿«ä¸€äº›</li></ul><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><blockquote><p>æ²¡æœ‰å¯¹equals()å’ŒhashCode()è¿›è¡Œé‡å†™ï¼Œé»˜è®¤éƒ½æ˜¯ä½¿ç”¨å¯¹è±¡çš„åœ°å€è¿›è¡Œè®¡ç®—ã€‚<br>equals()è¿”å›trueçš„ä¸¤ä¸ªå¯¹è±¡ä¸€å®šç›¸ç­‰ï¼ŒhashCode()è¿”å›trueæ—¶equals()ä¸ä¸€å®šè¿”å›trueï¼Œå³å¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ï¼Œä½†hashCode()è¿”å›falseçš„ä¸¤ä¸ªå¯¹è±¡ä¸€å®šä¸ç›¸ç­‰<br>ç”±äºä¸¤ä¸ªæ–¹æ³•æ•ˆæœå’Œæ€§èƒ½çš„ä¸åŒï¼Œå½“éœ€è¦å¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¯ä»¥é€šè¿‡å…ˆæ¯”è¾ƒhashCodeï¼Œå¦‚æœhashCodeä¸€æ ·å†è¿›è¡Œequals()çš„æ¯”è¾ƒï¼›å¦‚æœhashCodeéƒ½ä¸ä¸€æ ·ï¼Œåˆ™æ²¡æœ‰å¿…è¦å†è¿›è¡Œä¸‹ä¸€æ­¥æ¯”è¾ƒäº†ã€‚ä»è€ŒèŠ‚çº¦ä¸€äº›æ€§èƒ½ã€‚<br>éœ€è¦å¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒçš„åœºæ™¯ï¼Œæ¯”å¦‚ä½¿ç”¨HashMapå’ŒHashSetè¿›è¡Œå­˜å‚¨ï¼Œç”±äºè¿™ä¸¤ä¸ªéƒ½ä¸å…è®¸å­˜å‚¨ç›¸åŒçš„å¯¹è±¡ï¼Œå› æ­¤å­˜å…¥è¿‡ç¨‹ä¸­å¿…å®šéƒ½æ¶‰åŠå®¹å™¨å†…å·²æœ‰å¯¹è±¡çš„æ¯”è¾ƒï¼Œè¿™ç§æ—¶å€™å…ˆæ¯”è¾ƒhashCodeçš„æ€§èƒ½ä¼˜åŠ¿å°±æ¯”è¾ƒæ˜æ˜¾äº†ã€‚</p><p>å…³äºhashCode()è¿”å›trueï¼Œequals()è¿”å›falseçš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸¤ä¸ªå¯¹è±¡Aï¼ŒBï¼Œéƒ½æ‹¥æœ‰å±æ€§String aä¸”æ˜¯ç›¸ç­‰ï¼Œåˆ™ä»–ä»¬çš„hashCodeå°±æ˜¯ç›¸ç­‰çš„ï¼Œå®é™…ä¸Šä»–ä»¬å´æ˜¯ä¸¤ä¸ªä¸åŒå¯¹è±¡ï¼Œæ‰€ä»¥equals()ä¸€å®šæ˜¯falseçš„ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å¼€å§‹æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œè¦ä»ä¸€é“é¢è¯•é¢˜å¼€å§‹ï¼Œé¢è¯•å®˜é—®æˆ‘ï¼ŒHashMapä¸­å­˜çš„å¯¹è±¡æ²¡æœ‰é‡å†™hashCode()ä¼šæœ‰ä»€ä¹ˆå½±å“â€¦&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>APTï¼ˆæ³¨è§£å¤„ç†å™¨ï¼‰å­¦ä¹ ä¸ç†è§£</title>
    <link href="http://codeminions.github.io/2019/11/20/APT%EF%BC%88%E6%B3%A8%E8%A7%A3%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%89%E5%AD%A6%E4%B9%A0%E4%B8%8E%E7%90%86%E8%A7%A3/"/>
    <id>http://codeminions.github.io/2019/11/20/APT%EF%BC%88%E6%B3%A8%E8%A7%A3%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%89%E5%AD%A6%E4%B9%A0%E4%B8%8E%E7%90%86%E8%A7%A3/</id>
    <published>2019-11-20T13:06:00.000Z</published>
    <updated>2021-02-11T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™æ®µæ—¶é—´é€šè¿‡å¯¹æ³¨è§£ç®¡ç†å™¨çš„å­¦ä¹ ï¼Œè·Ÿç€ç½‘è¯¾ç®€å•å®ç°äº†ç‰è§‚éŸ³æ³¨è§£å¤„ç†ï¼Œå¯¹æ³¨è§£æœ‰æ›´å¤šç†è§£ã€‚<br>åŒæ—¶ç”±äºè¯¥ç½‘è¯¾æ˜¯åŸºäºkotlinè®²è§£ï¼Œäºæ˜¯ä¹Ÿgetäº†å¾ˆå¤škotlinçš„åŸºæœ¬æ“ä½œä¹‹å¤–çš„ç‚«é…·æ“ä½œ<br>å› æ­¤è¿™ç¯‡æ–‡ç« ï¼Œé‡åœ¨è‡ªèº«çš„è®°å½•ç†è§£</p></blockquote><a id="more"></a><h1 id="Javaæ³¨è§£åŸºç¡€"><a href="#Javaæ³¨è§£åŸºç¡€" class="headerlink" title="Javaæ³¨è§£åŸºç¡€"></a>Javaæ³¨è§£åŸºç¡€</h1><p>æ³¨è§£å¯ä»¥ç†è§£ä¸ºæ ‡ç­¾ï¼Œç”¨äºå¯¹ä»£ç çš„æ ‡è®°è¯†åˆ«ã€‚ä½¿ç”¨<strong>@interface</strong>å®šä¹‰ä¸€ä¸ªæ³¨è§£ã€‚</p><h2 id="å…ƒæ³¨è§£"><a href="#å…ƒæ³¨è§£" class="headerlink" title="å…ƒæ³¨è§£"></a>å…ƒæ³¨è§£</h2><p>5ç§å…ƒæ³¨è§£ï¼Œä½œä¸ºåŸºæœ¬æ³¨è§£å¯ä»¥ç”¨äºä¿®é¥°å…¶ä»–çš„æ³¨è§£ã€‚</p><h4 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h4><p>æ ‡ç¤ºä¸€ä¸ªæ³¨è§£çš„å­˜æ´»æ—¶é—´ï¼Œå³ç”Ÿå‘½å‘¨æœŸã€‚</p><ul><li>RetentionPolicy.SOURCE åªåœ¨æºç é˜¶æ®µä¿ç•™ï¼Œç¼–è¯‘æ—¶è¢«ç¼–è¯‘å™¨ä¸¢å¼ƒ</li><li>RetentionPolicy.CLASS    åªè¢«ä¿ç•™åˆ°ç¼–è¯‘æ—¶ï¼Œä¸ä¼šè¢«åŠ è½½åˆ°JVMä¸­</li><li>RetentionPolicy.RUNTIME å¯ä»¥è¢«ä¿ç•™åˆ°è¿è¡Œæ—¶ï¼Œæ•…å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–</li></ul><h4 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a>@Documented</h4><p>å¯ä»¥å°†æ³¨è§£ä¸­çš„å†…å®¹æ·»åŠ åˆ°JavaDocä¸­å»ã€‚</p><h4 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h4><p>é™å®šä¸€ä¸ªæ³¨è§£çš„ä½¿ç”¨åœºæ™¯ã€‚ä¸€èˆ¬çš„æ³¨è§£ä½¿ç”¨åœºæ™¯ä¸è¢«é™å®šï¼Œä½¿ç”¨è¯¥æ³¨è§£ä»¥åä½¿ç”¨åœºæ™¯è¢«é™å®šã€‚</p><ul><li>ElementType.ANNOTATION_TYPE å¯¹ä¸€ä¸ªæ³¨è§£è¿›è¡Œæ³¨è§£</li><li>ElementType.CONSTRUCTOR å¯¹æ„é€ æ–¹æ³•è¿›è¡Œæ³¨è§£</li><li>ElementType.FIELD å¯¹å±æ€§å­—æ®µè¿›è¡Œæ³¨è§£</li><li>ElementType.LOCAL_VARIABLE å¯¹å±€éƒ¨å˜é‡è¿›è¡Œæ³¨è§£</li><li>ElementType.METHOD å¯¹æ–¹æ³•è¿›è¡Œæ³¨è§£</li><li>ElementType.PACKAGE å¯¹ä¸€ä¸ªåŒ…è¿›è¡Œæ³¨è§£</li><li>ElementType.PARAMETER å¯¹ä¸€ä¸ªæ–¹æ³•å‚æ•°è¿›è¡Œæ³¨è§£</li><li>ElementType.TYPE å¯¹ä¸€ä¸ªç±»å‹è¿›è¡Œæ³¨è§£ï¼Œå¦‚ç±»ï¼Œæ¥å£ï¼Œæšä¸¾</li></ul><h4 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a>@Inherited</h4><p>æ ‡ç¤ºè¯¥æ³¨è§£æ ‡ç¤ºçš„ç±»çš„å­ç±»å¦‚æœæ²¡æœ‰æ³¨è§£çš„è¯ï¼Œå¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£ã€‚</p><h4 id="Repeatable"><a href="#Repeatable" class="headerlink" title="@Repeatable"></a>@Repeatable</h4><p>æ ‡ç¤ºè¯¥æ³¨è§£å¯ä»¥è¢«ä½¿ç”¨äºåŒä¸€ä½ç½®ï¼Œä¸€èˆ¬æ˜¯æ³¨è§£çš„å€¼å¯ä»¥æœ‰å¤šä¸ªã€‚å®ä¾‹å¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repeatable(Persons.class)</span></span><br><span class="line"><span class="meta">@interface</span> Person &#123;</span><br><span class="line"><span class="function">String <span class="title">role</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@interface</span> Persons &#123;</span><br><span class="line">Person[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å…¶ä¸­@Repeatableåçš„Personç›¸å½“äºä¸€ä¸ªå®¹å™¨æ³¨è§£ï¼Œ<em>å³ç”¨äºå­˜æ”¾å…¶ä»–æ³¨è§£çš„åœ°æ–¹</em>ï¼Œå…¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ³¨è§£ã€‚<br>å®¹å™¨æ³¨è§£éœ€è¦è®¾ç½®ä¸€ä¸ªvalueå­—æ®µä½œä¸ºæ³¨è§£å®¹å™¨ï¼Œå› æ­¤valueéœ€è¦æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”å…¶ä¸­çš„æ³¨è§£ç±»å‹éœ€è¦æ˜¯è¢«@Repeatableæ ‡ç¤ºçš„æ³¨è§£ã€‚</p><h2 id="æ³¨è§£çš„å±æ€§"><a href="#æ³¨è§£çš„å±æ€§" class="headerlink" title="æ³¨è§£çš„å±æ€§"></a>æ³¨è§£çš„å±æ€§</h2><p>æ³¨è§£ä¸å­˜åœ¨æˆå‘˜æ–¹æ³•ï¼Œåªæœ‰æˆå‘˜å±æ€§ï¼Œå¹¶å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå®šä¹‰æ–¹å¼å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> Person &#123;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">String <span class="title">msg</span><span class="params">()</span> <span class="keyword">default</span> &quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Person(value=1, msg=&quot;hi&quot;)</span></span><br></pre></td></tr></table></figure><br>å½“åªæœ‰ä¸€ä¸ªæˆå‘˜å±æ€§æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨æ‹¬å·ä¸­å¡«å†™å…¶å€¼æ— éœ€åœ¨å†™å‚æ•°åï¼›è‹¥æ²¡æœ‰æˆå‘˜å±æ€§</p><h1 id="Androidä¸­çš„æ³¨è§£"><a href="#Androidä¸­çš„æ³¨è§£" class="headerlink" title="Androidä¸­çš„æ³¨è§£"></a>Androidä¸­çš„æ³¨è§£</h1><p>aptå³AnnotationProcessingToolï¼Œæ³¨é‡Šå¤„ç†å·¥å…·</p><ul><li>android-aptå’ŒAnnotationProcessor<br>android-aptæ˜¯ä¸€ä½å¼€å‘è€…å¼€å‘çš„aptæ¡†æ¶ã€‚AndroidGradle2.2ä»¥åæä¾›äº†annotationProcessoræ›¿ä»£android-aptï¼Œä¸æ”¯æŒä½¿ç”¨android-aptã€‚ä½†æ˜¯ç›®å‰å¾ˆå¤šé¡¹ç›®è¿˜æ˜¯ä½¿ç”¨çš„android-aptã€‚</li></ul><ul><li>æ³¨è§£å¤„ç†å™¨æ˜¯Javaå±‚é¢çš„ä¸œè¥¿å¤šæ‰€ä»¥æ— æ³•çŸ¥é“kotlinå±‚çš„ä¸œè¥¿ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨Builder::class.java</li><li>å·¥å…·ç±»ä¸­çš„Loggerç±»ä¸­çš„noteåªèƒ½åœ¨debuggeræ—¶æ‰èƒ½ç”Ÿæ•ˆï¼ˆçœ‹çœ‹å®ç°ï¼‰</li><li>æ²¡æœ‰æ·»åŠ kotlinæ’ä»¶æ”¯æŒçš„æ¨¡å—ï¼Œå°†ä¸ä¼šå¤„ç†.ktæ–‡ä»¶ apply â€˜kotlinâ€™</li><li>build/tmp/kapt3/stubs/debug/*.java ä½¿ç”¨kaptåå°†kotlinä»£ç è§£é‡Šä¸ºjavaæ–‡ä»¶åå­˜æ”¾ä½ç½®</li><li>å¯ç”¨kotlinæ’ä»¶ â€˜kotlin-kaptâ€™ å é€šè¿‡kapt project() æŒ‡å®šaptæ¨¡å—æ¥æŒ‡å‘æˆ‘ä»¬ç¼–å†™çš„Annotation Process Tool</li><li><em>Element å…ƒç´  åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ</em>    <strong>å…¶å®å°±æ˜¯æ³¨è§£ä¿®é¥°çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯æˆå‘˜å­—æ®µï¼Œæˆå‘˜æ–¹æ³•ï¼Œç±»ç­‰</strong></li><li>å¯¹æ³¨è§£ä¿¡æ¯è¿›è¡Œè§£æã€‚é€šè¿‡å¯¹Elementè¿›è¡Œè§£æã€‚TypeElementæ˜¯Elementçš„ä¸€ä¸ªå®ç°</li><li>Element.getNameè·å–åˆ°çš„Nameå¯¹è±¡ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªCharSequenceå­—ç¬¦åºåˆ—</li><li>Element.getPackage()è·å–åˆ°åŒ…åã€‚å¦‚æœæ˜¯ä¸€ä¸ªåŒ…ï¼Œå°±æŠ›å‡ºé”™è¯¯</li><li><p>å¯¹å¯¹æˆå‘˜å­—æ®µè¿›è¡Œä¿å­˜æ’åºï¼Œ<strong>ä½¿ç”¨TreeSet</strong>ï¼Œä½¿å¾—æˆå‘˜å­—æ®µå‘ç”Ÿå¢åˆ å˜åŒ–åï¼Œå…¶ç›¸å¯¹é¡ºåºä»ä¿æŒä¸å˜ï¼Œä¾¿äºå¼€å‘</p></li><li><p>è‡ªå®šä¹‰Fieldå­—æ®µç±»</p><ul><li>è®¾ç½®valueå¹¶private setï¼Œå› ä¸ºå…¶å€¼ç”±æ³¨è§£ä¼ å…¥</li><li><em>prefixå­—é¦– å­—æ®µçš„å«ä¹‰</em>    </li><li><em>TypeMirror?        TypeMirroræ˜¯Javaç¼–è¯‘æ—¶å¯¹javaç±»å‹çš„ä¸€ä¸ªè¡¨ç¤ºï¼Œæ˜¯æ‰€æœ‰Typeç±»çš„åŸºç±»</em></li><li>kotlin â€œâ€â€ â€œâ€â€    å°†ä¼šæŠŠå…¶ä¸­çš„å­—ç¬¦ä¸²åŸæ ·è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦ç»è¿‡è½¬ä¹‰</li><li>defaultValue = â€œâ€â€â€${optional.stringValue}â€â€â€â€ æ˜¯æˆ‘çœ¼æ‹™äº†ï¼Œä¸€å…±è¦å››ä¸ªä¹Ÿå°±æ˜¯æœ€åæŠŠä¸€ä¸ªå« â€œstringâ€</li><li><p>å¯¹è·å–çš„æ–¹æ³•è¿›è¡Œè§£æï¼Œ    </p></li><li><p>ActivityClass æ˜¯è§£æå‡ºæ¥çš„ç±»çš„æ¨¡æ¿ï¼ŒæŒæœ‰è§£æå‡ºæ¥çš„ç±»çš„ä¿¡æ¯ï¼ˆä»£ç ï¼‰</p></li></ul></li><li><p>å¾—åˆ°æ˜¯å¦æŠ½è±¡çš„æ ‡ç¤ºï¼Œæ²¡æœ‰ç›¸å…³å†…éƒ¨å­—æ®µæ”¯æŒæ‰€ä»¥å¯ä»¥ä½¿ç”¨æä¾›çš„apiè·å–æ‰€æœ‰ä¿®é¥°ç¬¦åˆ—è¡¨ï¼Œåˆ¤æ–­å…¶ä¸­æ˜¯å¦åŒ…å«abstract</p></li><li><p>å¾—åˆ°æ˜¯å¦kotlinä»£ç çš„æ ‡ç¤ºã€‚ç”±äºkaptä¼šå¯¹kotlinä»£ç è¿›è¡Œè§£é‡Šï¼Œå‡ºæ¥ä¸€ä»½å¸¦kotlinæ³¨è§£çš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥ä¾æ¬¡è¿›è¡Œåˆ¤æ–­ï¼Œä½†æ˜¯è¯¥æ³¨è§£æ˜¯ä¸ªæ¥å£ï¼Œåªèƒ½é€šè¿‡åå°„è·å–</p></li><li><p>BuildProcessor</p><ul><li>å¯¹Builderä¿®é¥°çš„å…ƒç´ è¿›è¡Œéå†ï¼Œé¦–å…ˆè¿‡æ»¤ç­›æŸ¥å‡ºclassçš„å…ƒç´ </li><li>åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦ä¸€ä¸ªactivityï¼Œæ˜¯çš„è¯å°†è¯¥elementæ”¾åˆ°ä¸€ä¸ªmapä¸­ï¼Œå°†elementä¸å…¶activityClasså…³è”èµ·æ¥</li><li>å¯¹Optionalä¿®é¥°çš„å¯¹è±¡è¿›è¡Œéå†ï¼Œè¿˜å…ˆç­›å‡ºField</li><li>é€šè¿‡enclosingElementå¾—åˆ°è¯¥feildçš„å¤–éƒ¨ç±»ï¼Œé€šè¿‡å®ƒåœ¨mapä¸­æ‰¾åˆ°activityClassï¼Œå‘å…¶ä¸­çš„fieldï¼ˆTreeSetï¼‰è¿›è¡Œèµ‹å€¼</li><li>åŒä¸Šæ“ä½œå¯¹Requiredæ³¨è§£çš„å…ƒç´ è¿›è¡ŒactivityClassçš„å¡«å……</li><li>æœ€åå°†æ–‡ä»¶è¾“å‡º</li></ul></li></ul><p><em>typeå’Œkindå¥½åƒéƒ½æœ‰ç±»å‹çš„æ„æ€ï¼Œå…·ä½“åˆ†åˆ«ä»£è¡¨ç€ä»€ä¹ˆ</em></p><ul><li>å†™å…¥åˆ°æ–‡ä»¶ï¼ˆå°†ä»æ³¨è§£ä¸­è·å¾—çš„ä¿¡æ¯ç”ŸæˆçœŸæ­£çš„.javaæ–‡ä»¶ï¼‰<ul><li>ä½¿ç”¨ActivityClasssä¸ºä¿¡æ¯æ¥æºï¼Œç”Ÿæˆçš„javaæ–‡ä»¶ä¸ºActivityBuilder.javaï¼Œ</li><li>å…ˆç”Ÿæˆç±»ä¿¡æ¯ï¼Œä¸å¯¹æŠ½è±¡ç±»è¿›è¡Œå¤„ç†ï¼Œç±»åï¼Œæ·»åŠ ä¿®é¥°ç¬¦ï¼ŒåŸºæœ¬æ˜¯publicï¼Œfinalã€‚æœ€åå¾—åˆ°ä¸€ä¸ªTypeSpecï¼Œæºå¸¦ç€ç±»çš„ä¿¡æ¯</li><li>ç¼–å†™ä¸€ä¸ªConstantBuilderä¸“é—¨ç”Ÿæˆå¸¸é‡</li><li>å¯¹ç”Ÿæˆçš„å¸¸é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œjavapoetä¸­ä½¿ç”¨â€\$Sâ€ï¼ŒSè¡¨ç¤ºå­—ç¬¦ä¸²</li><li>ä½¿ç”¨JavaFileç”Ÿæˆæ–‡ä»¶</li></ul></li><li>åœ¨Processä¸­å¯¹æ–‡ä»¶è¿›è¡Œç”Ÿæˆï¼Œä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„filer</li><li><p>è‡³æ­¤å¯ä»¥ç”Ÿæˆä»£ç Builderç±»ï¼Œå…¶ä¸­å¸¦æœ‰å¸¸é‡å­—æ®µã€‚å› æ­¤ç»ˆäºå¾—ä»¥ä¸€çª¥è¯¥æ³¨è§£å¤„ç†å™¨çš„ä¸»è¦ç›®çš„ï¼šé¦–å…ˆé€šè¿‡å¯¹ä¸€ä¸ªactivityä¸­çš„å­—æ®µæ³¨è§£è¿›è¡Œè§£æï¼Œå¾—åˆ°å­—æ®µåå¯¹åº”çš„é™æ€å¸¸é‡å­—æ®µï¼Œé€šè¿‡è¿™äº›å­—æ®µä½œä¸ºtagï¼Œè¿›è¡Œactivityé—´çš„intenté€šä¿¡çš„åª’ä»‹ã€‚ä¸ºä»€ä¹ˆä¸“é—¨ç”Ÿæˆå¸¸é‡æ¥ä½œä¸ºtagï¼Œå› ä¸ºåè¾¹è¦é€šè¿‡æ³¨è§£å¤„ç†å™¨ï¼Œæ¥ç®¡è¿™ä¸€é€šä¿¡è¿‡ç¨‹ï¼Œå³èˆå»å¤§é‡ç¹ççš„putExtra()è¿‡ç¨‹ã€‚å› æ­¤tagçš„éƒ¨åˆ†å½“ç„¶éœ€è¦å®Œå…¨çš„åŒ…è£…èµ·æ¥ã€‚</p></li><li><p>é€šè¿‡ä¸€ä¸ªstart()æ–¹æ³•å¯åŠ¨intentçš„åŒ…è£…å’Œactivityçš„å¯åŠ¨ã€‚åˆ›å»ºä¸€ä¸ªStartMethodç±»å­˜æ”¾æŒæœ‰æ‰€æœ‰çš„å…·ä½“startæ–¹æ³•ï¼ŒContantBuilderæ¥æ§åˆ¶ç”Ÿæˆstartå‡½æ•°</p></li><li>StartMethod è®¾ç½®ä¸€ä¸ªlistå­˜æ”¾æ‰€æœ‰çš„fieldã€‚ç”±äºOptionalçš„å­—æ®µå¤šäº3ä¸ªæ—¶å°†ä½¿ç”¨å®ä¾‹æ–¹æ³•åˆ›å»ºstart()ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€ä¸ªstaticçš„æ ‡å¿—ä½ã€‚</li><li>Fieldåˆ—è¡¨çš„å¡«å……ï¼Œä»å¤–éƒ¨ä¼ å…¥ã€‚æ­¤å¤„ä½¿ç”¨äº†è¿ç®—ç¬¦çš„é‡è½½ã€‚å®šä¹‰å¯¹Fieldçš„æ“ä½œæ–¹æ³•ï¼Œå¯¹è¯¥å¯¹è±¡è¿›è¡Œå¤åˆ¶çš„æ–¹æ³•ï¼šä½¿ç”¨åŒæ ·çš„Fieldï¼Œä¸åŒçš„name</li><li>ç¼–å†™build()æ–¹æ³•ã€‚ä½¿ç”¨nameåˆ›å»ºæ–¹æ³•ï¼Œæ·»åŠ ä¿®é¥°ï¼Œè¿”å›å€¼ï¼Œå‚æ•°ã€‚å‚æ•°éœ€è¦ä¸€ä¸ªTypeNameï¼Œå‘ClassTypeä¼ å…¥åŒ…åè·¯å¾„è·å–ï¼Œè¯¥ç±»æ˜¯ä½œè€…ç¼–å†™çš„å·¥å…·ç±»ã€‚</li><li>æ–¹æ³•å†…è¯­å¥çš„ç¼–å†™ï¼Œéœ€è¦addStatement()æ·»åŠ å£°æ˜ã€‚ä½¿ç”¨$Tï¼Œä¸$Sä¸åŒçš„æ˜¯ï¼Œ$Tå¯ä»¥ä¸ºæˆ‘ä»¬å¯¼åŒ…</li><li>é€šè¿‡éå†fieldåˆ—è¡¨ï¼Œè¿›ä¸€æ­¥å¢åŠ æ–¹æ³•å‚æ•°ï¼Œå°†éœ€è¦çš„å­—æ®µä½œä¸ºå‚æ•°æ·»åŠ åˆ°æ–¹æ³•ä¸­ï¼Œå¹¶é€æ¡è¿›è¡ŒputExtra()ã€‚å‰è¾¹æœªå¯¹fieldç±»å‹åç§°è¿›è¡Œè·å–ï¼Œè¿™é‡Œè¡¥å……ä¸€ä¸‹ï¼šasJavaTypeName()    <strong>è¿™é‡Œå¯¹nameå’ŒasJavaTypeæœ‰ç‚¹ä¸æ˜ç™½</strong></li><li>$L ç›´æ¥æŠŠå€¼æ›¿æ¢ï¼Œ$Sæ˜¯æŠŠå€¼åŠ ä¸Šå¼•å·ä½œä¸ºå­—ç¬¦ä¸²çš„è‡ªå˜é‡æ›¿æ¢</li><li>å¯¹é™æ€æ–¹æ³•è¿›è¡ŒåŒºåˆ†ã€‚æ˜¯é™æ€æ–¹æ³•ï¼ŒåŠ ä¸Šstaticï¼›ä¸æ˜¯é™æ€ï¼Œåˆ™åŠ ä¸ŠfillIntent(intent)  <strong>????</strong></li><li>æœ€åç¼–å†™å¯åŠ¨activityçš„ä»£ç ï¼Œéœ€è¦ä½¿ç”¨Activityçš„å®ä¾‹å»è°ƒç”¨startActivity()ã€‚äºæ˜¯åœ¨runtimeæ¨¡å—å®šä¹‰ActivityBuilderç±»ã€‚æ­¤å¤„ä¸å®šä¹‰kotlinç±»ï¼Œç›®çš„åœ¨äºä½¿ç”¨æ—¶å¯ä»¥åœ¨appä¸­ç›´æ¥ä¾èµ–è€Œä¸éœ€è¦kotlinåº“ã€‚</li><li>ActivityBuilderä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼ŒåŒ…è£…startActivity()æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯å½“ä¸æ˜¯Activityçš„contextå¯åŠ¨çš„æ—¶å€™ï¼Œä½¿ç”¨å•ä¾‹å¯åŠ¨ã€‚æ‰€ä»¥è¿™é‡Œåº”è¯¥å¯ä»¥ç›´æ¥ä½¿ç”¨startActivity()ã€‚è¿™ä¸€éƒ¨åˆ†å’ŒAPTå¤§æ¦‚å…³ç³»ä¸å¤§ï¼Œä»å…¶ç›´æ¥è¢«appä¾èµ–ä¹Ÿå¯ä»¥çœ‹å‡º</li><li>å¼€å§‹ç¼–å†™StartMethodBuilderï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨äºæ§åˆ¶startæ–¹æ³•çš„ç”Ÿæˆï¼Œå› ä¸ºéœ€è¦æ ¹æ®Optionalæ³¨è§£çš„ä¸ªæ•°è¿›è¡Œè°ƒåº¦ã€‚</li><li>ç¼–å†™build()ï¼Œé¦–å…ˆå®ä¾‹åŒ–ä¸€ä¸ªStartMethodï¼Œä½¿ç”¨ActivityClassBuilderä¸­å®šä¹‰çš„å¸¸é‡ä½œä¸ºæ–¹æ³•åã€‚</li><li>ä½¿ç”¨groupBy()æ ¹æ®æ˜¯å¦OptionalFieldè¿›è¡Œåˆ†ç±»ã€‚ä½¿ç”¨groupBy()ååœ¨åˆ†ä¸ºä¸¤ä¸ªlist</li><li>å…ˆå°†Requiredæ³¨è§£çš„å­—æ®µæ·»åŠ åˆ°startMethod()ä¸­ï¼Œ<strong>è¡¨ç¤ºRequiredæ ‡ç¤ºçš„çš„ä»£ç éƒ½éœ€è¦è¿›è¡Œå¤„ç†</strong>ï¼Œå³NoOptionalä¸å¯é€‰çš„</li><li>è¿™é‡Œå‘ç°äº†ä¹‹å‰å†™çš„ä¸€ä¸ªbugï¼Œæ²¡æ³¨æ„çš„åœ°æ–¹ã€‚å°±æ˜¯æ ¹æ®OptionalFeildåˆ†ç±»æ—¶ï¼Œå§‹ç»ˆæ— æ³•è¯†åˆ«å‡ºOptionalFeildã€‚ç»è¿‡æ€è€ƒï¼Œæ„Ÿè§‰æ˜¯å¯¹fieldè¿›è¡Œå†™å…¥æ—¶çš„é—®é¢˜ï¼Œæœç„¶ï¼Œåœ¨BuilderProcessorä¸­å¯¹Fieldå†™å…¥æ—¶ï¼Œåˆ¤æ–­ä¸ºOptionalæ—¶ï¼Œå°±ç›´æ¥å†™å…¥OptaionalFieldï¼Œè€Œæˆ‘å†™çš„Fieldã€‚</li><li>è¿™é‡Œåˆæ˜ç™½ä¸€ç‚¹ä½œè€…çš„æ„å›¾ï¼Œå°±æ˜¯ç”Ÿæˆå¤šä¸ªstart()æ–¹æ³•ï¼Œè®©ä½¿ç”¨è€…é€šè¿‡@Optionalè¿›è¡Œæ ‡ç¤ºä»¥åï¼Œå¯ä»¥é€šè¿‡é€‰æ‹©ä¸åŒçš„startå»å†³å®šæ˜¯å¦ç»™Optionalå£°æ˜èµ‹å€¼ã€‚å½“Optionalå¯é€‰çš„ä¸ªæ•°ä¸å¤§äº3æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥ç›®æ ‡å­—æ®µçš„æ–¹å¼åˆå§‹åŒ–æŒ‡å®šå­—æ®µï¼›å¤§äº3æ—¶ï¼Œé€šè¿‡ä¼ å…¥Intentçš„æ–¹å¼ï¼Œè‡ªæ„é€ Intentä¼ å…¥ï¼Œä¹Ÿå°±æ˜¯ä¸€èˆ¬çš„åšæ³•ã€‚</li><li>è¿™ä¸ªåœ°æ–¹ç†è§£æœ‰ç‚¹é—®é¢˜ï¼Œæœ€ç»ˆæ•ˆæœåº”è¯¥æ˜¯ï¼Œå¤§äº3æ—¶ï¼Œç”ŸæˆfillIntent()æ–¹æ³•ï¼Œé€šè¿‡å¯¹å­—æ®µçš„èµ‹å€¼ï¼Œä½¿ç”¨fillIntent()å¯¹å­—æ®µè¿›è¡Œå¡«å……ã€‚å…¶å®å¤§ä½“æ„ä¹‰ç›¸ä¼¼ï¼Œå°±æ˜¯å®ç°æœ‰ç‚¹åŒºåˆ«ã€‚è¿™é‡Œéœ€è¦å¯¹æ˜¯å¦åŸºæœ¬ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå› ä¸ºä¸æ˜¯åŸºæœ¬ç±»å‹æ‰èƒ½ä½¿ç”¨==Nullï¼ŒåŸºæœ¬ç±»å‹çš„è¯å°±ä¸è¦åˆ¤ç©ºäº†<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ActivityBuilder <span class="title">title</span><span class="params">(String title)</span></span>&#123;</span><br><span class="line"><span class="keyword">this</span>.title = title;</span><br><span class="line">rerurn <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fillIntent</span><span class="params">(Intent intent)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(title == <span class="keyword">null</span>)</span><br><span class="line">intent.putExtra(<span class="string">&quot;title&quot;</span>, title);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><em>å…³äºTypeNameä¸å¤§ç†è§£</em><br>ä¸€ä¸ªåŒ…è£…äº†ç±»å‹åStringçš„ç±»ã€‚ClassNameï¼ŒTypeNameçš„å­ç±»ã€‚å†™å…¥æ–¹æ³•æ—¶ï¼Œéœ€è¦ç”¨.returns()æŒ‡æ˜è¿”å›å€¼ï¼Œéœ€è¦ä¼ å…¥TypeNameå¯¹è±¡ã€‚ä¼ å…¥åŒ…å+ç±»åæ„é€ ClassNameä¼ å…¥ã€‚</li></ul><h2 id="MY"><a href="#MY" class="headerlink" title="MY"></a>MY</h2><ul><li>å› ä¸ºStringä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬é¢†å‡ºæ¥è¯†åˆ«ã€‚</li><li>å¤§å†™è½¬ä¸‹åˆ’çº¿å‡½æ•°ç¼–å†™ã€‚ä½¿ç”¨äº†fold()æ–¹æ³•è¾…åŠ©ï¼Œè‡ªåŠ¨ä¸ºæˆ‘ä»¬éå†é›†åˆï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥ä¸€ä¸ªæ–¹æ³•å®šä¹‰å¯¹æ¯ä¸€ä¸ªå…ƒç´ çš„æ“ä½œ</li></ul><h2 id="ä¼ è¯´ä¸­çš„kotlinç‰¹æ€§ï¼Ÿ"><a href="#ä¼ è¯´ä¸­çš„kotlinç‰¹æ€§ï¼Ÿ" class="headerlink" title="ä¼ è¯´ä¸­çš„kotlinç‰¹æ€§ï¼Ÿ"></a>ä¼ è¯´ä¸­çš„kotlinç‰¹æ€§ï¼Ÿ</h2><ul><li>AptUtilsä¸­çš„TypeUtilsé‡Œé€šè¿‡ fun Element.simpleName():String = simpleName.toString()ï¼Œä½¿å¾—å¯ä»¥åœ¨å¼€å‘ä¸­ç›´æ¥ç”¨Elementè°ƒç”¨simpleName()æ–¹æ³•</li><li>ç»§æ‰¿Comparabledæ¥å£ï¼Œå®ç°compareTo()æ–¹æ³•ï¼Œä½¿å¯¹è±¡å¯æ’åºï¼ˆæ¯”è¾ƒï¼‰</li><li>private set ä¸è‡ªåŠ¨ç”Ÿæˆsetteræ–¹æ³• </li><li>?: å·¦å€¼ä¸ºç©ºåˆ™è°ƒç”¨å³ä¾§ä»£ç </li><li>kotlin â€œâ€â€ â€œâ€â€    å°†ä¼šæŠŠå…¶ä¸­çš„å­—ç¬¦ä¸²åŸæ ·è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦ç»è¿‡è½¬ä¹‰</li><li>è¿ç®—ç¬¦é‡è½½ï¼Œä½¿ç”¨ç‰¹å®šæ–¹æ³•åç¼–å†™æ‰©å±•æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨operatorä¿®é¥°</li><li>groupBy() æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‡½æ•°è¿”å›çš„å€¼ä½œä¸ºé”®å€¼åˆ†ç±»ï¼Œè¿”å›ä¸€ä¸ªmapï¼Œé”®æ˜¯å‡½æ•°è¿”å›çš„å€¼ï¼Œå¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªå­˜æ”¾ç›¸åŒç»“æœçš„listï¼Œå³Map&lt;T, List<R>&gt;</li></ul><h2 id="Kotlinå­¦ä¹ "><a href="#Kotlinå­¦ä¹ " class="headerlink" title="Kotlinå­¦ä¹ "></a>Kotlinå­¦ä¹ </h2><h3 id="æ–¹æ³•å‚æ•°"><a href="#æ–¹æ³•å‚æ•°" class="headerlink" title="æ–¹æ³•å‚æ•°"></a>æ–¹æ³•å‚æ•°</h3><p>kotlinçš„æ–¹æ³•å‚æ•°ï¼Œå¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œå½“ä¼ å‚æ—¶çœç•¥å‚æ•°æ—¶ä¼šä½¿ç”¨è¯¥é»˜è®¤å€¼ã€‚<br>è°ƒç”¨å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‘½åå‚æ•°çš„æ–¹å¼ä¼ å…¥ï¼Œå¢å¼ºå¯è¯»æ€§ï¼šfun(arg1 = 2, arg2 = 3)<br>å½“è¿”å›ç±»å‹å¯ä»¥ç”±ç¼–è¯‘å™¨æ¨æ–­ï¼Œåˆ™å¯ä»¥ä¸éœ€è¦æ˜¾å¼å£°æ˜è¿”å›å€¼ã€‚æœ‰ä»£ç å—çš„æ–¹æ³•å¿…é¡»æ˜¾å¼å£°æ˜ï¼Œé™¤éè¿”å›Unit</p><h3 id="å¯å˜é•¿å‚æ•°"><a href="#å¯å˜é•¿å‚æ•°" class="headerlink" title="å¯å˜é•¿å‚æ•°"></a>å¯å˜é•¿å‚æ•°</h3><p>ä½¿ç”¨varargä¿®é¥°ï¼Œä½¿ç”¨æ•°ç»„å½¢å¼è°ƒç”¨ã€‚ä¸€èˆ¬ç½®äºå‚æ•°åˆ—è¡¨æœ€åä¸€ä¸ªï¼Œæˆ–è€…å…¶åçš„å‚æ•°ä½¿ç”¨å‘½åå‚æ•°ä¼ é€’ï¼Œæˆ–è€…å…¶åæ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼ˆlambdaï¼‰<br>ç›´æ¥ä½¿ç”¨æ•°æ®ä¼ é€’ï¼Œä½¿ç”¨ä¼¸å±•æ“ä½œç¬¦ï¼Œå³*æ•°ç»„å</p><h3 id="ä¸­ç¼€è¡¨ç¤ºæ³•"><a href="#ä¸­ç¼€è¡¨ç¤ºæ³•" class="headerlink" title="ä¸­ç¼€è¡¨ç¤ºæ³•"></a>ä¸­ç¼€è¡¨ç¤ºæ³•</h3><p>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä½¿ç”¨object fun argçš„å½¢å¼ã€‚è¯¥æ–¹æ³•å¿…é¡»åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸èƒ½æœ‰é»˜è®¤å€¼ï¼Œä¸æ˜¯å¯å˜é•¿æ•°ç»„ã€‚ä¸”å¿…é¡»æŒ‡æ˜è°ƒç”¨è€…ï¼Œå³thisä¸å†å¯ä»¥çœç•¥ã€‚</p><h3 id="é¡¶å±‚å‡½æ•°"><a href="#é¡¶å±‚å‡½æ•°" class="headerlink" title="é¡¶å±‚å‡½æ•°"></a>é¡¶å±‚å‡½æ•°</h3><p>åœ¨æ–‡ä»¶é¡¶å±‚å£°æ˜ï¼Œå³ä¸éœ€è¦å†ä½¿ç”¨ä¸€ä¸ªç±»å®ä¾‹è°ƒç”¨</p><h3 id="å±€éƒ¨å‡½æ•°"><a href="#å±€éƒ¨å‡½æ•°" class="headerlink" title="å±€éƒ¨å‡½æ•°"></a>å±€éƒ¨å‡½æ•°</h3><p>åœ¨å‡½æ•°çš„å†…éƒ¨å®šä¹‰çš„å‡½æ•°ã€‚å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼ˆé—­åŒ…ï¼‰ã€‚</p><h3 id="æ‰©å±•å‡½æ•°"><a href="#æ‰©å±•å‡½æ•°" class="headerlink" title="æ‰©å±•å‡½æ•°"></a>æ‰©å±•å‡½æ•°</h3><p>ä¸ºä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨è¯¥åº“çš„å¯¹è±¡è°ƒç”¨ã€‚é™æ€è§£æã€‚</p><h3 id="å°¾é€’å½’ä¼˜åŒ–"><a href="#å°¾é€’å½’ä¼˜åŒ–" class="headerlink" title="å°¾é€’å½’ä¼˜åŒ–"></a>å°¾é€’å½’ä¼˜åŒ–</h3><p>å¯¹äºä½¿ç”¨å°¾é€’å½’çš„å‡½æ•°ï¼Œkotlinä¸­ä½¿ç”¨tailrecä¿®é¥°ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶ä¼˜åŒ–ä¸ºå¾ªç¯å½¢å¼å®ç°çš„æ–¹å¼ã€‚</p><h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h3><p>å°†å‡½æ•°å½“åšå‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°ï¼Œå³é«˜é˜¶å‡½æ•°çš„å‚æ•°æˆ–è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p><h3 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h3><p>(A, B) -&gt; Cï¼Œè¡¨ç¤ºäº†å‡½æ•°ç­¾åå³å‚æ•°ä¸è¿”å›å€¼ã€‚Unitè¿”å›ç±»å‹ä¸å¯çœç•¥ã€‚</p><ul><li>(Int)-&gt;((Int)-&gt; Unit) == (Int) -&gt; (Int)-&gt; Unitï¼Œå› ä¸ºå‡½æ•°ç±»å‹æ”¯æŒå³ç»“åˆ</li></ul><h3 id="Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°"><a href="#Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°" class="headerlink" title="Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°"></a>Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°</h3><p>å‡½æ•°å­—é¢å€¼ã€‚å¦‚æœå‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°ï¼Œåˆ™å¯ä»¥å°†lambdaæ”¾åœ¨å‚æ•°åˆ—è¡¨ä»¥å¤–ã€‚lambdaä¸­å•ä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨itè¡¨ç¤º</p><h3 id="æ³›å‹-å£°æ˜å¤„å‹å˜-ç±»å‹æŠ•å½±"><a href="#æ³›å‹-å£°æ˜å¤„å‹å˜-ç±»å‹æŠ•å½±" class="headerlink" title="æ³›å‹ å£°æ˜å¤„å‹å˜ ç±»å‹æŠ•å½±"></a>æ³›å‹ å£°æ˜å¤„å‹å˜ ç±»å‹æŠ•å½±</h3><p>è¿™ä¸€éƒ¨åˆ†å®˜æ–¹æ–‡æ¡£è®²çš„æå…¶å¤æ‚ã€‚å½“ç„¶æ²¡èƒ½çœ‹æ‡‚ã€‚çœ‹åˆ°æœ€åå…¶å®å°±æ˜¯outå’Œinã€‚<strong>è·³è¿‡äº†</strong></p><h3 id="æ³›å‹æ–¹æ³•"><a href="#æ³›å‹æ–¹æ³•" class="headerlink" title="æ³›å‹æ–¹æ³•"></a>æ³›å‹æ–¹æ³•</h3><p>å…¶å®javaä¸­ä¹Ÿæœ‰åŒæ ·çš„ä½¿ç”¨æ–¹æ³•åªæ˜¯ä¸€ç›´æ²¡æœ‰æ³¨æ„ã€‚ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ç±»çš„æ³›å‹åœ¨æ–¹æ³•ä¸­è°ƒç”¨ï¼Œä½†å…¶å®å¯ä»¥ç›´æ¥å®šä¹‰æ³›å‹æ–¹æ³•ï¼Œ<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">singleFun</span><span class="params">(arg: <span class="type">T</span>)</span></span>: T &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰©å±•å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> T.<span class="title">sampleFun</span><span class="params">(arg: <span class="type">T</span>)</span></span>: T &#123;&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ“ä½œç¬¦alsoä½¿ç”¨å®ä¾‹"><a href="#æ“ä½œç¬¦alsoä½¿ç”¨å®ä¾‹" class="headerlink" title="æ“ä½œç¬¦alsoä½¿ç”¨å®ä¾‹"></a>æ“ä½œç¬¦alsoä½¿ç”¨å®ä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val method = startMethod.copy(field.name)</span><br><span class="line">method.addField(field)</span><br><span class="line">method.build(typeBuilder)</span><br><span class="line"></span><br><span class="line">startMethod.copy(field.name).also &#123;  it.addFeild(feild) &#125;.build(typeBuilder)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç å®ç°åŒæ ·çš„æ•ˆæœï¼Œç¬¬äºŒç§åªæœ‰ä¸€è¡Œä¸”ä¸éœ€è¦åˆ›å»ºå¼•ç”¨<br>ç”±äºmedthodéœ€è¦addFeild()å¤„ç†ï¼Œä½†æ˜¯è¯¥æ–¹æ³•è¿”å›å€¼ä¸ºç©ºï¼ˆæˆ–è¿”å›å¯¹è±¡ï¼‰ä½¿å¾—å¿…é¡»ä½¿ç”¨è¿™ç§ä¸‰æ®µå¼æ–¹å¼å®ç°ã€‚alsoæ“ä½œç¬¦çš„æ„ä¹‰åœ¨äºæ­¤ï¼Œitä¸ºå¯¹è±¡æœ¬èº«ä¸”è¿”å›æœ€åè¿”å›å€¼ä¸ºè¯¥å¯¹è±¡ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startMethod.copy(field.name).staticMethod(<span class="keyword">false</span>).build(typeBuilder)</span><br></pre></td></tr></table></figure><br>è€Œåœ¨ä»¥ä¸Šä»£ç ä¸­åˆ™ä¸éœ€è¦ä½¿ç”¨alsoï¼Œå› ä¸ºstaticMethod()æ–¹æ³•è¿”å›å¯¹è±¡æœ¬èº«ï¼Œä¸€ç›´å¯ä»¥ç›´æ¥ä½¿ç”¨è¿”å›å€¼.build()</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è¿™æ®µæ—¶é—´é€šè¿‡å¯¹æ³¨è§£ç®¡ç†å™¨çš„å­¦ä¹ ï¼Œè·Ÿç€ç½‘è¯¾ç®€å•å®ç°äº†ç‰è§‚éŸ³æ³¨è§£å¤„ç†ï¼Œå¯¹æ³¨è§£æœ‰æ›´å¤šç†è§£ã€‚&lt;br&gt;åŒæ—¶ç”±äºè¯¥ç½‘è¯¾æ˜¯åŸºäºkotlinè®²è§£ï¼Œäºæ˜¯ä¹Ÿgetäº†å¾ˆå¤škotlinçš„åŸºæœ¬æ“ä½œä¹‹å¤–çš„ç‚«é…·æ“ä½œ&lt;br&gt;å› æ­¤è¿™ç¯‡æ–‡ç« ï¼Œé‡åœ¨è‡ªèº«çš„è®°å½•ç†è§£&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>Viewäº‹ä»¶åˆ†å‘æœºåˆ¶ç†è§£</title>
    <link href="http://codeminions.github.io/2019/10/24/View%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6%E7%90%86%E8%A7%A3/"/>
    <id>http://codeminions.github.io/2019/10/24/View%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6%E7%90%86%E8%A7%A3/</id>
    <published>2019-10-23T16:00:00.000Z</published>
    <updated>2019-10-27T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>æœ€è¿‘é‡æ–°å­¦ä¹ äº†ä¸€éViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ã€‚å…¶å®ä¹‹å‰å·²ç»æŠŠè¿™ä¸€å—å·®ä¸å¤šçœ‹è¿‡ï¼Œä¸å¥½ç†è§£ï¼Œå‡ éä¸‹æ¥ï¼Œå¥½åƒéƒ½äº†è§£äº†ï¼Œä½†æ€»è§‰å¾—å·®ç‚¹æ„æ€ã€‚<br>å‘ç°å…¶å®ä¹‹å‰çœ‹ã€Šè‰ºæœ¯æ¢ç´¢ã€‹ååˆ†ç—›è‹¦ï¼Œä¸»è¦æ˜¯çœ‹å¾—ä¸å¤Ÿä»”ç»†ï¼Œä»¥åŠä¹¦ä¸­æ¦‚å¿µå’ŒçŸ¥è¯†ç‚¹è¾ƒå¤šï¼Œæ²¡æœ‰ä¸€ä¸ªå¤§é¢˜çš„è®¤è¯†ï¼Œå¾ˆå®¹æ˜“è¢«ç»•è¿›å»ã€‚ç°åœ¨æ°´å¹³æœ‰äº›é•¿è¿›äº†ï¼Œæ‰¾äº†å‡ æœ¬ä¹¦å’Œåšå®¢ï¼Œç»ˆäºæœ‰äº†æ›´åŠ æ·±åˆ»çš„ç†è§£ã€‚<br><a id="more"></a></p><h1 id="äº‹ä»¶åˆ†å‘çš„åŸºæœ¬æµç¨‹"><a href="#äº‹ä»¶åˆ†å‘çš„åŸºæœ¬æµç¨‹" class="headerlink" title="äº‹ä»¶åˆ†å‘çš„åŸºæœ¬æµç¨‹"></a>äº‹ä»¶åˆ†å‘çš„åŸºæœ¬æµç¨‹</h1><p>é¦–å…ˆè¦çŸ¥é“Viewçš„è§¦æ‘¸äº‹ä»¶ï¼Œä¸»è¦æœ‰ACTION_UPï¼ŒACTION_MOVEï¼ŒACTION_DOWNã€‚ä»¥ä¸€ä¸ªACTION_DOWNäº‹ä»¶å¼€å§‹åˆ°ä¸€ä¸ªACTION_UPäº‹ä»¶çš„ä¸€ç³»åˆ—äº‹ä»¶ä½œä¸ºä¸€ä¸ªäº‹ä»¶åºåˆ—ã€‚</p><p>Viewçš„äº‹ä»¶åˆ†å‘ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªæµç¨‹ï¼ŒdispatchTouchEventï¼ˆåˆ†å‘ï¼‰ï¼ŒonInterceptTouchEventï¼ˆæ‹¦æˆªï¼‰ï¼ŒonTouchEventï¼ˆæ¶ˆè´¹å¤„ç†ï¼‰ã€‚<br>Activityï¼ŒViewï¼ŒViewGroupå¤„ç†äº‹ä»¶çš„èƒ½åŠ›ä¸å…¨ç›¸åŒã€‚<br>å…¶ä¸­<strong>Activityå’ŒViewåªæœ‰dispatchTouchEvent()å’ŒonTouchEvent()</strong>æ–¹æ³•ï¼Œ<strong>ViewGroupåªæœ‰dispatchTouchEventï¼ŒonInterceptTouchEvent</strong>æ–¹æ³•ã€‚</p><p>å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶äº§ç”Ÿåï¼Œäº‹ä»¶ä¼ é€’é¡ºåºæ˜¯ï¼š<strong>Activity -&gt; Window -&gt; View</strong>ã€‚<br>ä¸€ä¸ªActivityæ”¶åˆ°ä¸€ä¸ªäº‹ä»¶åï¼Œè§¦å‘dispatchTouchEvent()ã€‚è¯¥æ–¹æ³•ä¼ªä»£ç å¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">fun <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(getWindows.superDispatchTouchEvent(ev))</span><br><span class="line">reuturn <span class="keyword">true</span></span><br><span class="line"><span class="keyword">return</span> onTouchEvent(ev)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>é¦–å…ˆå°†äº‹ä»¶äº¤ç”±Windowè¿›è¡Œåˆ†å‘ã€‚</p><ul><li>å¦‚æœè¿”å›trueï¼Œåˆ™äº‹ä»¶å¾ªç¯ç»“æŸï¼Œå› ä¸ºè¯´æ˜ç‚¹å‡»äº‹ä»¶å·²è¢«å¤„ç†ã€‚</li><li>å¦‚æœè¿”å›falseï¼Œåˆ™è§¦å‘Activityçš„onTouchEvent()</li></ul><p>å½“ä¸€ä¸ªViewGroupæ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶ï¼Œåˆ™è§¦å‘dispatchTouchEvent()ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">fun <span class="title">dispatchTouchEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(onInterceptTouchEvent())</span><br><span class="line"><span class="keyword">return</span> onTouchEvent()</span><br><span class="line"><span class="comment">// å®é™…ä¸Šæ˜¯è°ƒç”¨äº† super.dispatchTouchEvent()ï¼Œåœ¨å…¶ä¸­è°ƒç”¨view.onTouchEvent()</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> child.dispatchTouchEvent()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>å…ˆæ ¹æ®å½“å‰çš„ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨onInterceptTouchEvent()åˆ¤æ–­æ˜¯å¦æ‹¦æˆªè¯¥äº‹ä»¶<ul><li>onIntercept()è¿”å›falseï¼Œå³ä¸æ‹¦æˆªï¼Œåˆ™è°ƒç”¨å­Viewçš„dispatchTouchEvent()ï¼Œå°†å½“å‰äº‹ä»¶ä¼ é€’åˆ°å­Viewå¤„ç†ã€‚</li><li>onIntercept()è¿”å›trueï¼Œå³ä¸ºæ‹¦æˆªï¼Œåˆ™è°ƒç”¨onTouchEvent()æ¶ˆè´¹è¯¥äº‹ä»¶ã€‚</li></ul></li><li>onTouchEvnet()æˆ–child.dispatchTouchEvent()è¿”å›falseï¼Œè¯´æ˜è¯¥ViewGroupæˆ–å­Viewæ²¡æœ‰æ¶ˆè´¹è¯¥äº‹ä»¶ï¼Œåˆ™å°†è¯¥äº‹ä»¶ä¼ å›çˆ¶å®¹å™¨ï¼Œ<em>å³è°ƒç”¨çˆ¶å®¹å™¨çš„onTouchEvent()æ–¹æ³•</em>ã€‚<br>å¦‚æœæ‰€æœ‰çš„Viewéƒ½ä¸æ¶ˆè´¹è¯¥äº‹ä»¶ï¼Œåˆ™Activityçš„onTouchEvent()ä¼šè¢«è°ƒç”¨ã€‚</li></ul><p>å½“ä¸€ä¸ªViewå†³å®šå¤„ç†æŸä¸ªäº‹ä»¶ï¼Œå…¶å¤„ç†æœºåˆ¶å¤§æŠµå¦‚ä¸‹ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">fun <span class="title">dispatchTouchEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span>(onTouchListener != <span class="keyword">null</span></span><br><span class="line">&amp;&amp; onTouchListener.onTouch())</span><br><span class="line">result = <span class="keyword">true</span></span><br><span class="line"><span class="keyword">if</span>(!result &amp;&amp; onTouchEvent())</span><br><span class="line">result = <span class="keyword">true</span></span><br><span class="line"><span class="comment">// onTouchEvent()ä¸­ä¼šè°ƒç”¨OnClickListener.onClick()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å…ˆåˆ¤æ–­onTouchListeneræ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™è°ƒç”¨onTouch()æ–¹æ³•ï¼ŒonTouch()è¿”å›<strong>false</strong>æ‰ä¼šè°ƒç”¨onTouchEvent()æ–¹æ³•ã€‚æˆ‘ä»¬ä¸€èˆ¬è®¾ç½®çš„OnClickListener.onClick()ä¹Ÿæ˜¯åœ¨å…¶ä¸­è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´onClick()æ–¹æ³•ä¸€èˆ¬æ˜¯åœ¨äº‹ä»¶ä¼ é€’çš„æœ«ç«¯ã€‚</p><h1 id="æºç æ¢ç©¶"><a href="#æºç æ¢ç©¶" class="headerlink" title="æºç æ¢ç©¶"></a>æºç æ¢ç©¶</h1><h2 id="Activityå¯¹äº‹ä»¶çš„åˆ†å‘"><a href="#Activityå¯¹äº‹ä»¶çš„åˆ†å‘" class="headerlink" title="Activityå¯¹äº‹ä»¶çš„åˆ†å‘"></a>Activityå¯¹äº‹ä»¶çš„åˆ†å‘</h2><p>PhoneWindowæ˜¯Windowçš„å”¯ä¸€å®ç°ç±»ã€‚å…¶ä¸­çš„superDispatchTouchEvent()æ–¹æ³•å®ç°ï¼Œç›´æ¥å°†äº‹ä»¶ä¼ é€’ç»™äº†DecorViewã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æºç ï¼šPhoneWindows#superDispatchTouchEvent</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">superDispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> mDecor.superDispatchTouchEvent(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>é€šè¿‡((ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content)).getChlidAt(1)å¯ä»¥è·å–Activityæ‰€è®¾ç½®çš„Viewï¼Œè¿™ä¸ªmDecoræ˜¾ç„¶å°±æ˜¯getWindow().getDecorView()è¿”å›çš„Viewï¼Œè€Œæˆ‘ä»¬é€šè¿‡setContentViewæ‰€è®¾ç½®çš„Viewåˆ™æ˜¯ä»–çš„ä¸€ä¸ªå­Viewã€‚</p></blockquote><p>DecorViewç»§æ‰¿è‡ªFrameLayoutï¼Œä¸”æ˜¯ä¸€ä¸ªçˆ¶Viewï¼Œæ‰€ä»¥äº‹ä»¶æœ€ç»ˆä¼šä¼ é€’ç»™é¡¶çº§Viewï¼Œå³æ˜¯setContentViewè®¾ç½®çš„Viewã€‚</p><h2 id="ViewGroupå¯¹äº‹ä»¶çš„åˆ†å‘"><a href="#ViewGroupå¯¹äº‹ä»¶çš„åˆ†å‘" class="headerlink" title="ViewGroupå¯¹äº‹ä»¶çš„åˆ†å‘"></a>ViewGroupå¯¹äº‹ä»¶çš„åˆ†å‘</h2><p>å½“ä¸€ä¸ªViewGroupå†³å®šå¯¹ç‚¹å‡»äº‹ä»¶è¿›è¡Œæ‹¦æˆªæ—¶ï¼Œå¦‚æœonTouchListenerè¢«è®¾ç½®ï¼Œåˆ™è°ƒç”¨onTouch()ï¼Œå¦åˆ™è°ƒç”¨onTouchEvent()ï¼ˆæ­¤è¿‡ç¨‹ä¸ä¸Šæ–‡ä»‹ç»çš„Viewçš„å¤„ç†æœºåˆ¶ç›¸ä¼¼ï¼‰ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœéƒ½æä¾›çš„è¯ï¼ŒonTouchä¼šå±è”½æ‰onTouchEvnet()</strong>ã€‚<br>è¿™ä¸ªé€»è¾‘å…¶å®å¾ˆå¥½ç†è§£ï¼šonTouchListeneræ˜¯å¯¹è§¦æ‘¸çš„ç›‘å¬ï¼Œå³è§¦æ‘¸æ—¶å€™è§¦å‘çš„å›è°ƒï¼›åªæœ‰ä¸å¯¹ï¼ˆæ™®é€šï¼‰è§¦æ‘¸åšå¤„ç†æ—¶ï¼Œå†è¿›ä¸€æ­¥åˆ¤æ–­è§¦æ‘¸äº‹ä»¶ï¼Œå³ç‚¹å‡»ï¼Œæ‰‹åŠ¿ç­‰ã€‚è¿™é‡Œæ³¨æ„è§¦æ‘¸å’Œè§¦æ‘¸äº‹ä»¶çš„åŒºåˆ«ã€‚</p><h3 id="æ‹¦æˆª"><a href="#æ‹¦æˆª" class="headerlink" title="æ‹¦æˆª"></a>æ‹¦æˆª</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Check for interception.</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">boolean</span> intercepted;</span><br><span class="line"><span class="keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN</span><br><span class="line">   || mFirstTouchTarget != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">boolean</span> disallowIntercept = (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (!disallowIntercept) &#123;</span><br><span class="line">    intercepted = onInterceptTouchEvent(ev);</span><br><span class="line">    ev.setAction(action); <span class="comment">// restore action in case it was changed</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    intercepted = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// There are no touch targets and this action is not an initial down</span></span><br><span class="line"><span class="comment">// so this view group continues to intercept touches.</span></span><br><span class="line">intercepted = <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ViewGroupä¸­å…³äºåˆ¤æ–­æ˜¯å¦æ‹¦æˆªäº‹ä»¶çš„éƒ¨åˆ†ã€‚</p><blockquote><p>å½“äº‹ä»¶ç”±ViewGroupçš„å­ViewæˆåŠŸå¤„ç†ï¼ŒmFirstTouchTargetä¼šè¢«èµ‹å€¼å¹¶æŒ‡å‘å­View</p></blockquote><p>è¿™å¥è¯æ€»æ˜¯ä¼¼æ‡‚éæ‡‚ï¼Œç®€å•ç¿»äº†ç¿»åè¾¹çš„ä»£ç ï¼Œçœ‹åˆ°åè¾¹dispatchTransformedTouchEvent()ä¸­ï¼Œä½¿ç”¨super.dispatchTouchEvnet()ï¼Œ<del>æˆ‘è¿˜ä»¥ä¸ºå½“å­Viewä¸å¤„ç†äº‹ä»¶æ—¶ï¼Œä¼šè°ƒç”¨çˆ¶Viewçš„dispatchTouchEvent()ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡è¯¥æ ‡ç¤ºå¾—çŸ¥è¯¥äº‹ä»¶æ˜¯å¦è¢«å¤„ç†ã€‚å¦‚æœmFirstTouchTargetæœªè¢«èµ‹å€¼ï¼Œåˆ™ç›´æ¥interceptä¸ºtrueæ‹¦æˆªè¯¥äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚</del><br>è¿™æ®µè¯å†™å®Œæˆ‘å°±äº§ç”Ÿäº†è‡ªæˆ‘æ€€ç–‘ã€‚æˆ‘æ˜¯åœ¨è¯´ä¸ªå•¥ï¼Ÿï¼Ÿï¼Ÿ<br>ä»”ç»†åˆçœ‹ä¸€éä¹¦åï¼Œç®—æ˜¯æ˜ç™½äº†ï¼Œè¿™ä¸ªæ“ä½œå…¶å®å®ç°çš„æ˜¯ï¼š<strong>ä¸€ä¸ªäº‹ä»¶åºåˆ—åªèƒ½è¢«ä¸€ä¸ªViewæ‹¦æˆªä¸”æ¶ˆè€—ã€‚å³ä¸€ä¸ªå…ƒç´ æ‹¦æˆªäº†æŸæ¬¡äº‹ä»¶ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªäº‹ä»¶åºåˆ—å†…çš„æ‰€æœ‰äº‹ä»¶éƒ½ä¼šç›´æ¥è¢«å®ƒå¤„ç†</strong>ã€‚å½“æŸä¸ªViewæ‹¦æˆªäº†downäº‹ä»¶ï¼Œåˆ™è¯¥äº‹ä»¶åºåˆ—çš„åç»­äº‹ä»¶éƒ½ç”±å®ƒå¤„ç†ã€‚</p><blockquote><p>ä¸€æ—¦äº‹ä»¶ç”±å½“å‰ViewGroupæ‹¦æˆªï¼ŒmFirstTouchTarget != null ä¸æˆç«‹ã€‚é‚£ä¹ˆå½“UPå’ŒMOVEäº‹ä»¶åˆ°æ¥æ—¶ï¼Œç”±äº(actionMasked == MotionEvent.ACTION_DOWN || mFirstTouchTarget != null)ä¸ºfalseï¼Œåˆ™<strong>onInterceptTouchEvent()ä¸ä¼šå†è¢«è°ƒç”¨</strong>ï¼Œå¹¶ä¸”åŒä¸€åºåˆ—ä¸­çš„å…¶ä»–äº‹ä»¶éƒ½é»˜è®¤äº¤ç”±å®ƒå¤„ç†ã€‚</p></blockquote><p>è¿™é‡Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå³æ˜¯FLAG_DISALLOW_INTERCEPTã€‚è¿™ä¸ªæ ‡å¿—ä½æ˜¯ç”±requestDisallowIntercept()è®¾ç½®ï¼Œä¸€èˆ¬ç”¨äºç¦æ­¢ViewGroupæ‹¦æˆªé™¤DOWNä»¥å¤–çš„ä»»ä½•äº‹ä»¶ã€‚</p><ul><li>å½“åˆ†å‘DOWNäº‹ä»¶æ—¶ï¼Œä¼šå¯¹è¯¥æ ‡å¿—ä½è¿›è¡Œé‡ç½®ï¼Œä½¿å¾—å­Viewè®¾ç½®çš„æ ‡å¿—ä½å¤±æ•ˆã€‚æ‰€ä»¥é¢å¯¹DOWNäº‹ä»¶ï¼ŒViewGroupéƒ½ä¼šè°ƒç”¨onInterceptTouchEvent()è¿›è¡Œåˆ¤æ–­æ˜¯å¦æ‹¦æˆª</li></ul><h3 id="åˆ†å‘"><a href="#åˆ†å‘" class="headerlink" title="åˆ†å‘"></a>åˆ†å‘</h3><p>å¦‚æœå½“å‰äº‹ä»¶æœªè¢«æ‹¦æˆªï¼Œåˆ™å¼€å§‹å¯¹å­Viewè¿›è¡Œåˆ†å‘ï¼Œå³é€šè¿‡ä¸€ä¸ªforå¾ªç¯å¯¹æ‰€æœ‰å­Viewè¿›è¡Œéå†ã€‚<br>é¦–å…ˆåˆ¤æ–­å½“å‰å­Viewæ˜¯å¦å¯ä»¥æ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!canViewReceivePointerEvents(child)</span><br><span class="line">|| !isTransformedTouchPointInView(x, y, child, <span class="keyword">null</span>)) &#123;</span><br><span class="line">ev.setTargetAccessibilityFocus(<span class="keyword">false</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><p>canViewReceivePointerEvents()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Returns true if a child view can receive pointer events.</span></span><br><span class="line"><span class="comment">* <span class="doctag">@hide</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">canViewReceivePointerEvents</span><span class="params">(<span class="meta">@NonNull</span> View child)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> (child.mViewFlags &amp; VISIBILITY_MASK) == VISIBLE</span><br><span class="line">|| child.getAnimation() != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•é€šè¿‡åˆ¤æ–­childæ˜¯å¦VISIBLEæˆ–è€…childæ˜¯å¦å¤„äºæ’­æ”¾åŠ¨ç”»çŠ¶æ€ã€‚å¦‚æœchildä¸å¯è§è€Œä¸”ä¸å¤„äºåŠ¨ç”»çŠ¶æ€ï¼ˆä¸æ˜¯å› ä¸ºåŠ¨ç”»æ‰åœ¨è¯¥ä½ç½®ä¸å¯è§ï¼‰ï¼Œé‚£ä¹ˆå®ƒä¸æ˜¯ç¬¦åˆäº‹ä»¶æ¶ˆè´¹çš„æ¡ä»¶ã€‚è¿™æ ·åšçš„ç›®çš„åœ¨äºï¼Œå³æ˜¯ä¸€ä¸ªchildå› ä¸ºåŠ¨ç”»å¦‚ä½ç§»è€Œä¸åœ¨åŸæ¥çš„ä½ç½®å¯è§ï¼Œé‚£ä¹Ÿå¯ä»¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆä½ç§»åŠ¨ç”»ï¼ˆ<strong>ViewåŠ¨ç”»</strong>ï¼‰ä»¥åï¼ŒViewè¿˜å¯ä»¥åœ¨åŸæ¥çš„ä½ç½®æ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶çš„åŸå› ã€‚</p></li><li><p>isTransformedTouchPointInView()<br>åˆ¤æ–­childæ˜¯å¦åœ¨ç‚¹å‡»èŒƒå›´å†…</p></li></ul><p>å¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œåˆ™å¼€å§‹çœŸæ­£å¯¹childè¿›è¡Œäº‹ä»¶ä¼ é€’ã€‚ä¸»è¦è°ƒç”¨<strong>dispatchTransformedTouchEvent()</strong>æ–¹æ³•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dispatchTransformedTouchEvent</span><span class="params">(MotionEvent event, <span class="keyword">boolean</span> cancel,</span></span></span><br><span class="line"><span class="function"><span class="params">            View child, <span class="keyword">int</span> desiredPointerIdBits)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">boolean</span> handled;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Canceling motions is a special case.  We don&#x27;t need to perform any transformations</span></span><br><span class="line">        <span class="comment">// or filtering.  The important part is the action, not the contents.</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> oldAction = event.getAction();</span><br><span class="line">        <span class="keyword">if</span> (cancel || oldAction == MotionEvent.ACTION_CANCEL) &#123;</span><br><span class="line">            event.setAction(MotionEvent.ACTION_CANCEL);</span><br><span class="line">            <span class="keyword">if</span> (child == <span class="keyword">null</span>) &#123;</span><br><span class="line">                handled = <span class="keyword">super</span>.dispatchTouchEvent(event);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                handled = child.dispatchTouchEvent(event);</span><br><span class="line">            &#125;</span><br><span class="line">            event.setAction(oldAction);</span><br><span class="line">            <span class="keyword">return</span> handled;</span><br><span class="line">        &#125;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¯¥æ–¹æ³•ä¸­å…ˆåˆ¤æ–­äº†childæ˜¯å¦ä¸ºnull</p><ul><li>å¦‚æœä¸ºnullï¼Œåˆ™è°ƒç”¨super.dispatchTouchEvent()ï¼Œå³View.dispatchTouchEvent()ï¼Œåœ¨å…¶ä¸­å®ç°å¯¹è§¦æ‘¸äº‹ä»¶è¿›è¡Œå¤„ç†æ¶ˆè´¹ã€‚åœ¨ViewGroupä¸­å¯¹å­Viewè¿›è¡Œåˆ†å‘åï¼Œå¦‚æœäº‹ä»¶æ²¡æœ‰è¢«å­Viewæ¶ˆè€—ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•å¹¶ä¼ å…¥nullã€‚</li><li>å¦‚æœä¸ä¸ºnullã€‚åˆ™è°ƒç”¨child.dispatchTouchEvent()å°†äº‹ä»¶è¿›è¡Œåˆ†å‘ã€‚å¦‚æœè¯¥æ–¹æ³•å‘è¿”å›falseï¼Œåˆ™è¯´æ˜childæœªæ¶ˆè€—ï¼Œå°†ç»§ç»­è¿›è¡Œäº‹ä»¶çš„åˆ†å‘ã€‚å¦‚æœè¿”å›trueã€‚åˆ™è¯´æ˜childå·²æ¶ˆè€—è¯¥äº‹ä»¶ï¼ŒmFirstTouchEventè¢«èµ‹å€¼ï¼Œè·³å‡ºå¯¹å­Viewçš„éå†åˆ†å‘ã€‚<br>å¦‚æœæ²¡æœ‰ä»»ä½•å­Viewå¯¹äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œåˆ™ViewGroupä¼šå¦‚ä¸Šæ‰€è¯´ï¼Œè°ƒç”¨dispatchTransformtouchvnet()å¹¶ä¼ å…¥nullï¼Œä»ViewGroupè½¬åˆ°View.dispatchTouEvent()ï¼Œè‡ªå·±å¯¹äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚</li></ul><h2 id="Viewå¯¹äº‹ä»¶çš„å¤„ç†"><a href="#Viewå¯¹äº‹ä»¶çš„å¤„ç†" class="headerlink" title="Viewå¯¹äº‹ä»¶çš„å¤„ç†"></a>Viewå¯¹äº‹ä»¶çš„å¤„ç†</h2><p>å½“äº‹ä»¶è¢«åˆ†å‘åˆ°æŸä¸€ä¸ªViewä¸­ï¼Œæ­¤æ—¶Viewå¯èƒ½æ˜¯ä¸€ä¸ªåº•å±‚Viewï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªViewGroupï¼Œä½†éƒ½ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œæ— æ³•åœ¨å‘ä¸‹ä¼ é€’äº‹ä»¶ï¼Œå¿…é¡»è‡ªå·±åœ¨View.dispatchTouchEvent()ä¸­ï¼Œå®Œæˆå¯¹Viewè§¦æ‘¸äº‹ä»¶çš„å“åº”å¤„ç†ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> (onFilterTouchEventForSecurity(event)) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; handleScrollBarDragging(event)) &#123;</span><br><span class="line">                result = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//noinspection SimplifiableIfStatement</span></span><br><span class="line">            ListenerInfo li = mListenerInfo;</span><br><span class="line">            <span class="keyword">if</span> (li != <span class="keyword">null</span> &amp;&amp; li.mOnTouchListener != <span class="keyword">null</span></span><br><span class="line">                    &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED</span><br><span class="line">                    &amp;&amp; li.mOnTouchListener.onTouch(<span class="keyword">this</span>, event)) &#123;</span><br><span class="line">                result = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!result &amp;&amp; onTouchEvent(event)) &#123;</span><br><span class="line">                result = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">......</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>å®ç°é€»è¾‘è·Ÿä¸Šæ–‡ä½“ç°çš„å·®ä¸å¤šï¼Œå…ˆåˆ¤æ–­æ˜¯å¦è®¾ç½®äº†OnTouchListenerï¼Œå¦‚æœOnTouchListenerä¸­çš„onTouch()è¿”å›trueï¼Œåˆ™onTouchEvent()ä¸ä¼šè¢«è°ƒç”¨ã€‚<strong>æ‰€ä»¥OnTouchListener.onTouch()æ¯”onTouchEvent()ä¼˜å…ˆçº§æ›´é«˜ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯æ–¹ä¾¿åœ¨å¤–ç•Œå¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚</strong>å› ä¸ºonTouch()ä½œä¸ºä¸€ä¸ªå¤–éƒ¨å®ç°çš„å›è°ƒæ–¹æ³•ï¼Œä¸ä½¿ç”¨è€…è”ç³»ä¼šæ›´ä¸ºç´§å¯†ã€‚</p><h3 id="onTouchEvent"><a href="#onTouchEvent" class="headerlink" title="onTouchEvent()"></a>onTouchEvent()</h3><p>å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹onTouchEvent()å†…éƒ¨å®ç°ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">boolean</span> clickable = ((viewFlags &amp; CLICKABLE) == CLICKABLE</span><br><span class="line">                || (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE)</span><br><span class="line">                || (viewFlags &amp; CONTEXT_CLICKABLE) == CONTEXT_CLICKABLE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((viewFlags &amp; ENABLED_MASK) == DISABLED) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action == MotionEvent.ACTION_UP &amp;&amp; (mPrivateFlags &amp; PFLAG_PRESSED) != <span class="number">0</span>) &#123;</span><br><span class="line">setPressed(<span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    mPrivateFlags3 &amp;= ~PFLAG3_FINGER_DOWN;</span><br><span class="line">    <span class="comment">// A disabled view that is clickable still consumes the touch</span></span><br><span class="line">    <span class="comment">// events, it just doesn&#x27;t respond to them.</span></span><br><span class="line">    <span class="keyword">return</span> clickable;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¯¥æ–¹æ³•ä¸€å¼€å§‹æ˜¯å®ç°å¯¹ä¸å¯ç”¨ï¼ˆdisabledï¼‰Viewçš„å¤„ç†ï¼Œå¯ä»¥çœ‹åˆ°ä¸å¯ç”¨çš„Viewä¹Ÿå¯ä»¥æ¶ˆè€—ç‚¹å‡»äº‹ä»¶ï¼Œåªæ˜¯ä¸ä¼šä½œå‡ºå“åº”ã€‚<br>å¹¶ä¸”ä»¥ä¸Šä»£ç è¿˜å¯ä»¥çœ‹å‡ºï¼Œæ— è®ºViewæ˜¯å¦å¯ç”¨ï¼Œåªè¦è®¾ç½®äº†CLICKABLEæˆ–LONG_CLICKABLEï¼ŒonTouchEvent()éƒ½ä¼šæ¶ˆè€—è¯¥äº‹ä»¶å¹¶è¿”å›trueã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (clickable || (viewFlags &amp; TOOLTIP) == TOOLTIP) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action) &#123;</span><br><span class="line"><span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">    ......</span><br><span class="line"><span class="keyword">if</span> (!post(mPerformClick)) &#123;</span><br><span class="line">    performClickInternal();</span><br><span class="line">&#125;</span><br><span class="line">    mIgnoreNextUpEvent = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä»¥ä¸Šä»£ç æ˜¯å¯¹ç‚¹å‡»äº‹ä»¶å…·ä½“å¤„ç†é€»è¾‘ã€‚æ²¡æ€ä¹ˆçœ‹æ‡‚ã€‚ã€‚=_=ï¼ˆå…³äºTOOLTIPï¼Œæ®è¯´android8æ–°æ·»åŠ çš„è·Ÿé¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæœ‰å…³ï¼‰</p><p>åªçŸ¥é“æ ¸å¿ƒä»£ç éƒ¨åˆ†å³æ˜¯è§¦å‘äº†<strong>performClick()</strong>æ–¹æ³•ã€‚åœ¨perfromClick()ä¸­ï¼Œå¦‚æœViewè®¾ç½®äº†OnClickListenerï¼Œåˆ™ä¼šè°ƒç”¨æˆ‘ä»¬ä¸€èˆ¬è®¾ç½®çš„onClick()ï¼ˆç»ˆäºï¼Œå‡ºç°äº†ç‚¹å‡»äº‹ä»¶ä¸­ä¸æˆ‘ä»¬æ¥è§¦æœ€ä¸ºé¢‘ç¹çš„ï¼‰ï¼ç”±æ­¤ä¹Ÿå¯è§ï¼ŒonClick()æ–¹æ³•å…¶å®æ˜¯åœ¨äº‹ä»¶åˆ†å‘æœºåˆ¶ä¸­å¤„äºæœ€æœ€æœ«ç«¯çš„ã€‚</p><h1 id="å…³äºæ»‘åŠ¨å†²çªè§£å†³"><a href="#å…³äºæ»‘åŠ¨å†²çªè§£å†³" class="headerlink" title="å…³äºæ»‘åŠ¨å†²çªè§£å†³"></a>å…³äºæ»‘åŠ¨å†²çªè§£å†³</h1><div class="note default">            <p>æœªå®Œå¾…ç»­â€¦</p>          </div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h1&gt;&lt;p&gt;æœ€è¿‘é‡æ–°å­¦ä¹ äº†ä¸€éViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ã€‚å…¶å®ä¹‹å‰å·²ç»æŠŠè¿™ä¸€å—å·®ä¸å¤šçœ‹è¿‡ï¼Œä¸å¥½ç†è§£ï¼Œå‡ éä¸‹æ¥ï¼Œå¥½åƒéƒ½äº†è§£äº†ï¼Œä½†æ€»è§‰å¾—å·®ç‚¹æ„æ€ã€‚&lt;br&gt;å‘ç°å…¶å®ä¹‹å‰çœ‹ã€Šè‰ºæœ¯æ¢ç´¢ã€‹ååˆ†ç—›è‹¦ï¼Œä¸»è¦æ˜¯çœ‹å¾—ä¸å¤Ÿä»”ç»†ï¼Œä»¥åŠä¹¦ä¸­æ¦‚å¿µå’ŒçŸ¥è¯†ç‚¹è¾ƒå¤šï¼Œæ²¡æœ‰ä¸€ä¸ªå¤§é¢˜çš„è®¤è¯†ï¼Œå¾ˆå®¹æ˜“è¢«ç»•è¿›å»ã€‚ç°åœ¨æ°´å¹³æœ‰äº›é•¿è¿›äº†ï¼Œæ‰¾äº†å‡ æœ¬ä¹¦å’Œåšå®¢ï¼Œç»ˆäºæœ‰äº†æ›´åŠ æ·±åˆ»çš„ç†è§£ã€‚&lt;br&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>æ¥å§è®¾è®¡æ¨¡å¼</title>
    <link href="http://codeminions.github.io/2019/10/14/%E6%9D%A5%E5%90%A7%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>http://codeminions.github.io/2019/10/14/%E6%9D%A5%E5%90%A7%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2019-10-14T10:47:01.000Z</published>
    <updated>2019-10-19T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å…³äºè®¾è®¡æ¨¡å¼"><a href="#å…³äºè®¾è®¡æ¨¡å¼" class="headerlink" title="å…³äºè®¾è®¡æ¨¡å¼"></a>å…³äºè®¾è®¡æ¨¡å¼</h1><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>  å†™äº†ä¸¤å¹´çš„Javaå’ŒAndroidï¼Œå¯¹äºé¢å‘å¯¹è±¡çš„æ€æƒ³å·²ç„¶æœ‰äº†è‡ªå·±çš„ä¸€ä»½ä½“ä¼šï¼Œå¹¶åœ¨ä¸€æ¬¡æ¬¡çš„å®è·µä¸­ï¼ŒåŠ æ·±å¯¹è¿™ç§æ€æƒ³çš„ä½“ä¼šã€‚æ¯ä¸€æ¬¡å¯¹ä»£ç å°è£…å¤ç”¨ï¼Œæ¾è€¦åˆè®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½èƒ½æ„Ÿå—åˆ°é¢å‘å¯¹è±¡æ€æƒ³å¸¦æ¥çš„æ„‰æ‚¦ï¼Œè¿™å¤§æ¦‚å°±æ˜¯å…¶é­…åŠ›æ‰€åœ¨ã€‚å…³äºè®¾è®¡æ¨¡å¼ï¼Œä¹Ÿä¸å¯é¿å…çš„æ¥è§¦äº†ä¸€äº›æƒ³è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ç­‰ï¼Œä½†å¯¹äºä»–ä»¬éƒ½æ˜¯åªåœç•™åœ¨ç®€å•çš„å®è·µé˜¶æ®µï¼Œå¯¹äºå…¶æ€æƒ³å¹¶æ²¡æœ‰å¤ªæ·±åˆ»çš„ä½“ä¼šã€‚<br>  åœ¨æˆ‘çœ‹æ¥ï¼Œä½œä¸ºä¸€ä¸ªJavaç¨‹åºå‘˜ï¼Œé¢å‘å¯¹è±¡ä»¥åŠè®¾è®¡æ¨¡å¼çš„æ€æƒ³æ·±åº¦ï¼Œå°†å†³å®šå…¶å†™å‡ºæ¥çš„ä»£ç ï¼Œæ˜¯ä¸€ä¸ªç²¾è‡´å·§å¦™çš„è‰ºæœ¯å“ï¼Œè¿˜æ˜¯å¦‚ä¹¦ä¸­æ‰€è¯´æ˜¯ä¸€å›¢æ¯«æ— å¼¹æ€§çš„æ„å¤§åˆ©é¢ã€‚<br>  å†³å®šéœ€è¦å¥½å¥½æ¶è¡¥ä¸€ä¸‹å…³äºè®¾è®¡æ¨¡å¼çš„çŸ¥è¯†ï¼Œæˆ‘é€‰æ‹©äº†ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼Œå°±ç›®å‰æ‰€ç¿»é˜…åˆ°ç« èŠ‚çœ‹æ¥ï¼Œæˆ‘é€‰å¯¹äº†ï¼<br><a id="more"></a></p><h1 id="æ¥å§è®¾è®¡æ¨¡å¼"><a href="#æ¥å§è®¾è®¡æ¨¡å¼" class="headerlink" title="æ¥å§è®¾è®¡æ¨¡å¼"></a>æ¥å§è®¾è®¡æ¨¡å¼</h1><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><p>  è¿™ä¸ªæ¨¡å¼ä¸€ç›´æœ‰æ‰€è€³é—»ï¼Œä½†ä¸€ç›´æ²¡æœ‰äº†è§£ã€‚ä¹¦ä¸­æ²¡æœ‰ä¸€å¼€å§‹å°±ç‚¹æ˜ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œæœ€åä¸€åˆ»é“ç ´çš„æ—¶å€™ï¼ŒçœŸçš„ä½¿æˆ‘æœ‰ç§èŒ…å¡é¡¿å¼€çš„é€šé€æ„Ÿã€‚<br>  åŸæ¥å¹³æ—¶ä»£ç ä¸­é¢å‘æ¥å£ï¼Œç»§æ‰¿ç»„åˆï¼Œéƒ½æ˜¯åœ¨è·µè¡Œè¿™ç§è®¾è®¡æ¨¡å¼ã€‚å…³äºå®šä¹‰ï¼Œä¹¦ä¸­ç»™å‡ºçš„æè¿°æ˜¯ï¼š</p><blockquote><p>å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œä½¿å¾—ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨è¯¥ç®—æ³•çš„ç”¨æˆ·</p></blockquote><p>æˆ‘çš„ç†è§£æ˜¯ï¼Œ<strong>å°†æœ‰å¯èƒ½å˜åŒ–çš„ä»£ç æŠ½ç¦»å‡ºæ¥ä¸ç¨³å®šä¸å˜çš„ä»£ç åˆ†å¼€</strong>ï¼Œæˆä¸ºæ‰€è°“çš„ç®—æ³•æ—ï¼ˆå…¶å®å°±æ˜¯è¡Œä¸ºç»„ï¼Œå¯¹è±¡çš„æ‰€æœ‰è¡Œä¸ºï¼‰ï¼Œ<strong>ä½¿å¾—æ–°çš„ä¸šåŠ¡é€»è¾‘çš„æ”¹å˜ä¸ä¼šå½±å“çš„æ—§çš„ä»£ç </strong>ã€‚<strong>é€šè¿‡ç»„åˆçš„æ–¹å¼ï¼Œä¸ºç‰¹å®šçš„å¯¹è±¡èµ‹äºˆç‰¹å®šçš„æ–¹æ³•ç»„</strong>ã€‚<br>  ä¹¦ä¸­ä½¿ç”¨å®šä¹‰å¤šç§ç±»çš„é¸­å­ä½œä¸ºä¾‹å­ï¼Œå³å°†é¸­å­çš„è¡Œä¸ºï¼ˆä¸åŒé¸­å­è¡Œä¸ºä¸åŒï¼Œå³ä¸ºå¯èƒ½å˜åŒ–çš„éƒ¨åˆ†ï¼‰æŠ½è±¡å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªæ¥å£ï¼Œä½¿ç”¨è¯¥æ¥å£å®ç°ä¸åŒçš„è¡Œä¸ºç±»ï¼Œè¿™æ˜¯<strong>å°è£…å˜åŒ–</strong>ã€‚ç„¶ååœ¨é¸­å­çš„å®é™…ç±»ä¸­ï¼ŒæŒæœ‰ä¸€ä¸ªè¡Œä¸ºæ¥å£çš„å¼•ç”¨ï¼Œé€šè¿‡setterçµæ´»çš„å¯¹è¯¥æ¥å£è¿›è¡Œå®ä¾‹åŒ–ï¼Œä»è€Œè¾¾åˆ°åœ¨è¿è¡Œæ—¶ï¼ŒåŠ¨æ€çš„ä¿®æ”¹å¢åŠ é¸­å­è¡Œä¸ºçš„æ•ˆæœï¼Œè¿™æ˜¯<strong>ä½¿ç”¨ç»„åˆ</strong>ã€‚<br>å…³äºç±»çš„ç»„åˆï¼Œçœ‹ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹æ—¶å€™å°±æœ‰æ‰€äº†è§£ï¼Œå½“æ—¶å¹¶ä¸ç†è§£ä¸ºä»€ä¹ˆè¯´â€œå°‘ç”¨ç»§æ‰¿ï¼Œå¤šç”¨ç»„åˆâ€ï¼Œâ€œâ€˜æœ‰ä¸€ä¸ªâ€™æ¯”â€˜æ˜¯ä¸€ä¸ªâ€™æ›´å¥½â€ï¼Œä½†ç°åœ¨ç»ˆäºæœ‰äº†è‡ªå·±çš„ä¸€ç‚¹ç†è§£ã€‚ä½¿ç”¨ç»§æ‰¿ï¼Œæ„å‘³ç€å¯èƒ½ä¼šå‡ºç°å¤§é‡é‡å¤çš„ä»£ç ï¼Œæˆ–è€…å±€éƒ¨çš„ä¿®æ”¹å½±å“åˆ°å¤§éƒ¨åˆ†çš„ä»£ç çš„æƒ…å†µï¼›è€Œä½¿ç”¨ç»„åˆï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“ç±»çš„æ‰€æœ‰ç®—æ³•æ—ï¼Œé€šè¿‡setterçš„æ–¹å¼ï¼Œçµæ´»ä¿®æ”¹ç®—æ³•æ—ï¼Œå¹¶ä¸”å¯¹äºæ–°çš„ç®—æ³•æ—çš„å¢åŠ ï¼Œä¸ä¼šå½±å“åˆ°å·²æœ‰çš„ä»£ç é€»è¾‘ã€‚è¿™å°±æ˜¯ç»„åˆä¼˜äºç»§æ‰¿åœ°æ–¹ã€‚å…³äºç»„åˆçš„ç¼ºç‚¹ï¼Œä¸ªäººè§‰å¾—å¯èƒ½ä¸å¢åŠ äº†ç±»å’Œæ¥å£çš„æ•°é‡ï¼Œæˆ–è€…ä½¿å¾—ç±»çš„ç»“æ„å˜å¾—å¤æ‚æœ‰å…³ã€‚</p><blockquote><p>OOè®¾è®¡åŸåˆ™<br>å°†ä»£ç ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åˆåœ¨ä¸€èµ·ã€‚<br>é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸é’ˆå¯¹å®ç°ç¼–ç¨‹<br>å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿</p></blockquote><h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><p>  è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹æ¥è¯´å·²ç»ååˆ†ç†Ÿæ‚‰çš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨androidä¸­ï¼Œæœ‰è®¸å¤šç±»ä¼¼çš„å®ç°ï¼Œå¦‚buttonçš„ç‚¹å‡»äº‹ä»¶è®¾ç½®ç­‰ï¼Œç”šè‡³å¸¸ç”¨çš„æ¥å£å›è°ƒï¼Œæˆ‘éƒ½è§‰å¾—æœ‰ç‚¹è§‚å¯Ÿè€…æ¨¡å¼çš„å‘³é“ã€‚<br>  å…³äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼Œ<strong>å¯¹è±¡Aå¯¹å¯¹è±¡Bçš„çŠ¶æ€æ„Ÿå…´è¶£ï¼ˆå…³æ³¨ï¼‰ï¼Œäºæ˜¯Aå¯¹Bè¿›è¡Œè®¢é˜…ï¼Œåˆ™Bçš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™ä¼šå¯¹æ‰€æœ‰è®¢é˜…çš„å¯¹è±¡è¿›è¡Œé€šçŸ¥ï¼Œè®¢é˜…å¯¹è±¡Aå†æ ¹æ®Bçš„é€šçŸ¥ä½œå‡ºç›¸åº”çš„åŠ¨ä½œã€‚å› æ­¤å¦‚æœBè¿Ÿè¿Ÿæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™Aä¸ä¼šå‡ºç°ç›¸åº”çš„ååº”ã€‚</strong><br>  å†æ¥çœ‹çœ‹ä¹¦ä¸­çš„ç†è§£ã€‚è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰æ˜¯ï¼šå®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå…¶æ‰€æœ‰ä¾èµ–è€…å°†æ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚æˆ‘è®¤ä¸ºè¿™ä¸æˆ‘çš„ç†è§£åŸºæœ¬ä¸€è‡´ã€‚<br>  å…³äºè§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼Œä¹¦ä¸­ä»‹ç»äº†ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é¢å‘æ¥å£å¼çš„å®ç°ï¼Œä¸€ç§æ˜¯java.utilä¸­å†…ç½®çš„Observerå®ç°æ–¹å¼ã€‚<br>  æå‡ºå†…ç½®è§‚å¯Ÿè€…æ¨¡å¼çš„åŸå› ï¼Œä¸»è¦ä¸ºäº†è§£å†³ï¼Œä¸»é¢˜å‘è§‚å¯Ÿè€…æ¨é€æ›´æ–°æ—¶ï¼Œä¼šæŠŠæ‰€æœ‰çš„æ–°æ•°æ®éƒ½æ¨é€ç»™è§‚å¯Ÿè€…ï¼Œæˆ–è€…å°†ä¸€äº›ç»†å¾®çš„å˜åŒ–éƒ½æ¨é€å‡ºå»ï¼Œä½†å…¶å®æœ‰çš„è§‚å¯Ÿè€…åªéœ€è¦å…¶ä¸­çš„æŸå‡ ä¸ªæ•°æ®è¶³çŸ£ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ‹‰å–çš„æ–¹å¼ï¼Œè§‚å¯Ÿè€…ä¸»åŠ¨å‘ä¸»é¢˜æ‹‰å–æ•°æ®ã€‚<br>  java.utilå†…ç½®çš„Observerï¼Œåªé€šçŸ¥è§‚å¯Ÿè€…æ›´æ–°ï¼Œä½†è§‚å¯Ÿè€…éœ€è¦è‡ªå·±æ‹‰å–çš„æ–¹å¼å®ç°ã€‚è¿™æ˜¯æˆ‘æœ‰äº›å›°æƒ‘ï¼Œå…¶æœ¬è´¨å…¶å®ç›¸ä¼¼ï¼Œä¸»é¢˜é€šè¿‡observer.update()æ–¹æ³•é€šçŸ¥observeræ›´æ–°çš„æ¶ˆæ¯ï¼Œå¹¶é™„ä¸Šå¯¹è±¡å®ä¾‹ä½œä¸ºå‚æ•°ï¼Œè®©è§‚å¯Ÿè€…ç”¨getterçš„æ–¹å¼è·å–éƒ¨åˆ†ç‰¹å®šçš„æ•°æ®ã€‚<br>  é‡æ–°çœ‹è¿‡è¿™ä¸€ç« ï¼Œå‘ç°æœç„¶æœ‰é—æ¼çš„åœ°æ–¹ã€‚å…¶å®java.utilçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ”¯æŒä¸»é¢˜å‘è§‚å¯Ÿè€…æ¨é€æ•°æ®ï¼Œä¹Ÿæ”¯æŒè§‚å¯Ÿè€…è‡ªå·±å‘ä¸»é¢˜æ‹‰å–æ•°æ®ã€‚Observer.update(Observable, Object)æ–¹æ³•ï¼Œéœ€è¦å°†Observableä¼ å…¥ä»¥å‘ŠçŸ¥è§‚å¯Ÿè€…æ˜¯å“ªä¸€ä¸ªä¸»é¢˜çš„æ›´æ–°ã€‚<strong>å¦‚æœä½¿ç”¨ä¸»é¢˜æ¨é€çš„æ–¹å¼ï¼Œåˆ™å°†æ•°æ®ä»¥Objectçš„æ–¹å¼æ¨é€ç»™è§‚å¯Ÿè€…ï¼Œå¦‚æœæ˜¯è§‚å¯Ÿè€…æ‹‰å–çš„æ–¹å¼ï¼Œåˆ™è§‚å¯Ÿè€…æ”¶åˆ°é€šçŸ¥åï¼Œè‡ªå·±é€šè¿‡ä¸»é¢˜çš„å®ä¾‹è·å–æ›´æ–°çš„æ•°æ®ã€‚</strong>å…³äºç»†å¾®å˜åŒ–çš„æ¨é€ï¼Œå†…ç½®çš„è§‚å¯Ÿè€…æ˜¯åœ¨notifyä¹‹å‰åŠ äº†ä¸€å±‚åˆ¤æ–­ï¼Œåˆ¤æ–­å½“å‰çš„æ›´æ–°æ˜¯å¦éœ€è¦æ¨é€ã€‚<br>  æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ<strong>ä¸å¯ä¾èµ–è§‚å¯Ÿè€…æ¥æ”¶é€šçŸ¥çš„æ¬¡åº</strong>ã€‚æ¯•ç«Ÿä¸»é¢˜æ˜¯é€šè¿‡å¯¹è®¢é˜…åˆ—è¡¨çš„éå†è¿›è¡Œé€šçŸ¥çš„ï¼Œæ‰€ä»¥æ¥æ”¶é€šçŸ¥çš„æ¬¡åºä¸å¯è¢«è¿‡åˆ†ä¾èµ–ã€‚<br>  å…³äºjavaå†…ç½®çš„è§‚å¯Ÿè€…ï¼Œä¹¦ä¸­è¿˜æåˆ°ä¸€ä»¶äº‹ã€‚å°±æ˜¯å…¶Observableæ˜¯éœ€è¦é€šè¿‡ç»§æ‰¿å®ç°çš„å¹¶ä¸”å…¶ä¸­åƒsetChange()æ–¹æ³•éƒ½æ˜¯å—ä¿æŠ¤çš„ï¼ˆprotectedï¼‰ï¼Œå› æ­¤ä¹Ÿä¸èƒ½é€šè¿‡ç»„åˆçš„æ–¹å¼å®ç°ã€‚è¿™ä¹Ÿå°±è¿èƒŒäº†â€œå¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿â€çš„åŸåˆ™ã€‚</p><blockquote><p>å› ä¸ºObservableæ˜¯ä¸€ä¸ªç±»ï¼Œä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªç±»ç»§æ‰¿å®ƒã€‚â€¦<strong>æ¯•ç«ŸJavaä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œè¿™é™åˆ¶äº†Observableçš„å¤ç”¨æ½œåŠ›ã€‚</strong><br>é™¤éä½ ç»§æ‰¿è‡ªObservableï¼Œå¦åˆ™ä½ æ— æ³•åˆ›å»ºObservableå®ä¾‹å¹¶ç»„åˆåˆ°ä½ çš„å¯¹è±¡ä¸­æ¥ã€‚<br>è§‚å¯Ÿè€…æ¨¡å¼ä½œä¸ºä¸€ç§æ–°çš„æ¨¡å¼ï¼Œä»¥æ¾è€¦åˆçš„æ–¹å¼åœ¨ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´æ²Ÿé€šçŠ¶æ€ã€‚å…¶å…¸å‹çš„ä»£è¡¨å³ä¸ºä¹‹å‰Androidä¸­å¸¸ç”¨çš„MVCæ¨¡å¼ã€‚</p></blockquote><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œä¸»é¢˜çš„çŠ¶æ€ï¼Œè§‚å¯Ÿè€…çš„æ•°ç›®å’Œç±»å‹éƒ½ä¼šæ”¹å˜ï¼Œä½¿ç”¨è¯¥æ¨¡å¼ï¼Œå¯ä»¥æ”¹å˜ä¾èµ–ä¸»é¢˜çŠ¶æ€çš„å¯¹è±¡ï¼Œè€Œä¸ç”¨æ”¹å˜ä¸»é¢˜ã€‚<br>è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ç»„åˆï¼Œåœ¨è¿è¡Œæ—¶å°†è§‚å¯Ÿè€…åŠ¨æ€çš„â€œç»„åˆâ€è¿›ä¸»é¢˜ä¸­ã€‚å¯¹è±¡é—´çš„è¿™ç§å…³ç³»ä¸æ˜¯é€šè¿‡ç»§æ‰¿äº§ç”Ÿè€Œæ˜¯é€šè¿‡è¿è¡Œæ—¶çš„ç»„åˆå®ç°ã€‚<br>è§‚å¯Ÿè€…åˆ©ç”¨ä¸»é¢˜çš„æ¥å£è¿›è¡Œè®¢é˜…ï¼Œä¸»é¢˜é€šè¿‡è§‚å¯Ÿè€…çš„æ¥å£è¿›è¡Œæ›´æ–°çš„é€šçŸ¥ã€‚ä½¿ä¸¤è€…ä¹‹é—´è¿ä½œæ­£å¸¸å´åˆæ¾è€¦åˆã€‚</p></blockquote><p>  åˆæ³¨æ„åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œè§‚å¯Ÿè€…æ¨¡å¼çš„å†™æ³•ï¼Œè·Ÿå›è°ƒå‡½æ•°å¥½åƒæœ‰ç‚¹ç›¸ä¼¼ã€‚çœ‹äº†å‡ ç¯‡åšå®¢ï¼Œå°è¯äº†è‡ªå·±çš„çŒœæƒ³ã€‚æ€»ç»“å°±æ˜¯ï¼Œå›è°ƒæ¨¡å¼æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ç‰¹æ®Šå®ç°ï¼Œä¸åŒäºä¸€èˆ¬çš„ä¸€å¯¹å¤šçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå›è°ƒæ¨¡å¼æ˜¯ä¸€å¯¹ä¸€çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p><blockquote><p>OOè®¾è®¡åŸåˆ™<br>ä¸ºäº†äº¤äº’å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆè®¾è®¡è€ŒåŠªåŠ›ï¼Œå³å¯¹è±¡ä¹‹é—´ä¾ç„¶å¯ä»¥æ­£å¸¸äº¤äº’ï¼Œä½†æ˜¯ä¸å¤ªæ¸…æ¥šå½¼æ­¤çš„ç»†èŠ‚ã€‚</p></blockquote><h2 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h2><blockquote><p>æˆ‘æ›¾ä»¥ä¸ºç”·å­æ±‰åº”è¯¥ç”¨ç»§æ‰¿å¤„ç†ä¸€åˆ‡ã€‚åæ¥æˆ‘é¢†æ•™åˆ°<strong>è¿è¡Œæ—¶æ‰©å±•ï¼Œè¿œè¿œæ¯”ç¼–è¯‘æ—¶æœŸçš„ç»§æ‰¿</strong>å¨åŠ›å¤§â€¦</p></blockquote><p>  è¯´åˆ°è£…é¥°è€…æ¨¡å¼ï¼Œæˆ‘ä¾ç„¶åªæ˜¯æœ‰æ‰€è€³é—»ï¼Œä½†å§‹ç»ˆæ²¡æœ‰å»äº†è§£è¿™æ˜¯ä¸€ä¸ªæ€æ ·çš„æ¨¡å¼ï¼Œåªæ˜¯éšéšè§‰å¾—å®ƒå¥½åƒå’Œå·¥å‚æ¨¡å¼æˆ–è€…buildæœ‰æ‰€å…³è”ã€‚<br>  è¿™ä¸€ç« èŠ‚ä¸­ç»å¸¸å‡ºç°çš„ä¸€å¥è¯ï¼š<strong>ç±»çš„è®¾è®¡åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</strong>ï¼Œå³â€œå¼€æ”¾-å…³é—­åŸåˆ™â€ã€‚å¤§æ¦‚æ„æ€æ˜¯åœ¨éœ€æ±‚å‘ç”Ÿå˜åŒ–æˆ–è€…æ–°å¢æ—¶ï¼Œåº”å½“é€šè¿‡æ‰©å±•åŸæœ‰ç±»çš„æ–¹å¼è¿›è¡Œæ›´æ–°ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹åŸæœ‰ç±»çš„æ–¹å¼ã€‚ä½†è¯´å®åœ¨ï¼Œå¯¹äºè¿™å¥è¯æˆ‘æ²¡æœ‰åœ¨æ›´æ·±å±‚æ¬¡çš„ä½“ä¼šå’Œç†è§£ï¼Œå¤§æ¦‚è¿˜æ˜¯OOæ£€éªŒæ¬ ç¼ºçš„ç¼˜æ•…ã€‚<br>  ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼Œå¤§æ¦‚å°±æ˜¯å¯¹ç±»çš„ä¸€ç§æ‰©å±•å®ç°ã€‚<strong>è£…é¥°è€…æ¨¡å¼ï¼Œæ—¨åœ¨ä½¿ç”¨æ‰©å±•+å§”æ‰˜çš„æ–¹å¼ä»£æ›¿ç»§æ‰¿</strong>ã€‚ä¹¦ä¸­çš„å®šä¹‰æ˜¯ï¼š<strong>åŠ¨æ€çš„å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œæä¾›äº†ä¸€ç§æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„çš„æ‰©å±•çš„æ–¹æ¡ˆã€‚</strong><br>  åŸºæœ¬çš„å®ç°æ˜¯ï¼šé¦–å…ˆè¦æ±‚è£…é¥°è€…ä¸è¢«è£…é¥°è€…å±äºåŒä¸€ç±»å‹ï¼ˆåŸºç±»ï¼‰ï¼Œé€šè¿‡ä¸æ–­ä½¿ç”¨è£…é¥°ç±»åŒ…è£…ï¼ˆç»„åˆï¼‰è¢«è£…é¥°ç±»çš„æ–¹å¼ï¼Œå®ç°ç±»åŠŸèƒ½å±æ€§çš„æ‹“å±•æ›´æ–°ã€‚å³å®ç°æ‰©å±•çš„æ•ˆæœï¼Œåˆä¸ä¿®æ”¹åŸæœ‰çš„ç±»å®ç°ã€‚<br>  å…³äºè£…é¥°è€…ä¸è¢«è£…é¥°è€…éœ€è¦ç»§æ‰¿åŒä¸€åŸºç±»ï¼Œä¹¦ä¸­è¿™æ ·è§£é‡Šï¼š</p><blockquote><p>è¿™é‡Œåˆ©ç”¨ç»§æ‰¿è¾¾åˆ°â€œç±»å‹åŒ¹é…â€çš„æ•ˆæœï¼Œè€Œä¸æ˜¯åˆ©ç”¨ç»§æ‰¿è·å–â€œè¡Œä¸ºâ€ã€‚</p></blockquote><p>  ä¸ºäº†è£…é¥°ç±»å¯ä»¥å¯¹è¢«è£…é¥°ç±»è¿›è¡ŒåŒ…è£…å»å–ä»£ï¼Œéœ€è¦å®ƒä»¬æœ‰ç›¸åŒçš„ç±»å‹ï¼Œè€Œè¡Œä¸ºçš„è·å¾—ï¼Œæ˜¯é€šè¿‡ç»„åˆå®ç°ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ç»§æ‰¿ï¼Œå¹¶ä¸å½±å“OOçš„è®¾è®¡åŸåˆ™ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¢«è£…é¥°è€…ï¼ˆèŒ¶ï¼‰</span></span><br><span class="line">Tea tea = <span class="keyword">new</span> Tea();</span><br><span class="line"><span class="comment">// è£…é¥°è€…å¼€å§‹è£…é¥°</span></span><br><span class="line">Decoration decoration = <span class="keyword">new</span> Milk(tea);</span><br><span class="line">decoration = <span class="keyword">new</span> Sugar(decoration);</span><br><span class="line">decoration = <span class="keyword">new</span> Soy(decoration);</span><br><span class="line">decoration = <span class="keyword">new</span> Coffee(decoration);</span><br></pre></td></tr></table></figure><br>  æœ€ç®€å•çš„è£…é¥°è€…æ¨¡å¼å®ç°å¦‚ä¸Šï¼Œæœ‰ç‚¹å¥‡æ€ªï¼Œå¥½åƒæ²¡æœ‰è§è¿‡è¿™ç§ä»£ç ï¼Œåˆå¥½åƒä¼¼æ›¾ç›¸è¯†ã€‚ä¹¦ä¸­é¢„ç¤ºé“ï¼šå·¥å‚æ¨¡å¼å’Œç”Ÿæˆå™¨æ¨¡å¼ä¼šå¯¹è£…é¥°è€…æ¨¡å¼æœ‰æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œè¿™ä¾¿æ˜¯æˆ‘æƒ³èµ·äº†è§è¿‡ç”Ÿæˆå™¨æ¨¡å¼ä»£ç ä¸­ç›¸ä¼¼çš„ç±»çš„åŒ…è£…ã€‚<br>  å¦‚æœç”¨æˆ·éœ€è¦çª¥è§†è£…é¥°è€…é“¾ä¸­çš„æ¯ä¸€ä¸ªè£…é¥°è€…ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„å¦‚åˆ—è¡¨ç­‰å®ç°æ–¹å¼å®ç°ã€‚<br>  å…³äºè£…é¥°è€…æ¨¡å¼çš„ç»å…¸å®ç°ï¼Œä¹¦ä¸­ä»‹ç»äº†Java I/Oï¼Œæˆ‘ç«‹å³å›æƒ³èµ·äº†å½“åˆä½¿ç”¨javaçš„æ–‡ä»¶IOæµæ—¶ï¼Œæ„é€ æµçš„ä¸€ç³»åˆ—æ‘¸ä¸ç€å¤´è„‘çš„éº»çƒ¦æ“ä½œï¼ŒåŸæ¥é‚£ä¸ªè¿‡ç¨‹å°±æ˜¯å¯¹IOæµçš„ä¸€ç³»åˆ—è£…é¥°ä»¥ä½¿å…¶è·å¾—æ›´å¤šåŠŸèƒ½å¦‚LineNumberInputStreamè®¡ç®—è¡Œæ•°åŠŸèƒ½ï¼ŒBufferedInputStreamå¢åŠ ç¼“å†²è¾“å…¥æ”¹è¿›æ€§èƒ½ã€‚</p><h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h2><p>  ç»ˆäºå•ƒå®Œäº†è¿™ä¸€ç« ã€‚å·¥å‚æ–¹æ³•ï¼Œä¹Ÿè®¸æ˜¯å¬çš„æœ€æ—©çš„è®¾è®¡æ¨¡å¼ï¼Œæ—©åœ¨å­¦ä¹ Javaçš„æ—¶å€™ï¼Œå°±äº†è§£è¿‡é€šè¿‡é™æ€å·¥å‚æ–¹æ³•åˆå§‹åŒ–å¯¹è±¡çš„æ“ä½œã€‚å› æ­¤å¯¹å…¶å°è±¡ä¸€ç›´åªæ˜¯å¯¹å¯¹è±¡å®ä¾‹åŒ–çš„å°è£…ï¼Œç„¶è€Œè¿™ä¸€ç« çš„è¯¸å¤šæ¦‚å¿µï¼Œç¡®çœ‹çš„ä¸€å¤´é›¾æ°´ï¼Œä¸€ç¿»ç›®å½•å‘ç°è¿™ä¸€ç« çš„ç¯‡å¹…ç«Ÿæ˜¯å…¶ä»–çš„ä¸¤å€ï¼æˆ‘ä¸€å…±è¯»äº†ä¸‰éï¼Œæ‰å¾—ä»¥ç¨å¾®ç†è§£ã€‚<br>  å…³äºå·¥å‚æ¨¡å¼ä¹¦ä¸­ä»‹ç»äº†ä¸‰ä¸ªæ¦‚å¿µï¼Œç®€å•å·¥å‚ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p><h3 id="ç®€å•å·¥å‚"><a href="#ç®€å•å·¥å‚" class="headerlink" title="ç®€å•å·¥å‚"></a>ç®€å•å·¥å‚</h3><p>  ç®€å•å·¥å‚å¹¶ä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œåªèƒ½è¯´æ˜¯ä¸€ç§å˜æˆä¹ æƒ¯ï¼Œå³æ˜¯<strong>å°†å¯¹è±¡åˆå§‹åŒ–çš„å·¥ç¨‹å°è£…åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­</strong>ï¼Œç”±è¯¥å·¥å‚å¯¹è¯¥ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚å…¶ä¸­å·¥å‚çš„æ–¹æ³•ä¸€èˆ¬è®¾ä¸ºé™æ€ï¼Œå³æ˜¯æ‰€è°“é™æ€å·¥å‚æ–¹æ³•ã€‚<br>  å…¶å®è¯´ç™½ï¼Œå°±æ˜¯å°†ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–ï¼ˆnewè¿‡ç¨‹ï¼‰ï¼Œæ”¾åˆ°å¦ä¸€ä¸ªç±»ï¼ˆå·¥å‚ç±»ï¼‰çš„é™æ€æ–¹æ³•ä¸­ï¼Œä½¿å¾—ç±»çš„åˆå§‹åŒ–ä¸å®¢æˆ·ä»£ç åˆ†ç¦»ã€‚<br>  å…³äºé™æ€å·¥å‚ï¼Œå¯ä»¥å®ç°ä¸åˆ›å»ºå·¥å‚å®ä¾‹çš„æƒ…å†µä¸‹åˆ›å»ºå¯¹è±¡ã€‚ä½†å› ä¸ºä¹Ÿå› ä¸ºæ˜¯é™æ€çš„ä¸èƒ½é€šè¿‡ç»§æ‰¿æ‰©å±•æ–¹æ³•ã€‚</p><h3 id="å·¥å‚æ¨¡å¼-1"><a href="#å·¥å‚æ¨¡å¼-1" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><p>  å·¥å‚æ¨¡å¼ï¼Œæ˜¯å°†å®é™…åˆ›å»ºå¯¹è±¡çš„å·¥å‚æ–¹æ³•ï¼Œä»å·¥å‚ç±»ç§»åˆ°éœ€è¦åˆ›å»ºå¯¹è±¡çš„ç±»ä¸­ï¼Œå¹¶è®¾ä¸ºæŠ½è±¡ï¼Œç”±è¯¥ç±»çš„å­ç±»å†³å®šå…¶è¯¥åˆ›å»ºå…·ä½“çš„å­ç±»ã€‚<br>  æ‰€è°“è®©å­ç±»å†³å®šï¼Œä½¿ç”¨ä¹¦ä¸­çš„æ¯”è¨åº—çš„ä¾‹å­è¯´ï¼Œåœ¨PizzaStoreä¸­é€šè¿‡å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Pizzaå¯¹è±¡ï¼Œå¹¶åœ¨orderPizza()ä¸­ä½¿ç”¨è¯¥å¯¹è±¡ã€‚å…¶ä¸­ç”±äºå·¥å‚æ–¹æ³•æ˜¯æŠ½è±¡çš„ï¼Œæ‰€ä»¥orderPizza()åœ¨ä½¿ç”¨Pizzaå¯¹è±¡æ—¶ï¼Œå¹¶ä¸èƒ½ç¡®å®šè¯¥å¯¹è±¡çš„ç±»å‹ï¼Œåªæœ‰PizzaStoreå­ç±»å®ç°å·¥å‚æ–¹æ³•æ—¶ï¼ŒPizzaçš„å…·ä½“å¯¹è±¡ç±»å‹æ‰èƒ½ç¡®å®šã€‚å…¶ä¸­ï¼ŒPizzaStoreç±»å³ä¸ºCreatorï¼ŒPizzaä¸ºProductï¼ŒPizzaStoreçš„å­ç±»ä¸ºConcreteCreatorï¼ŒPizzaçš„å­ç±»ä¸ºConcreteProductã€‚<br>  <strong>orderPizza()æ–¹æ³•ä¸­ä½¿ç”¨çš„Pizzaç±»å‹æ˜¯æŠ½è±¡çš„ï¼Œæ‰€ä»¥å®ƒä¸æ¸…æ¥šPizzaçš„å…·ä½“ç±»å‹ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ è§£è€¦</strong>ã€‚<br>  å·¥å‚æ–¹æ³•ï¼šå®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚<strong>å·¥å‚æ–¹æ³•å°†ç±»çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»</strong>ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¥å‚æ–¹æ³•çš„ä¸€èˆ¬å½¢å¼ï¼Œè®©å­ç±»å¤„ç†ç±»çš„åˆ›å»ºï¼Œå¹¶å¿…é¡»è¿”å›ä¸€ä¸ªäº§å“ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">abstract</span> Product <span class="title">factoryMethod</span><span class="params">(String type)</span></span></span><br></pre></td></tr></table></figure><br><strong>é€šè¿‡å·¥å‚æ–¹æ³•å¯¹è±¡çš„ä½¿ç”¨è€…ä¸å¯¹è±¡çš„å…·ä½“åˆ›å»ºåˆ†å‰²å¼€æ¥ã€‚</strong></p><blockquote><p>ä¸€ä¸ªå·¥å‚æ–¹æ³•ä¸å…¶ä½¿ç”¨è€…çš„è”åˆï¼Œå¯ä»¥è§†ä¸ºä¸€ä¸ªæ¡†æ¶ï¼›<br>æ­¤å¤–ï¼Œå·¥å‚æ–¹æ³•å°†åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•å°è£…åˆ°æ¯ä¸€ä¸ªåˆ›å»ºè€…ä¸­ï¼Œè¿™æ ·çš„åšæ³•ä¹Ÿå¯è§†ä¸ºä¸€ä¸ªæ¡†æ¶ã€‚</p></blockquote><ul><li><p><strong>å·¥å‚æ¨¡å¼ä¸ç®€å•å·¥å‚çš„åŒºåˆ«</strong><br>æ¯ä¸€ä¸ªConcreteCreatorçœ‹èµ·æ¥éƒ½æœ‰ç‚¹åƒä¸€ä¸ªç®€å•å·¥å‚ï¼Œä½†å…¶å®æœ‰å¾ˆå¤§åŒºåˆ«ã€‚åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œå·¥å‚æ–¹æ³•æ‰©å±•è‡ªæ‰€æœ‰Creatorå…±æœ‰çš„åŸºç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œç”±æ¯ä¸€ä¸ªConreteCreatorè´Ÿè´£å®ç°ï¼Œè€Œç®€å•å·¥å‚ä¸­çš„å·¥å‚ï¼Œåªæ˜¯Creatorä¸­ä½¿ç”¨çš„å¯¹è±¡ã€‚ç®€å•å·¥å‚ä¸­ï¼Œå°†æ‰€æœ‰çš„äº‹æƒ…æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹å…¨éƒ¨å®ç°ï¼Œå› æ­¤å…¶ä»£ç ç¼ºä¹å¼¹æ€§ã€‚<br>è€Œå·¥å‚æ¨¡å¼ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªæ¡†æ¶çš„å½¢å¼ï¼Œè®©å­ç±»å»å†³å®šå¦‚ä½•å®ç°ã€‚è€Œç®€å•å·¥å‚ä»…æ˜¯å°è£…äº†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå´<strong>æ— æ³•å˜æ›´æ­£åœ¨åˆ›å»ºçš„äº§å“</strong>ã€‚ï¼ˆå…¶å®è¿™å¥è¯æ²¡èƒ½å®Œå…¨ç†è§£ï¼Œå¯èƒ½å¯¹è¿è¡Œæ—¶è¿˜æ˜¯æ²¡æœ‰å¾ˆé€å½»å§ï¼‰</p></li><li><p>å·¥å‚æ–¹æ³•ä¸ä¸€å®šè¦æŠ½è±¡ï¼Œå¯ä»¥å­˜åœ¨ä¸€ä¸ªé»˜è®¤å®ç°çš„å·¥å‚æ–¹æ³•ï¼Œç”±å®ƒå®ç°é»˜è®¤ç”Ÿäº§çš„äº§å“ã€‚</p></li></ul><h3 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™"></a>ä¾èµ–å€’ç½®åŸåˆ™</h3><blockquote><p>è¦ä¾èµ–æŠ½è±¡ï¼Œä¸è¦ä¾èµ–å…·ä½“ç±»<br>ä¸èƒ½è®©é«˜å±‚ç»„ä»¶ä¾èµ–åº•å±‚ç»„ä»¶ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡<br>  ä¾‹å¦‚åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼ŒConcreteProductç±»å’ŒCreatoréƒ½ä¾èµ–äºProductæŠ½è±¡ç±»ã€‚è€Œä¸€èˆ¬çš„OOæ€æƒ³æ˜¯Creatorç±»ä¾èµ–äºConcreteProductï¼Œå› ä¸ºConcreteProductéƒ½åœ¨Creatorä¸­è¢«å®ä¾‹åŒ–ï¼Œä½†åœ¨å·¥å‚æ¨¡å¼ä¸­å°±éƒ½ä¾èµ–äºæŠ½è±¡çš„Productï¼Œå°±æ˜¯ä¾èµ–å€’ç½®ã€‚å› æ­¤å·¥å‚æ¨¡å¼ä¹Ÿæ˜¯éµå¾ªå¯¹è±¡å€’ç½®çš„é‡è¦æ‰‹æ®µã€‚</p><ul><li><strong>ä¾èµ–å€’ç½®åŸåˆ™</strong>çš„å»ºè®®<ol><li>å˜é‡ä¸å¯ä»¥æŒæœ‰å…·ä½“ç±»çš„å¼•ç”¨ï¼ˆä½¿ç”¨å·¥å‚æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹</li><li>ä¸è¦è®©ç±»æ´¾ç”Ÿè‡ªå…·ä½“ç±»ï¼ˆè¿™æ ·ä¼šä¾èµ–ä¸€ä¸ªå…·ä½“ç±»</li><li>ä¸è¦è¦†ç›–åŸºç±»çš„æ–¹æ³•ï¼ˆåŸºç±»ä¸­å·²ç»å®ç°çš„æ–¹æ³•ï¼Œåº”è¯¥è¢«å­ç±»å…±äº«</li></ol></li></ul></blockquote><h3 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h3><p>  åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»ºç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æŒ‡å®šå…·ä½“ç±»ã€‚<strong>å…è®¸ç”¨æˆ·é€šè¿‡ä¸€ç»„æ¥å£æ–¹æ³•æ¥åˆ›å»ºä¸€ç»„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå®é™…åˆ›å»ºçš„å¯¹è±¡çš„å…·ä½“ç±»ï¼Œä½¿å¾—å®¢æˆ·ä¸åˆ›å»ºçš„å…·ä½“å¯¹è±¡è§£è€¦</strong>ã€‚<br>  <strong>æŠ½è±¡å·¥å‚çš„æ–¹æ³•ç»å¸¸ä½¿ç”¨å·¥å‚æ–¹æ³•å®ç°</strong>ï¼Œç”±æ­¤ä¹Ÿèƒ½çœ‹å‡ºï¼ŒæŠ½è±¡å·¥å‚ä¸€èˆ¬ç”¨äºå®ç°ä¸€ç»„å¯¹è±¡ï¼Œå·¥å‚æ–¹æ³•ä¸€èˆ¬ç”¨äºå®ç°ä¸€ç§å¯¹è±¡</p><ul><li><strong>æŠ½è±¡å·¥å‚ä¸å·¥å‚æ–¹æ³•çš„åŒºåˆ«</strong><br>å·¥å‚æ–¹æ³•é€šè¿‡ç»§æ‰¿åˆ›å»ºå¯¹è±¡ï¼Œè€ŒæŠ½è±¡å·¥å‚ä½¿ç”¨çš„æ˜¯å¯¹è±¡çš„ç»„åˆã€‚è¿™æ˜¯è¯´å·¥å‚æ–¹æ³•åˆ›å»ºå…·ä½“çš„å¯¹è±¡ï¼Œå°†è¯¥å¯¹è±¡å®ä¾‹åŒ–è¿›è¡ŒåŒ…è£…ï¼Œéœ€è¦ç»§æ‰¿æ‰©å±•ä¸€ä¸ªåŸºç±»ï¼Œå®ç°å…¶ä¸­çš„å·¥å‚æ–¹æ³•ã€‚è€ŒæŠ½è±¡å·¥å‚éœ€è¦æä¾›ä¸€ä¸ªäº¤ä»£äº†äº§å“ä¸­çš„å¯¹è±¡çš„ç”Ÿäº§æ–¹æ³•çš„æ¥å£å®ç°ç±»ï¼Œé€šè¿‡è¯¥ç±»å®ç°æ•´ä¸ªäº§å“å®¶æ—çš„åˆ›å»ºï¼Œä»¥è¿™ç§æ–¹å¼å®ç°ç”¨æˆ·ä¸å®é™…äº§å“çš„è§£è€¦ã€‚è€Œå·¥å‚æ–¹æ³•ä¸éœ€è¦æä¾›ä¸€ä¸ªæ¥å£ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªå·¥å‚æ–¹æ³•å°±å¥½äº†ã€‚<br>å…¶å®åªè¦è®¤çœŸç ”è¯»ï¼Œä¹¦ä¸­çš„æ€è·¯è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œåªèƒ½æ€ªè‡ªå·±ç¬¬ä¸€éçœ‹çš„ä¸ä»”ç»†å§â€¦=_=ã€‚</li></ul><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><p>  å…³äºå•ä¾‹æ¨¡å¼å¤§æ¦‚æ˜¯ç›®å‰æˆ‘ç”¨è¿‡çš„æ¯”è¾ƒæ¸…æ™°åœ°è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºå•ä¾‹æ¨¡å¼å…¶å®å¾ˆå¥½ç†è§£ï¼Œ<strong>å°±æ˜¯å¯¹å¤–éšè—è‡ªèº«çš„æ„é€ æ–¹æ³•ï¼Œåªåœ¨ç±»çš„å†…éƒ¨åˆå§‹åŒ–ä¸€ä¸ªå”¯ä¸€çš„å®ä¾‹å˜é‡å¹¶æä¾›ä¸€ä¸ªå¤–éƒ¨è·å–è¯¥å®ä¾‹çš„æ–¹æ³•ï¼Œå®ç°ç±»ä¼¼å…¨å±€å˜é‡çš„æ•ˆæœä¸”åœ¨ä»£ç ä¸­åªæœ‰ä¸€ä¸ªå”¯ä¸€çš„å¯¹è±¡å®ä¾‹</strong>ã€‚<br>  å½“ç„¶æˆ‘ä¹Ÿäº†è§£åˆ°ï¼Œæˆ‘ä¸€èˆ¬ä½¿ç”¨çš„éƒ½è¿˜æ˜¯æœ€ä¸ºåŸºç¡€çš„å•ä¾‹å®ç°ï¼Œå…³äºå•ä¾‹æ¨¡å¼è¿˜æœ‰å¾ˆå¤šçš„å®ç°å¹³æ—¶å¾ˆå°‘ä½¿ç”¨ï¼Œå¦‚æ‡’æ±‰å•ä¾‹ï¼Œçº¿ç¨‹å®‰å…¨çš„å•ä¾‹ç­‰ã€‚<br>  å…³äºå•ä¾‹æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯ï¼Œä¹¦ä¸­ä¸¾ä¾‹æœ‰ï¼šçº¿ç¨‹æ± ï¼Œç¼“å­˜ï¼Œå¯¹è¯æ¡†ï¼Œåå¥½è®¾ç½®æˆ–æ³¨å†Œè¡¨çš„å¯¹è±¡ï¼Œæ—¥å¿—ï¼Œè®¾å¤‡é©±åŠ¨æˆ–ç½‘ç»œè¿æ¥çš„å¯¹è±¡ç­‰ã€‚<br>  ä¹¦ä¸­çš„å®šä¹‰ä¸ºï¼šå•ä»¶æ¨¡å¼ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å…¨å±€çš„è®¿é—®ç‚¹ã€‚</p><h3 id="æ‡’æ±‰å¼å®ç°"><a href="#æ‡’æ±‰å¼å®ç°" class="headerlink" title="æ‡’æ±‰å¼å®ç°"></a>æ‡’æ±‰å¼å®ç°</h3><p>  æœ€ç»å…¸çš„å®ç°æ–¹å¼ï¼Œä¹Ÿå«æ‡’æ±‰å¼å®ç°ï¼Œå®ç°äº†ä¸€ç§å»¶è¿Ÿå®ä¾‹åŒ–çš„æ•ˆæœã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‡’æ±‰å¼å•ä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>  è¯¥å•ä¾‹é€šè¿‡getInstance()æ–¹æ³•è·å–åˆ°Singletonå®ä¾‹ï¼Œæ¯ä¸€æ¬¡è°ƒç”¨æ—¶åˆ¤æ–­å®ä¾‹å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™åˆå§‹åŒ–ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨ä»£ç ä¸­ä¸€ç›´æ²¡æœ‰ç”¨åˆ°è¯¥å•ä¾‹ï¼Œåˆ™è¯¥å•ä¾‹å¯¹è±¡æ°¸è¿œä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œå³æ‰€è°“çš„å»¶è¿Ÿå®ä¾‹åŒ–ã€‚</p><h3 id="çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å®ç°"><a href="#çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å®ç°" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å®ç°"></a>çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼å®ç°</h3><p>  å½“ç„¶è¿™ç§å®ç°æ–¹å¼åœ¨å¤šçº¿ç¨‹ä¸‹æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡ŒgetInstance()ä¸­æ—¶ï¼ŒåŒæ—¶åˆ¤æ–­instanceä¸ºç©ºä»è€Œåˆ†åˆ«åˆ›å»ºäº†å¯¹è±¡ã€‚<br>  è§£å†³æ–¹æ³•å¯ä»¥æ˜¯ä½¿getInstance()æ–¹æ³•åŒæ­¥ï¼Œå³åŠ ä¸Šsynchronizedä¿®é¥°getInstance()ã€‚ä½†è¿™ç§è§£å†³æ–¹å¼çš„ç¼ºé™·æ˜¯ï¼Œä»£ç ä¼šåœ¨æ¯æ¬¡è°ƒç”¨getInstance()æ—¶ï¼Œå› ä¸ºåŒæ­¥æœºåˆ¶æ¶ˆè€—ä¸å¿…è¦çš„æ€§èƒ½ã€‚ä½†å…¶å®æˆ‘ä»¬åªéœ€è¦å¯¹åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹è¿›è¡ŒåŒæ­¥ã€‚</p><h3 id="æ€¥åˆ‡å®ä¾‹åŒ–çš„é¥¿æ±‰å¼å®ç°"><a href="#æ€¥åˆ‡å®ä¾‹åŒ–çš„é¥¿æ±‰å¼å®ç°" class="headerlink" title="æ€¥åˆ‡å®ä¾‹åŒ–çš„é¥¿æ±‰å¼å®ç°"></a>æ€¥åˆ‡å®ä¾‹åŒ–çš„é¥¿æ±‰å¼å®ç°</h3><p>  é¥¿æ±‰å¼çš„å®ç°æ–¹å¼ï¼Œå…¶å®å°±æ˜¯åœ¨ç±»åŠ è½½çš„è¿‡ç¨‹ä¸­å¯¹instanceè¿›è¡Œå®ä¾‹åŒ–ã€‚è¿™æ ·å®ç°çš„å¥½å¤„æ˜¯ï¼Œä»£ç ä¸­ä»»ä½•æ—¶åˆ»ä½¿ç”¨getInstance()è·å–å•ä¾‹æ—¶ï¼Œå•ä¾‹éƒ½å·²ç»è¢«åˆå§‹åŒ–äº†ã€‚</p><blockquote><p>åœ¨é™æ€åˆå§‹åŒ–å™¨ä¸­åˆ›å»ºå•ä»¶ï¼Œä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨ã€‚<br>JVMä¿è¯åœ¨ä»»ä½•çº¿ç¨‹è®¿é—®instanceä¹‹å‰ä¸€å®šå¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚</p></blockquote><h3 id="åŒé‡æ ¡éªŒé”å¼å®ç°"><a href="#åŒé‡æ ¡éªŒé”å¼å®ç°" class="headerlink" title="åŒé‡æ ¡éªŒé”å¼å®ç°"></a>åŒé‡æ ¡éªŒé”å¼å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒé‡æ ¡éªŒé”å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">synchronized</span>(Singleton.class) &#123;</span><br><span class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)</span><br><span class="line">instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å®ç°æ–¹å¼ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰ä¼šè¿›è¡ŒåŒæ­¥ã€‚ä¸”è¿›å…¥åŒæ­¥åŒºä»¥åè¿˜ä¼šå¯¹instanceè¿›è¡Œæ£€æŸ¥ï¼Œè¿˜æ˜¯ä¸ºnullæ—¶æ‰è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºã€‚è¯¥æ–¹å¼å¯ä»¥å¤§å¤§å‡å°‘getInstance()æ—¶çš„æ—¶é—´æ¶ˆè€—ã€‚<br><strong>æ³¨ï¼š</strong>åœ¨Java1.5ä»¥å‰çš„jvmå¯¹volatileçš„å®ç°ä¼šå¯¼è‡´åŒé‡æ£€æŸ¥åŠ é”çš„å¤±æ•ˆã€‚å› æ­¤å¦‚æœå¯¹æ€§èƒ½æ²¡æœ‰å¾ˆå¤§çš„è¦æ±‚ï¼Œå°½é‡ä¸è¦ä½¿ç”¨è¯¥å®ç°æ–¹å¼ï¼Œå› ä¸ºè¾ƒä¸ºç¹çè¿˜éœ€è¦è€ƒè™‘Javaçš„ç‰ˆæœ¬ã€‚</p><blockquote><p>æ˜¯å¦å¯ä»¥ä½¿ç”¨ç±»çš„å•ä»¶ä»£æ›¿å¯¹è±¡çš„å•ä»¶ï¼Œå³è®¾ç½®ä¸€ä¸ªç±»å’Œå­—æ®µéƒ½ä¸ºé™æ€çš„ç±»ï¼Ÿ<br>å¦‚æœè¯¥ç±»å¯ä»¥è‡ªç»™è‡ªè¶³ä¸”åˆå§‹åŒ–è¿‡ç¨‹ä¸æ˜¯å¾ˆå¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯é™æ€åˆå§‹åŒ–çš„æ§åˆ¶æƒåœ¨Javaæ‰‹ä¸Šï¼Œå½“æ¶‰åŠè¾ƒå¤šçš„ç±»æ—¶ï¼Œå¯èƒ½å‡ºç°ç”±äºç±»çš„åˆå§‹åŒ–æ¬¡åºå¯¼è‡´çš„é—®é¢˜ã€‚</p></blockquote><blockquote><p>å› ä¸ºæ¯ä¸€ä¸ªç±»åŠ è½½å™¨éƒ½ä¼šå®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œæ‰€ä»¥ä¸åŒçš„ç±»åŠ è½½å™¨å¯èƒ½ä¼šåŠ è½½åŒä¸€ä¸ªç±»ï¼Œä½¿å¾—ç¨‹åºä¸­å‡ºç°ä¸¤ä¸ªå•ä»¶ã€‚è§£å†³æ–¹å¼æ˜¯ï¼Œè‡ªè¡ŒæŒ‡å®šç±»åŠ è½½å™¨ï¼Œå¹¶æŒ‡å®šåŒä¸€ä¸ªç±»åŠ è½½å™¨ã€‚</p></blockquote><p>é¥¿æ±‰å¼å®ç°</p><h2 id="å¾…ç»­"><a href="#å¾…ç»­" class="headerlink" title="å¾…ç»­"></a>å¾…ç»­</h2><div class="note default">            <p>æœªå®Œå¾…ç»­â€¦</p>          </div><h1 id="æ€»ç»“è®¾è®¡æ¨¡å¼"><a href="#æ€»ç»“è®¾è®¡æ¨¡å¼" class="headerlink" title="æ€»ç»“è®¾è®¡æ¨¡å¼"></a>æ€»ç»“è®¾è®¡æ¨¡å¼</h1><ul><li>æ„ˆå¾€ä¸‹è¯»ï¼Œæ„ˆå‘æ„Ÿè§‰<strong>ç»§æ‰¿ï¼Œå¤šæ€ï¼Œå°è£…</strong>è¿™å‡ ä¸ªå­—æ›´åŠ åšé‡</li><li>ä¹¦ä¸­ä»‹ç»çš„<strong>è®¾è®¡åŸåˆ™</strong>ï¼Œä¹Ÿè®¸æ¯”ä»‹ç»çš„è®¾è®¡æ¨¡å¼æ›´åŠ ç²¾è¾Ÿé‡è¦ï¼Œå› ä¸ºæ„Ÿè§‰æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼ï¼Œéšçº¦éƒ½å­˜åœ¨ç€å…±é€šç‚¹ï¼Œè€Œè¿™äº›å…±é€šç‚¹ï¼Œå°±æ˜¯è®¾è®¡åŸåˆ™ï¼</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å…³äºè®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å…³äºè®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å…³äºè®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;å…³äºè®¾è®¡æ¨¡å¼&lt;/h1&gt;&lt;h2 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;  å†™äº†ä¸¤å¹´çš„Javaå’ŒAndroidï¼Œå¯¹äºé¢å‘å¯¹è±¡çš„æ€æƒ³å·²ç„¶æœ‰äº†è‡ªå·±çš„ä¸€ä»½ä½“ä¼šï¼Œå¹¶åœ¨ä¸€æ¬¡æ¬¡çš„å®è·µä¸­ï¼ŒåŠ æ·±å¯¹è¿™ç§æ€æƒ³çš„ä½“ä¼šã€‚æ¯ä¸€æ¬¡å¯¹ä»£ç å°è£…å¤ç”¨ï¼Œæ¾è€¦åˆè®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½èƒ½æ„Ÿå—åˆ°é¢å‘å¯¹è±¡æ€æƒ³å¸¦æ¥çš„æ„‰æ‚¦ï¼Œè¿™å¤§æ¦‚å°±æ˜¯å…¶é­…åŠ›æ‰€åœ¨ã€‚å…³äºè®¾è®¡æ¨¡å¼ï¼Œä¹Ÿä¸å¯é¿å…çš„æ¥è§¦äº†ä¸€äº›æƒ³è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼ç­‰ï¼Œä½†å¯¹äºä»–ä»¬éƒ½æ˜¯åªåœç•™åœ¨ç®€å•çš„å®è·µé˜¶æ®µï¼Œå¯¹äºå…¶æ€æƒ³å¹¶æ²¡æœ‰å¤ªæ·±åˆ»çš„ä½“ä¼šã€‚&lt;br&gt;  åœ¨æˆ‘çœ‹æ¥ï¼Œä½œä¸ºä¸€ä¸ªJavaç¨‹åºå‘˜ï¼Œé¢å‘å¯¹è±¡ä»¥åŠè®¾è®¡æ¨¡å¼çš„æ€æƒ³æ·±åº¦ï¼Œå°†å†³å®šå…¶å†™å‡ºæ¥çš„ä»£ç ï¼Œæ˜¯ä¸€ä¸ªç²¾è‡´å·§å¦™çš„è‰ºæœ¯å“ï¼Œè¿˜æ˜¯å¦‚ä¹¦ä¸­æ‰€è¯´æ˜¯ä¸€å›¢æ¯«æ— å¼¹æ€§çš„æ„å¤§åˆ©é¢ã€‚&lt;br&gt;  å†³å®šéœ€è¦å¥½å¥½æ¶è¡¥ä¸€ä¸‹å…³äºè®¾è®¡æ¨¡å¼çš„çŸ¥è¯†ï¼Œæˆ‘é€‰æ‹©äº†ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼Œå°±ç›®å‰æ‰€ç¿»é˜…åˆ°ç« èŠ‚çœ‹æ¥ï¼Œæˆ‘é€‰å¯¹äº†ï¼&lt;br&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="http://codeminions.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Retrofit2å­¦ä¹ è®°å½•</title>
    <link href="http://codeminions.github.io/2019/07/26/Retrofit%E5%AD%A6%E4%B9%A0/"/>
    <id>http://codeminions.github.io/2019/07/26/Retrofit%E5%AD%A6%E4%B9%A0/</id>
    <published>2019-07-26T04:34:24.000Z</published>
    <updated>2019-10-18T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Retrofit2"><a href="#Retrofit2" class="headerlink" title="Retrofit2"></a>Retrofit2</h1><p>å­¦ä¹ ä½¿ç”¨Retrofitå’ŒRxJavaï¼Œç®€å•è®°å½•ä¸€ä¸‹é‡è¦çš„apiå’Œä½¿ç”¨æ–¹æ³•<br><a id="more"></a><br>éœ€å•Šæ·»åŠ çš„ä¾èµ–å¦‚ä¸‹ï¼š<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Retrofitä¸»è¦ç±»åº“</span></span><br><span class="line">implementation <span class="string">&#x27;com.squareup.retrofit2:retrofit:2.0.2&#x27;</span></span><br><span class="line"><span class="comment">// Gson</span></span><br><span class="line">implementation <span class="string">&#x27;com.squareup.retrofit2:converter-gson:2.0.2&#x27;</span></span><br><span class="line"><span class="comment">// okHttp</span></span><br><span class="line">implementation <span class="string">&#x27;com.squareup.okhttp3:okhttp:3.10.0&#x27;</span></span><br><span class="line"><span class="comment">// æ—¥å¿—æ‹¦æˆªå™¨</span></span><br><span class="line">implementation <span class="string">&#x27;com.squareup.okhttp3:logging-interceptor:3.9.1&#x27;</span></span><br></pre></td></tr></table></figure><br>Retrofitä¸»è¦ä½¿ç”¨æ³¨è§£ï¼Œæ ‡è®°è¯·æ±‚å¤´ï¼Œè¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚å‚æ•°ï¼Œè¯·æ±‚æ ¼å¼ã€‚ä¸»è¦è®°ä¸€ä¸‹è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ ¼å¼çš„æ³¨è§£æ„ä¹‰ï¼š</p><table><thead><tr><th>æ³¨è§£</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>@Body</td><td>å¤šç”¨äºpostè¯·æ±‚å‘é€éè¡¨å•æ•°æ®,æ¯”å¦‚æƒ³è¦ä»¥postæ–¹å¼ä¼ é€’jsonæ ¼å¼æ•°æ®</td></tr><tr><td>@Filed</td><td>å¤šç”¨äºpostè¯·æ±‚ä¸­è¡¨å•å­—æ®µ,Filedå’ŒFieldMapéœ€è¦FormUrlEncodedç»“åˆä½¿ç”¨</td></tr><tr><td>@FiledMap</td><td>å’Œ@Filedä½œç”¨ä¸€è‡´ï¼Œç”¨äºä¸ç¡®å®šè¡¨å•å‚æ•°</td></tr><tr><td>@Part</td><td>ç”¨äºè¡¨å•å­—æ®µ,Partå’ŒPartMapä¸Multipartæ³¨è§£ç»“åˆä½¿ç”¨,é€‚åˆæ–‡ä»¶ä¸Šä¼ çš„æƒ…å†µ</td></tr><tr><td>@PartMap</td><td>ç”¨äºè¡¨å•å­—æ®µ,é»˜è®¤æ¥å—çš„ç±»å‹æ˜¯Map&lt;String,REquestBody&gt;ï¼Œå¯ç”¨äºå®ç°å¤šæ–‡ä»¶ä¸Šä¼ </td></tr><tr><td>@Path</td><td>ç”¨äºurlä¸­çš„å ä½ç¬¦</td></tr><tr><td>@Query</td><td>ç”¨äºGetä¸­æŒ‡å®šå‚æ•°</td></tr><tr><td>@QueryMap</td><td>å’ŒQueryä½¿ç”¨ç±»ä¼¼</td></tr><tr><td>@Url</td><td>æŒ‡å®šè¯·æ±‚è·¯å¾„</td></tr></tbody></table><hr><table><thead><tr><th>æ³¨è§£</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>@FormUrlEncoded</td><td>è¡¨ç¤ºè¯·æ±‚å‘é€ç¼–ç è¡¨å•æ•°æ®ï¼Œæ¯ä¸ªé”®å€¼å¯¹éœ€è¦ä½¿ç”¨@Fieldæ³¨è§£</td></tr><tr><td>@Multipart</td><td>è¡¨ç¤ºè¯·æ±‚å‘é€multipartæ•°æ®ï¼Œéœ€è¦é…åˆä½¿ç”¨@Part</td></tr><tr><td>@Streaming</td><td>è¡¨ç¤ºå“åº”ç”¨å­—èŠ‚æµçš„å½¢å¼è¿”å›.å¦‚æœæ²¡ä½¿ç”¨è¯¥æ³¨è§£,é»˜è®¤ä¼šæŠŠæ•°æ®å…¨éƒ¨è½½å…¥åˆ°å†…å­˜ä¸­.è¯¥æ³¨è§£åœ¨åœ¨ä¸‹è½½å¤§æ–‡ä»¶çš„ç‰¹åˆ«æœ‰ç”¨</td></tr></tbody></table><p>ä½¿ç”¨ç¤ºä¾‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ApiService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Headers(&#123;</span></span><br><span class="line"><span class="meta">            &quot;User-Agent: android&quot;,</span></span><br><span class="line"><span class="meta">            &quot;apikey: 28&quot;,</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      è®¾ç½®Urlçš„ä¸‰ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@POST()</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">post1</span><span class="params">(<span class="meta">@Url</span> String url, <span class="meta">@QueryMap</span> Map&lt;String, String&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@POST(&quot;api/en/login&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">post2</span><span class="params">(<span class="meta">@QueryMap</span> Map&lt;String, String&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@POST(&quot;api/&#123;url&#125;/login&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">post3</span><span class="params">(<span class="meta">@Path(&quot;url&quot;)</span> String url, <span class="meta">@QueryMap</span> Map&lt;String, String&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> getId Queryè¯·æ±‚å‚æ•°è®¾ç½®ï¼Œå°†ä¼šä»¥&quot;?id=getId&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GET(&quot;...&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">get</span><span class="params">(<span class="meta">@Header(&quot;token&quot;)</span> String token, <span class="meta">@Query(&quot;id&quot;)</span> <span class="keyword">int</span> getId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨<span class="doctag">@Body</span>æ³¨è§£å®ç°ä¼ å…¥å®ä½“ï¼Œè‡ªè¡Œè½¬åŒ–æˆJson</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@POST(&quot;api/&#123;url&#125;/login&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">login</span><span class="params">(<span class="meta">@Path(&quot;url&quot;)</span> String url, <span class="meta">@Body</span> Entity post)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="comment">     * retrofit 2.0çš„ä¸Šä¼ å’Œä»¥å‰ç•¥æœ‰ä¸åŒï¼Œä½¿ç”¨<span class="doctag">@Multipart</span>æ³¨è§£å’Œ<span class="doctag">@Part</span> MultipartBodyå®ç°ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Multipart</span></span><br><span class="line">    <span class="meta">@POST(&quot;&#123;url&#125;&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">upload</span><span class="params">(<span class="meta">@Path(&quot;url&quot;)</span> String url, <span class="meta">@Part</span> MultipartBody.Part file)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤šå¼ å›¾ç‰‡ä¸Šä¼ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Multipart</span></span><br><span class="line">    <span class="meta">@POST(&quot;upload&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">upload</span><span class="params">(<span class="meta">@PartMap</span> Map&lt;String, MultipartBody.Part&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ å›¾æ–‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Multipart</span></span><br><span class="line">    <span class="meta">@POST(&quot;&quot;)</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">register</span><span class="params">(<span class="meta">@Body</span> Entity post, <span class="meta">@PartMap</span> Map&lt;String, MultipartBody.Part&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶ä¸‹è½½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Streaming</span></span><br><span class="line">    <span class="meta">@GET</span></span><br><span class="line">    <span class="function">Call&lt;Entity&gt; <span class="title">downloadPicture</span><span class="params">(<span class="meta">@Url</span> String fileUrl)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‹¥è¦ä¸‹è½½å¤§ä½“ç§¯çš„æ–‡ä»¶ï¼Œå¦‚10mä»¥ä¸Šï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨<span class="doctag">@Streaming</span>è¿›è¡Œæ³¨è§£ï¼Œå¦åˆ™å°†ä¼šå‡ºç°IOå¼‚å¸¸.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Streaming</span></span><br><span class="line">    <span class="meta">@GET</span></span><br><span class="line">    <span class="function">Observable&lt;Entity&gt; <span class="title">downloadPicture2</span><span class="params">(<span class="meta">@Url</span> String fileUrl)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@POST()</span></span><br><span class="line">    <span class="meta">@FormUrlEncoded</span></span><br><span class="line">    <span class="function">Observable&lt;Entity&gt; <span class="title">executePost</span><span class="params">(<span class="meta">@FieldMap</span> Map&lt;String, Object&gt; maps)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ³¨ï¼šä½¿ç”¨@Pathå‡ºç°urlè¢«è½¬ä¹‰é—®é¢˜<br>è®¾ç½®Urlçš„æ–¹æ³•ä¸­ï¼Œå¦‚æœè¿™æ ·ä½¿ç”¨,å°±ä¼šå‡ºç°urlè¢«è½¬ä¹‰ï¼Œå³â€˜/â€™è¢«è½¬ä¹‰ä¸ºä¹±ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@POST(&quot;&#123;url&#125;&quot;)</span></span><br><span class="line"><span class="function">Call&lt;Entity&gt; <span class="title">post</span><span class="params">(<span class="meta">@Path(&quot;url&quot;)</span> String url)</span></span>;</span><br></pre></td></tr></table></figure><br>å› æ­¤ä½¿ç”¨è¿™ç§æ–¹å¼éœ€è¦è¿™æ ·å†™<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@POST(&quot;&#123;url&#125;&quot;)</span></span><br><span class="line"><span class="function">Call&lt;Entity&gt; <span class="title">post</span><span class="params">(<span class="meta">@Path(value = &quot;url&quot;, encoded = true)</span> String url)</span></span></span><br></pre></td></tr></table></figure></p><h1 id="ä½¿ç”¨ä¸é…ç½®"><a href="#ä½¿ç”¨ä¸é…ç½®" class="headerlink" title="ä½¿ç”¨ä¸é…ç½®"></a>ä½¿ç”¨ä¸é…ç½®</h1><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œç»ˆäºå¼€å§‹å…·ä½“ä½¿ç”¨ã€‚</p><h2 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h2><p>é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªè¯·æ±‚æ–¹æ³•æ¥å£ApiServiceï¼Œåœ¨å…¶ä¸­ç¼–å†™éœ€è¦ç”¨åˆ°çš„è¯·æ±‚æ–¹æ³•æ¥å£ï¼›<br>åœ¨åˆ›å»ºä¸€ä¸ªRetrofitServiceç±»ç”¨äºåˆå§‹åŒ–åŠå¯åŠ¨retrofitã€‚ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRetrofitService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MyRetrofitService</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> OkHttpClient okHttpClient = <span class="keyword">new</span> OkHttpClient.Builder()</span><br><span class="line">            .connectTimeout(<span class="number">10000L</span>, TimeUnit.MILLISECONDS)</span><br><span class="line">            .readTimeout(<span class="number">10000L</span>, TimeUnit.MILLISECONDS)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Retrofit retrofit = <span class="keyword">new</span> Retrofit.Builder()</span><br><span class="line">            .baseUrl(<span class="string">&quot;URL&quot;</span>)</span><br><span class="line">            .client(okHttpClient)</span><br><span class="line">            <span class="comment">// è®¾ç½®jsonè½¬æ¢å™¨</span></span><br><span class="line">            .addConverterFactory(GsonConverterFactory.create())</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>å…·ä½“è°ƒç”¨</strong> æ—¶ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ApiService api = MyRetrofitService.retrofit.create(ApiService.class);</span><br><span class="line">Call&lt;ResponseBody&gt; mData = api.get();</span><br><span class="line">mData.enqueue(<span class="keyword">new</span> Callback&lt;ResponseBody&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call&lt;ResponseBody&gt; call, Throwable t)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h2 id="å…³äºOkHttpClientæ›´å¤šå…·ä½“é…ç½®"><a href="#å…³äºOkHttpClientæ›´å¤šå…·ä½“é…ç½®" class="headerlink" title="å…³äºOkHttpClientæ›´å¤šå…·ä½“é…ç½®"></a>å…³äºOkHttpClientæ›´å¤šå…·ä½“é…ç½®</h2><h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><blockquote><p>addNetworkInterceptor ç”¨äºæ·»åŠ ç½‘ç»œæ‹¦æˆªå™¨Network Interfacetorï¼Œå®ƒä¼šåœ¨requestå’Œresponseæ—¶åˆ†åˆ«è¢«è°ƒç”¨ä¸€æ¬¡ï¼›<br>addInterceptor ç”¨äºæ·»åŠ åº”ç”¨æ‹¦æˆªå™¨Application Interceptorï¼Œ<strong>åªä¼šåœ¨responseè¢«è°ƒç”¨ä¸€æ¬¡</strong>ã€‚</p></blockquote><h4 id="1-æ—¥å¿—æ‹¦æˆªå™¨"><a href="#1-æ—¥å¿—æ‹¦æˆªå™¨" class="headerlink" title="1. æ—¥å¿—æ‹¦æˆªå™¨"></a>1. æ—¥å¿—æ‹¦æˆªå™¨</h4><p>ä½¿ç”¨addNetworkInterceptor()æ·»åŠ åˆ°OkHttpClientä¸­<br>æ—¥å¿—æ‹¦æˆªå™¨æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼:</p><ol><li>ä½¿ç”¨HttpLoggingInterceptor<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpLoggingInterceptor <span class="title">getHttpLoggingInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    HttpLoggingInterceptor loggingInterceptor = <span class="keyword">new</span> HttpLoggingInterceptor(</span><br><span class="line">            <span class="keyword">new</span> HttpLoggingInterceptor.Logger() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;OkHttp&quot;</span>, <span class="string">&quot;log : &quot;</span> + message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">    loggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);</span><br><span class="line">    <span class="keyword">return</span> loggingInterceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ™®é€šInterceptor<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">LogInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> okhttp3.<span class="function">Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Request request = chain.request();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line">        Log.d(<span class="string">&quot;OkHttp&quot;</span>, <span class="string">&quot;HttpHelper1&quot;</span> + String.format(<span class="string">&quot;Sending request %s on %s%n%s&quot;</span>,</span><br><span class="line">                request.url(), chain.connection(), request.headers()));</span><br><span class="line"></span><br><span class="line">        okhttp3.Response response = chain.proceed(request);</span><br><span class="line">        <span class="keyword">long</span> t2 = System.nanoTime();</span><br><span class="line"></span><br><span class="line">        Log.d(<span class="string">&quot;OkHttp&quot;</span>, <span class="string">&quot;HttpHelper2&quot;</span> + String.format(<span class="string">&quot;Received response for %s in %.1fms%n%s&quot;</span>,</span><br><span class="line">                response.request().url(), (t2 - t1) / <span class="number">1e6d</span>, response.headers()));</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-è¯·æ±‚å¤´æ‹¦æˆªå™¨"><a href="#2-è¯·æ±‚å¤´æ‹¦æˆªå™¨" class="headerlink" title="2. è¯·æ±‚å¤´æ‹¦æˆªå™¨"></a>2. è¯·æ±‚å¤´æ‹¦æˆªå™¨</h4>ä½¿ç”¨addInterceptor()æ·»åŠ åˆ°OkHttpClientä¸­<blockquote><p>è¯·æ±‚å¤´æ‹¦æˆªå™¨ä¸ºäº†è®©æœåŠ¡ç«¯èƒ½æ›´å¥½çš„è¯†åˆ«è¯¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨é‚£è¾¹é€šè¿‡è¯·æ±‚å¤´åˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦ä¸ºæœ‰æ•ˆè¯·æ±‚ç­‰â€¦</p></blockquote></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨addHeader()ä¸ä¼šè¦†ç›–ä¹‹å‰è®¾ç½®çš„header,è‹¥ä½¿ç”¨header()åˆ™ä¼šè¦†ç›–ä¹‹å‰çš„header</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Interceptor <span class="title">getRequestHeader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Interceptor headerInterceptor = <span class="keyword">new</span> Interceptor() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> okhttp3.<span class="function">Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            Request originalRequest = chain.request();</span><br><span class="line">            Request.Builder builder = originalRequest.newBuilder();</span><br><span class="line">            builder.addHeader(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">            builder.addHeader(<span class="string">&quot;time&quot;</span>, System.currentTimeMillis() + <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            Request.Builder requestBuilder = builder.method(originalRequest.method(), originalRequest.body());</span><br><span class="line">            Request request = requestBuilder.build();</span><br><span class="line">            <span class="keyword">return</span> chain.proceed(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> headerInterceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ç»Ÿä¸€è¯·æ±‚æ‹¦æˆªå™¨"><a href="#3-ç»Ÿä¸€è¯·æ±‚æ‹¦æˆªå™¨" class="headerlink" title="3. ç»Ÿä¸€è¯·æ±‚æ‹¦æˆªå™¨"></a>3. ç»Ÿä¸€è¯·æ±‚æ‹¦æˆªå™¨</h4><p>ä½¿ç”¨addInterceptor()æ·»åŠ åˆ°OkHttpClientä¸­<br>ç»Ÿä¸€è¯·æ±‚æ‹¦æˆªå™¨çš„åŠŸèƒ½è·Ÿè¯·æ±‚å¤´æ‹¦æˆªå™¨ç›¸ç±»ä¼¼<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå™¨Interceptors</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€çš„è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Interceptor <span class="title">commonParamsInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Interceptor commonParams = <span class="keyword">new</span> Interceptor() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> okhttp3.<span class="function">Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            Request originRequest = chain.request();</span><br><span class="line">            Request request;</span><br><span class="line">            HttpUrl httpUrl = originRequest.url().newBuilder().</span><br><span class="line">                    addQueryParameter(<span class="string">&quot;paltform&quot;</span>, <span class="string">&quot;android&quot;</span>).</span><br><span class="line">                    addQueryParameter(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;1.0.0&quot;</span>).build();</span><br><span class="line">            request = originRequest.newBuilder().url(httpUrl).build();</span><br><span class="line">            <span class="keyword">return</span> chain.proceed(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> commonParams;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="4-æ—¶é—´æ‹¦æˆªå™¨"><a href="#4-æ—¶é—´æ‹¦æˆªå™¨" class="headerlink" title="4. æ—¶é—´æ‹¦æˆªå™¨"></a>4. æ—¶é—´æ‹¦æˆªå™¨</h4><p>ä½¿ç”¨addInterceptor()æ–¹æ³•æ·»åŠ åˆ°OkHttpClientä¸­<br>ä»å“åº”ä¸­è·å–æœåŠ¡å™¨è¿”å›çš„æ—¶é—´<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡å“åº”æ‹¦æˆªå™¨å®ç°äº†ä»å“åº”ä¸­è·å–æœåŠ¡å™¨è¿”å›çš„time</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Interceptor <span class="title">getResponseHeader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Interceptor interceptor = <span class="keyword">new</span> Interceptor() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> okhttp3.<span class="function">Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            okhttp3.Response response = chain.proceed(chain.request());</span><br><span class="line">            String timestamp = response.header(<span class="string">&quot;time&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (timestamp != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// è·å–åˆ°å“åº”headerä¸­çš„time</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> interceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><ul><li>ä½¿ç”¨okhttpç¼“å­˜ï¼Œå…ˆè¦åˆ›å»ºCacheï¼Œç„¶ååœ¨åˆ›å»ºç¼“å­˜æ‹¦æˆªå™¨<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºCache</span></span><br><span class="line">File httpCacheDirectory = <span class="keyword">new</span> File(MyApp.getContext().getCacheDir(), <span class="string">&quot;OkHttpCache&quot;</span>);</span><br><span class="line">Cache cache = <span class="keyword">new</span> Cache(httpCacheDirectory, <span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>);</span><br><span class="line">httpClientBuilder.cache(cache);</span><br><span class="line"><span class="comment">// è®¾ç½®ç¼“å­˜</span></span><br><span class="line">httpClientBuilder.addNetworkInterceptor(getCacheInterceptor2());</span><br><span class="line">httpClientBuilder.addInterceptor(getCacheInterceptor2());</span><br></pre></td></tr></table></figure></li><li>ç¼“å­˜æ‹¦æˆªå™¨<br>ç¼“å­˜æ—¶é—´è‡ªå·±æ ¹æ®æƒ…å†µè®¾å®š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨æ— ç½‘ç»œçš„æƒ…å†µä¸‹è¯»å–ç¼“å­˜ï¼Œæœ‰ç½‘ç»œçš„æƒ…å†µä¸‹æ ¹æ®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´é‡æ–°è¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Interceptor <span class="title">getCacheInterceptor2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Interceptor commonParams = <span class="keyword">new</span> Interceptor() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> okhttp3.<span class="function">Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            Request request = chain.request();</span><br><span class="line">            <span class="keyword">if</span> (!NetworkUtils.isConnected()) &#123;</span><br><span class="line">                <span class="comment">//æ— ç½‘ç»œä¸‹å¼ºåˆ¶ä½¿ç”¨ç¼“å­˜ï¼Œæ— è®ºç¼“å­˜æ˜¯å¦è¿‡æœŸ,æ­¤æ—¶è¯¥è¯·æ±‚å®é™…ä¸Šä¸ä¼šè¢«å‘é€å‡ºå»ã€‚</span></span><br><span class="line">                request = request.newBuilder().cacheControl(CacheControl.FORCE_CACHE)</span><br><span class="line">                        .build();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            okhttp3.Response response = chain.proceed(request);</span><br><span class="line">            <span class="keyword">if</span> (NetworkUtils.isConnected()) &#123;<span class="comment">//æœ‰ç½‘ç»œæƒ…å†µä¸‹ï¼Œæ ¹æ®è¯·æ±‚æ¥å£çš„è®¾ç½®ï¼Œé…ç½®ç¼“å­˜ã€‚</span></span><br><span class="line">                <span class="comment">//è¿™æ ·åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œæ ¹æ®ç¼“å­˜å†³å®šæ˜¯å¦çœŸæ­£å‘å‡ºè¯·æ±‚ã€‚</span></span><br><span class="line">                String cacheControl = request.cacheControl().toString();</span><br><span class="line">                <span class="comment">//å½“ç„¶å¦‚æœä½ æƒ³åœ¨æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹éƒ½ç›´æ¥èµ°ç½‘ç»œï¼Œé‚£ä¹ˆåªéœ€è¦</span></span><br><span class="line">                <span class="comment">//å°†å…¶è¶…æ—¶æ—¶é—´è¿™æ˜¯ä¸º0å³å¯:String cacheControl=&quot;Cache-Control:public,max-age=0&quot;</span></span><br><span class="line">                <span class="keyword">int</span> maxAge = <span class="number">60</span> * <span class="number">60</span>; <span class="comment">// read from cache for 1 minute</span></span><br><span class="line">                <span class="keyword">return</span> response.newBuilder()</span><br><span class="line">                        .header(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;public, max-age=&quot;</span> + maxAge)</span><br><span class="line">                        .removeHeader(<span class="string">&quot;Pragma&quot;</span>)</span><br><span class="line">                        .build();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//æ— ç½‘ç»œ</span></span><br><span class="line">                <span class="keyword">int</span> maxStale = <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">28</span>; <span class="comment">// tolerate 4-weeks stale</span></span><br><span class="line">                <span class="keyword">return</span> response.newBuilder()</span><br><span class="line">                        .header(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;public,only-if-cached,max-stale=&quot;</span> + maxStale)</span><br><span class="line">                        .removeHeader(<span class="string">&quot;Pragma&quot;</span>)</span><br><span class="line">                        .build();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> commonParams;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰CookieJar"><a href="#è‡ªå®šä¹‰CookieJar" class="headerlink" title="è‡ªå®šä¹‰CookieJar"></a>è‡ªå®šä¹‰CookieJar</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">httpClientBuilder.cookieJar(<span class="keyword">new</span> CookieJar() &#123;</span><br><span class="line">    <span class="keyword">final</span> HashMap&lt;HttpUrl, List&lt;Cookie&gt;&gt; cookieStore = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveFromResponse</span><span class="params">(HttpUrl url, List&lt;Cookie&gt; cookies)</span> </span>&#123;</span><br><span class="line">        cookieStore.put(url, cookies);<span class="comment">//ä¿å­˜cookie</span></span><br><span class="line">        <span class="comment">//ä¹Ÿå¯ä»¥ä½¿ç”¨SPä¿å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Cookie&gt; <span class="title">loadForRequest</span><span class="params">(HttpUrl url)</span> </span>&#123;</span><br><span class="line">        List&lt;Cookie&gt; cookies = cookieStore.get(url);<span class="comment">//å–å‡ºcookie</span></span><br><span class="line">        <span class="keyword">return</span> cookies != <span class="keyword">null</span> ? cookies : <span class="keyword">new</span> ArrayList&lt;Cookie&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨RxJava"><a href="#ä½¿ç”¨RxJava" class="headerlink" title="ä½¿ç”¨RxJava"></a>ä½¿ç”¨RxJava</h1>ä½¿ç”¨RxJavaçš„ç›®çš„æ˜¯ï¼ŒRxJavaå¯ä»¥æ›´åŠ ç®€æ´çš„å®ç°å¼‚æ­¥æ“ä½œã€‚<h2 id="RxJavaçš„ç®€å•ç†è§£"><a href="#RxJavaçš„ç®€å•ç†è§£" class="headerlink" title="RxJavaçš„ç®€å•ç†è§£"></a>RxJavaçš„ç®€å•ç†è§£</h2>Rxjavaä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°ï¼Œå› æ­¤å…¶ä¸­æœ‰å‡ ä¸ªåŸºæœ¬æ¦‚å¿µå°±æ˜¯Observableè¢«è§‚å¯Ÿè€…ï¼ŒObserverè§‚å¯Ÿè€…ï¼Œsubscribeè®¢é˜…äº‹ä»¶ã€‚ï¼ˆå…³äºè§‚å¯Ÿè€…æ¨¡å¼æœ€ç»å…¸çš„å®ç°å°±æ˜¯OnClickListenerï¼‰Observableä¸Observeré€šè¿‡subcribe()å®ç°è®¢é˜…å…³ç³»ï¼ŒObservableå°±å¯ä»¥åœ¨å‘ç”ŸæŒ‡å®šäº‹ä»¶æ—¶é€šçŸ¥Observerã€‚<br>ä¸åŒäºä¼ ç»Ÿçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒRxjavaçš„å›è°ƒæ–¹æ³•é™¤äº†onNext()ï¼ˆç›¸å½“äºonClick()ï¼‰ï¼Œè¿˜æœ‰onCompleted()å’ŒonError()æ–¹æ³•ã€‚ç”±äºRxjavaä¼šå°†æ¯ä¸ªäº‹ä»¶ä½œä¸ºä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—å¤„ç†ï¼Œå¹¶æŠŠæ¯ä¸ªäº‹ä»¶å•ç‹¬å¤„ç†ã€‚ä»¥æ­¤ä¸ºå‰ææ—¢å¯ä»¥ç†è§£å¦å¤–ä¸¤ä¸ªæ–¹æ³•ï¼š</li><li>onCompleted() å½“äº‹ä»¶é˜Ÿåˆ—ç»“æŸï¼Œä¸ä¼šæœ‰æ–°çš„onNext()å‘å‡ºæ—¶ï¼Œå³ä¼šè§¦å‘onCompleted()æ–¹æ³•ã€‚</li><li>onError() å½“äº‹ä»¶é˜Ÿåˆ—å‡ºç°å¼‚å¸¸æ˜¯ä¼šè§¦å‘onError()ï¼Œå¹¶ä¸”ä¼šåŒæ—¶åœæ­¢äº‹ä»¶é˜Ÿåˆ—ï¼Œä¸å…è®¸æ–°çš„äº‹ä»¶å‘å‡ºã€‚</li><li>é‚£ä¹ˆå¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œå¼‚å¸¸ä»¥åæ²¡æœ‰äº‹ä»¶å‘å‡ºï¼Œæ˜¯å¦ä¼šè°ƒç”¨onCompleted()ã€‚ç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œåœ¨ä¸€ä¸ªæ­£å¸¸çš„æ—¶é—´åºåˆ—ä¸­ï¼ŒonCompleted()ä¸onError()æ–¹æ³•æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼ŒäºŒè€…äº’æ–¥ï¼Œå³è°ƒç”¨å…¶ä¸­ä¸€ä¸ªå°±ä¸ä¼šè°ƒç”¨å¦å¤–ä¸€ä¸ªï¼Œä¸”éƒ½æ˜¯äº‹ä»¶é˜Ÿåˆ—ä¸­æœ€åä¸€ä¸ªè°ƒç”¨ã€‚</li></ul><h2 id="Rxjavaçš„ç®€å•å®ç°"><a href="#Rxjavaçš„ç®€å•å®ç°" class="headerlink" title="Rxjavaçš„ç®€å•å®ç°"></a>Rxjavaçš„ç®€å•å®ç°</h2><p>æ³¨ï¼šä¸€ä¸‹ä»£ç çš„å®ç°ä¾æ®rxjavaç‰ˆæœ¬ä¸ºï¼Œio.reactivex.rxjava:1.3.8ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ—§çš„ç‰ˆæœ¬äº†ï¼Œä»è¿™ä»¥årxjavaå¼€å§‹2.0ç‰ˆæœ¬ï¼Œæœ‰äº†ä¸€äº›æ–°çš„æ”¹åŠ¨ã€‚ä½†æ˜¯ä»¥æ­¤ç‰ˆæœ¬ç†è§£RxJavaçš„ä½¿ç”¨æ€æƒ³è¿˜æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œè€Œä¸”æ›´åŠ ç®€æ˜“æ›´å¥½ç†è§£ã€‚</p><ol><li><p>åˆ›å»ºè§‚å¯Ÿè€…Observer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Observer&lt;String&gt; observer = <span class="keyword">new</span> Observer&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Log.d(tag, <span class="string">&quot;Item: &quot;</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Log.d(tag, <span class="string">&quot;Completed!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        Log.d(tag, <span class="string">&quot;Error!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é™¤äº†Observeræ¥å£ï¼ŒRxJavaè¿˜å†…ç½®äº†ä¸€ä¸ªå®ç°äº†Observerçš„æŠ½è±¡ç±»ï¼šSubscriberã€‚ Subscriberæ˜¯Observerçš„æ‰©å±•ï¼Œä½†ä»–ä»¬çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼å®Œå…¨ä¸€æ ·ï¼ˆåŒä¸Šï¼‰ã€‚<br>å®è´¨ä¸Šï¼Œåœ¨RxJavaçš„subscribeè¿‡ç¨‹ä¸­ï¼ŒObserverä¹Ÿæ€»æ˜¯ä¼šå…ˆè¢«è½¬æ¢æˆä¸€ä¸ªSubscriberå†ä½¿ç”¨ã€‚</p><blockquote><p>å…³äºåŒºåˆ«<br>onStart(): è¿™æ˜¯ Subscriber å¢åŠ çš„æ–¹æ³•ã€‚å®ƒä¼šåœ¨ subscribe åˆšå¼€å§‹ï¼Œè€Œäº‹ä»¶è¿˜æœªå‘é€ä¹‹å‰è¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºåšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œä¾‹å¦‚æ•°æ®çš„æ¸…é›¶æˆ–é‡ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªå¯é€‰æ–¹æ³•ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒçš„å®ç°ä¸ºç©ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå¯¹å‡†å¤‡å·¥ä½œçš„çº¿ç¨‹æœ‰è¦æ±‚ï¼ˆä¾‹å¦‚å¼¹å‡ºä¸€ä¸ªæ˜¾ç¤ºè¿›åº¦çš„å¯¹è¯æ¡†ï¼Œè¿™å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼‰ï¼Œ onStart() å°±ä¸é€‚ç”¨äº†ï¼Œå› ä¸ºå®ƒæ€»æ˜¯åœ¨ subscribe æ‰€å‘ç”Ÿçš„çº¿ç¨‹è¢«è°ƒç”¨ï¼Œè€Œä¸èƒ½æŒ‡å®šçº¿ç¨‹ã€‚è¦åœ¨æŒ‡å®šçš„çº¿ç¨‹æ¥åšå‡†å¤‡å·¥ä½œï¼Œå¯ä»¥ä½¿ç”¨ doOnSubscribe() æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥åœ¨åé¢çš„æ–‡ä¸­çœ‹åˆ°ã€‚<br>unsubscribe(): è¿™æ˜¯ Subscriber æ‰€å®ç°çš„å¦ä¸€ä¸ªæ¥å£ Subscription çš„æ–¹æ³•ï¼Œç”¨äºå–æ¶ˆè®¢é˜…ã€‚åœ¨è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨åï¼ŒSubscriber å°†ä¸å†æ¥æ”¶äº‹ä»¶ã€‚ä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•è°ƒç”¨å‰ï¼Œå¯ä»¥ä½¿ç”¨ isUnsubscribed() å…ˆåˆ¤æ–­ä¸€ä¸‹çŠ¶æ€ã€‚ unsubscribe() è¿™ä¸ªæ–¹æ³•å¾ˆé‡è¦ï¼Œå› ä¸ºåœ¨ subscribe() ä¹‹åï¼Œ Observable ä¼šæŒæœ‰ Subscriber çš„å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨å¦‚æœä¸èƒ½åŠæ—¶è¢«é‡Šæ”¾ï¼Œå°†æœ‰å†…å­˜æ³„éœ²çš„é£é™©ã€‚æ‰€ä»¥æœ€å¥½ä¿æŒä¸€ä¸ªåŸåˆ™ï¼šè¦åœ¨ä¸å†ä½¿ç”¨çš„æ—¶å€™å°½å¿«åœ¨åˆé€‚çš„åœ°æ–¹ï¼ˆä¾‹å¦‚ onPause() onStop() ç­‰æ–¹æ³•ä¸­ï¼‰è°ƒç”¨ unsubscribe()æ¥è§£é™¤å¼•ç”¨å…³ç³»ï¼Œä»¥é¿å…å†…å­˜æ³„éœ²çš„å‘ç”Ÿã€‚</p></blockquote></li><li><p>åˆ›å»ºObservableè¢«è§‚å¯Ÿè€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Observable observable = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</span><br><span class="line">        subscriber.onNext(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        subscriber.onNext(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line">        subscriber.onNext(<span class="string">&quot;Aloha&quot;</span>);</span><br><span class="line">        subscriber.onCompleted();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>create()æ–¹æ³•ä¸­ä¼ å…¥äº†å‚æ•°<strong>OnSubscribe</strong>å¯¹è±¡ä¼šè¢«å­˜å‚¨åœ¨Observableå¯¹è±¡ä¸­ï¼Œç›¸å½“äºä¸€ä¸ªè®¡åˆ’è¡¨ã€‚å½“Observableè¢«è®¢é˜…ï¼Œå°†å›è°ƒcall()æ–¹æ³•ï¼Œä¾æ¬¡è§¦å‘callä¸­çš„äº‹ä»¶åºåˆ—ã€‚å› æ­¤ä¾‹å¦‚å®é™…ä½¿ç”¨ä¸­ï¼Œå°±å¯ä»¥åœ¨call()ä¸­è¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œå¦‚ç½‘ç»œè¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚çš„ç»“æœé€šè¿‡onNext()çš„å‚æ•°å‘é€å‡ºå»ã€‚<br>é™¤äº†ä½¿ç”¨create()æ–¹æ³•ï¼ŒRxjavaè¿˜æä¾›å…¶ä»–æ–¹æ³•åˆ›å»ºäº‹ä»¶é˜Ÿåˆ—</p><ul><li>just(Tâ€¦)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½œç”¨ç­‰åŒä¸Šä¾‹</span></span><br><span class="line">Observable observable = Observable.just(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;Hi&quot;</span>, <span class="string">&quot;Aloha&quot;</span>);</span><br></pre></td></tr></table></figure></li><li>from(T[]) / from(Iterable&lt;? extends T&gt;)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†ä¼ å…¥çš„æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡æ‹†åˆ†æˆå…·ä½“å¯¹è±¡åï¼Œä¾æ¬¡å‘é€å‡ºæ¥ã€‚</span></span><br><span class="line">String[] words = &#123;<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;Hi&quot;</span>, <span class="string">&quot;Aloha&quot;</span>&#125;;</span><br><span class="line">Observable observable = Observable.from(words);</span><br></pre></td></tr></table></figure></li></ul></li><li>å®ç°è®¢é˜…Subscribe<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure><blockquote><p>è¿™çœ‹èµ·æ¥æ˜¯ã€observalbe è®¢é˜…äº† observer / subscriberã€ï¼Œæ€ç»´é€»è¾‘ä¸Šè™½ç„¶æœ‰äº›åˆ«æ‰­ï¼Œä½†æ˜¯è¿™æœ‰åˆ©äºæµå¼apiçš„è®¾è®¡<br>Observable.subscribe()å†…éƒ¨ä»£ç ç»“æ„å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Subscription <span class="title">subscribe</span><span class="params">(Subscriber subscriber)</span> </span>&#123;</span><br><span class="line">    subscriber.onStart();</span><br><span class="line">    onSubscribe.call(subscriber);</span><br><span class="line">    <span class="keyword">return</span> subscriber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†ä¼ å…¥çš„ Subscriber ä½œä¸º Subscription è¿”å›ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿ unsubscribe().</p></blockquote></li></ol><h2 id="è¿›é˜¶ç”¨æ³•"><a href="#è¿›é˜¶ç”¨æ³•" class="headerlink" title="è¿›é˜¶ç”¨æ³•"></a>è¿›é˜¶ç”¨æ³•</h2><p>subscriber()æ”¯æŒä¸å®Œæ•´å®šä¹‰çš„å›è°ƒï¼Œå¯ä»¥æ ¹æ®å®šä¹‰è‡ªåŠ¨åˆ›å»ºSubscriberã€‚ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Action1&lt;String&gt; onNextAction = <span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(s );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lambdaè¡¨è¾¾å¼å†™æ³•ï¼Œå†…å®¹åŒä¸Š</span></span><br><span class="line">Action1&lt;Throwable&gt; onErrorAction = (e) -&gt; System.out.println(<span class="string">&quot;error&quot;</span> + e);</span><br><span class="line"></span><br><span class="line">Action0 onComAction = () -&gt; System.out.println(<span class="string">&quot;com&quot;</span>);</span><br><span class="line"></span><br><span class="line">Observable observable = Observable.just(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;Aloha&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªåŠ¨åˆ›å»ºSubscriber</span></span><br><span class="line">observable.subscribe(onNextAction);</span><br><span class="line">observable.subscribe(onNextAction, onErrorAction);</span><br><span class="line">observable.subscribe(onNextAction, onErrorAction, onComAction);</span><br></pre></td></tr></table></figure></p><blockquote><p>ç®€å•è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ä¸­å‡ºç°çš„ Action1 å’Œ Action0ã€‚<br>Action0 æ˜¯ RxJava çš„ä¸€ä¸ªæ¥å£ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæ–¹æ³• call()ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æ— å‚æ— è¿”å›å€¼çš„ï¼›ç”±äº onCompleted() æ–¹æ³•ä¹Ÿæ˜¯æ— å‚æ— è¿”å›å€¼çš„ï¼Œå› æ­¤ Action0 å¯ä»¥è¢«å½“æˆä¸€ä¸ªåŒ…è£…å¯¹è±¡ï¼Œå°† onCompleted() çš„å†…å®¹æ‰“åŒ…èµ·æ¥å°†è‡ªå·±ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼ˆonComActionï¼‰ä¼ å…¥ subscribe() ä»¥å®ç°ä¸å®Œæ•´å®šä¹‰çš„å›è°ƒã€‚è¿™æ ·å…¶å®ä¹Ÿå¯ä»¥çœ‹åšå°† onCompleted() æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ è¿›äº† subscribe()ï¼Œç›¸å½“äºå…¶ä»–æŸäº›è¯­è¨€ä¸­çš„ã€é—­åŒ…ã€ã€‚<br>Action1 ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒåŒæ ·åªæœ‰ä¸€ä¸ªæ–¹æ³• call(T param)ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿæ— è¿”å›å€¼ï¼Œä½†æœ‰ä¸€ä¸ªå‚æ•°ï¼›ä¸ Action0 åŒç†ï¼Œç”±äº onNext(T obj) å’Œ onError(Throwable error) ä¹Ÿæ˜¯å•å‚æ•°æ— è¿”å›å€¼çš„ï¼Œå› æ­¤ Action1 å¯ä»¥å°† onNext(obj) å’Œ onError(error) æ‰“åŒ…èµ·æ¥ä¼ å…¥ subscribe() ä»¥å®ç°ä¸å®Œæ•´å®šä¹‰çš„å›è°ƒã€‚äº‹å®ä¸Šï¼Œè™½ç„¶ Action0 å’Œ Action1 åœ¨ API ä¸­ä½¿ç”¨æœ€å¹¿æ³›ï¼Œä½† RxJava æ˜¯æä¾›äº†å¤šä¸ª ActionX å½¢å¼çš„æ¥å£ (ä¾‹å¦‚ Action2, Action3) çš„ï¼Œå®ƒä»¬å¯ä»¥è¢«ç”¨ä»¥åŒ…è£…ä¸åŒçš„æ— è¿”å›å€¼çš„æ–¹æ³•ã€‚</p></blockquote><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæœ‰å‚ä¸€ä¸ªæ— å‚çš„åŒ…è£…ç±»ï¼Œæ— å‚çš„ç±»å¯ä»¥ç”¨äºæ„å»ºonCompleted()ï¼Œæœ‰å‚çš„å¯ä»¥ç”¨äºæ„å»ºonNext()æˆ–onError()ã€‚subsrcribe()é‡è½½äº†3ä¸ªå…³äºActionXçš„æ–¹æ³•ï¼Œå°±æ˜¯ä¸Šè¿°ä»£ç ä¸­çš„3ä¸ªã€‚æ¯”å¦‚ç¬¬ä¸‰ä¸ªæ–¹æ³•å‚æ•°è¡¨ä¸º(Action1&lt;? super T&gt;, Action1<Throwable>, Action0)ï¼Œä»¥æ­¤é™å®šäº†ä¸‰ä¸ªå‚æ•°çš„ä½ç½®ã€‚</p><p>æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªä¾‹å­å°ç»“ä¸€ä¸‹ï¼š</p><blockquote><p>ç”± id å–å¾—å›¾ç‰‡å¹¶æ˜¾ç¤ºï¼š ç”±æŒ‡å®šçš„ä¸€ä¸ª drawable æ–‡ä»¶ id drawableRes å–å¾—å›¾ç‰‡ï¼Œå¹¶æ˜¾ç¤ºåœ¨ ImageView ä¸­ï¼Œå¹¶åœ¨å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰“å° Toast æŠ¥é”™ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> drawableRes = ...;</span><br><span class="line">ImageView imageView = ...;</span><br><span class="line">Observable.create(<span class="keyword">new</span> OnSubscribe&lt;Drawable&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Drawable&gt; subscriber)</span> </span>&#123;</span><br><span class="line">        Drawable drawable = getTheme().getDrawable(drawableRes));</span><br><span class="line">        subscriber.onNext(drawable);</span><br><span class="line">        subscriber.onCompleted();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribe(<span class="keyword">new</span> Observer&lt;Drawable&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Drawable drawable)</span> </span>&#123;</span><br><span class="line">        imageView.setImageDrawable(drawable);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        Toast.makeText(activity, <span class="string">&quot;Error!&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>ä»¥ä¸Šä»£ç ï¼Œå¯¹ä¸Šé¢RxJavaçš„å†…å®¹è¿›è¡Œäº†å°ç»“ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Observableçš„call()æ–¹æ³•ä¸­è¿›è¡Œæ‰€è¦è¿›è¡Œçš„å¼‚æ­¥æ“ä½œï¼Œç„¶ååœ¨subcribeçš„Observerï¼ˆSubscriberï¼‰ä¸­é€šè¿‡onNextï¼ŒonErrorï¼ŒonCompletedè®¾ç½®å›è°ƒæ–¹æ³•ã€‚è¿™å°±æ˜¯Rxjavaçš„åŸºç¡€ä½¿ç”¨æ ¼å¼ã€‚</p></blockquote><h2 id="å¼‚æ­¥-çº¿ç¨‹æ§åˆ¶Scheduler"><a href="#å¼‚æ­¥-çº¿ç¨‹æ§åˆ¶Scheduler" class="headerlink" title="å¼‚æ­¥-çº¿ç¨‹æ§åˆ¶Scheduler"></a>å¼‚æ­¥-çº¿ç¨‹æ§åˆ¶Scheduler</h2><p>ç„¶è€Œåˆ°è¿™é‡Œï¼Œéƒ½å’Œå¼€å¤´æ‰€è¯´RxJavaçš„ä¸»è¦ä½œç”¨å¼‚æ­¥è¿˜æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚å› ä¸ºRxjavaé»˜è®¤æ˜¯åœ¨è¿è¡Œåœ¨åŒä¸€çº¿ç¨‹ã€‚<br>æƒ³è¦å®ç°å¼‚æ­¥æœºåˆ¶ï¼Œå°±éœ€è¦ç”¨åˆ°RxJavaçš„ç¬¬å››ä¸ªæ¦‚å¿µSchedulerã€‚</p><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼æœ¬èº«çš„ç›®çš„å°±æ˜¯ã€åå°å¤„ç†ï¼Œå‰å°å›è°ƒã€çš„å¼‚æ­¥æœºåˆ¶<br>åœ¨ä¸æŒ‡å®šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œ RxJava éµå¾ªçš„æ˜¯çº¿ç¨‹ä¸å˜çš„åŸåˆ™ï¼Œå³ï¼šåœ¨å“ªä¸ªçº¿ç¨‹è°ƒç”¨ subscribe()ï¼Œå°±åœ¨å“ªä¸ªçº¿ç¨‹ç”Ÿäº§äº‹ä»¶ï¼›åœ¨å“ªä¸ªçº¿ç¨‹ç”Ÿäº§äº‹ä»¶ï¼Œå°±åœ¨å“ªä¸ªçº¿ç¨‹æ¶ˆè´¹äº‹ä»¶ã€‚å¦‚æœéœ€è¦åˆ‡æ¢çº¿ç¨‹ï¼Œå°±éœ€è¦ç”¨åˆ° Scheduler ï¼ˆè°ƒåº¦å™¨ï¼‰ã€‚</p></blockquote><p>RxJavaé€šè¿‡ScheduleræŒ‡å®šä¸€ä¸ªä»£ç æ®µéœ€è¦è¿è¡Œåœ¨å“ªä¸€ä¸ªè¿›ç¨‹ã€‚</p><ul><li><strong>subscribeOn()</strong> æŒ‡å®šsubscribe()å‘ç”Ÿçš„è¿›ç¨‹ã€‚å³ Observable.OnSubscribe è¢«æ¿€æ´»æ—¶æ‰€å¤„çš„çº¿ç¨‹ï¼Œäº‹ä»¶äº§ç”Ÿçš„çº¿ç¨‹ã€‚</li><li><strong>observeOn()</strong> æŒ‡å®šSubscriberæ‰€è¿è¡Œçš„çº¿ç¨‹ã€‚å³äº‹ä»¶æ¶ˆè´¹è¿›ç¨‹ã€‚</li></ul><p>RxJavaä¸­å†…ç½®äº†å‡ ä¸ªè¿›ç¨‹ï¼Œä»¥é€‚ç”¨ä¸€äº›é»˜è®¤åœºæ™¯ï¼š</p><blockquote><ul><li>Schedulers.immediate(): ç›´æ¥åœ¨å½“å‰çº¿ç¨‹è¿è¡Œï¼Œç›¸å½“äºä¸æŒ‡å®šçº¿ç¨‹ã€‚è¿™æ˜¯é»˜è®¤çš„ Schedulerã€‚</li><li>Schedulers.newThread(): æ€»æ˜¯å¯ç”¨æ–°çº¿ç¨‹ï¼Œå¹¶åœ¨æ–°çº¿ç¨‹æ‰§è¡Œæ“ä½œã€‚</li><li>Schedulers.io(): I/O æ“ä½œï¼ˆè¯»å†™æ–‡ä»¶ã€è¯»å†™æ•°æ®åº“ã€ç½‘ç»œä¿¡æ¯äº¤äº’ç­‰ï¼‰æ‰€ä½¿ç”¨çš„ Schedulerã€‚è¡Œä¸ºæ¨¡å¼å’Œ newThread() å·®ä¸å¤šï¼ŒåŒºåˆ«åœ¨äº io() çš„å†…éƒ¨å®ç°æ˜¯æ˜¯ç”¨ä¸€ä¸ªæ— æ•°é‡ä¸Šé™çš„çº¿ç¨‹æ± ï¼Œå¯ä»¥é‡ç”¨ç©ºé—²çš„çº¿ç¨‹ï¼Œå› æ­¤å¤šæ•°æƒ…å†µä¸‹ io() æ¯” newThread() æ›´æœ‰æ•ˆç‡ã€‚ä¸è¦æŠŠè®¡ç®—å·¥ä½œæ”¾åœ¨ io() ä¸­ï¼Œå¯ä»¥é¿å…åˆ›å»ºä¸å¿…è¦çš„çº¿ç¨‹ã€‚</li><li>Schedulers.computation(): è®¡ç®—æ‰€ä½¿ç”¨çš„ Schedulerã€‚è¿™ä¸ªè®¡ç®—æŒ‡çš„æ˜¯ CPU å¯†é›†å‹è®¡ç®—ï¼Œå³ä¸ä¼šè¢« I/O ç­‰æ“ä½œé™åˆ¶æ€§èƒ½çš„æ“ä½œï¼Œä¾‹å¦‚å›¾å½¢çš„è®¡ç®—ã€‚è¿™ä¸ª Scheduler ä½¿ç”¨çš„å›ºå®šçš„çº¿ç¨‹æ± ï¼Œå¤§å°ä¸º CPU æ ¸æ•°ã€‚ä¸è¦æŠŠ I/O æ“ä½œæ”¾åœ¨ computation() ä¸­ï¼Œå¦åˆ™ I/O æ“ä½œçš„ç­‰å¾…æ—¶é—´ä¼šæµªè´¹ CPUã€‚</li><li>Android è¿˜æœ‰ä¸€ä¸ªä¸“ç”¨çš„ AndroidSchedulers.mainThread()ï¼Œå®ƒæŒ‡å®šçš„æ“ä½œå°†åœ¨ Android ä¸»çº¿ç¨‹è¿è¡Œã€‚</li></ul></blockquote><p>è¿˜æ˜¯ä½¿ç”¨Androidä¸­å›¾ç‰‡æ˜¾ç¤ºçš„ä¾‹å­</p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> drawableRes = ...;</span><br><span class="line">ImageView imageView = ...;</span><br><span class="line">Observable.create(<span class="keyword">new</span> OnSubscribe&lt;Drawable&gt;() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> Drawable&gt; subscriber)</span> </span>&#123;</span><br><span class="line">       Drawable drawable = getTheme().getDrawable(drawableRes));</span><br><span class="line">       subscriber.onNext(drawable);</span><br><span class="line">       subscriber.onCompleted();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.subscribeOn(Schedulers.io()) <span class="comment">// æŒ‡å®š subscribe() å‘ç”Ÿåœ¨ IO çº¿ç¨‹</span></span><br><span class="line">.observeOn(AndroidSchedulers.mainThread()) <span class="comment">// æŒ‡å®š Subscriber çš„å›è°ƒå‘ç”Ÿåœ¨ä¸»çº¿ç¨‹</span></span><br><span class="line">.subscribe(<span class="keyword">new</span> Observer&lt;Drawable&gt;() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Drawable drawable)</span> </span>&#123;</span><br><span class="line">       imageView.setImageDrawable(drawable);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">       Toast.makeText(activity, <span class="string">&quot;Error!&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å³ åŠ è½½å›¾ç‰‡å°†ä¼šå‘ç”Ÿåœ¨ IO çº¿ç¨‹ï¼Œè€Œè®¾ç½®å›¾ç‰‡åˆ™è¢«è®¾å®šåœ¨äº†ä¸»çº¿ç¨‹ã€‚è¿™å°±æ„å‘³ç€ï¼Œå³ä½¿åŠ è½½å›¾ç‰‡è€—è´¹äº†å‡ åç”šè‡³å‡ ç™¾æ¯«ç§’çš„æ—¶é—´ï¼Œä¹Ÿä¸ä¼šé€ æˆä¸æ¯«ç•Œé¢çš„å¡é¡¿ã€‚</p></blockquote><h2 id="Scheduleçš„åŸç†ï¼šå˜æ¢"><a href="#Scheduleçš„åŸç†ï¼šå˜æ¢" class="headerlink" title="Scheduleçš„åŸç†ï¼šå˜æ¢"></a>Scheduleçš„åŸç†ï¼šå˜æ¢</h2><h2 id="å…ˆå…·ä½“å®ç°ä¸€ä¸‹RxJava-Retrofit"><a href="#å…ˆå…·ä½“å®ç°ä¸€ä¸‹RxJava-Retrofit" class="headerlink" title="å…ˆå…·ä½“å®ç°ä¸€ä¸‹RxJava+Retrofit"></a>å…ˆå…·ä½“å®ç°ä¸€ä¸‹RxJava+Retrofit</h2><p><a href="https://www.jianshu.com/p/73216939806a">Retrofitå‚è€ƒé“¾æ¥</a><br><a href="http://gank.io/post/560e15be2dca930e00da1083">RxJavaå‚è€ƒé“¾æ¥</a></p><hr><div class="note default">            <p>æœªå®Œå¾…ç»­â€¦</p>          </div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Retrofit2&quot;&gt;&lt;a href=&quot;#Retrofit2&quot; class=&quot;headerlink&quot; title=&quot;Retrofit2&quot;&gt;&lt;/a&gt;Retrofit2&lt;/h1&gt;&lt;p&gt;å­¦ä¹ ä½¿ç”¨Retrofitå’ŒRxJavaï¼Œç®€å•è®°å½•ä¸€ä¸‹é‡è¦çš„apiå’Œä½¿ç”¨æ–¹æ³•&lt;br&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
    <category term="Rxjava" scheme="http://codeminions.github.io/tags/Rxjava/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£JVM</title>
    <link href="http://codeminions.github.io/2019/07/17/JVM%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <id>http://codeminions.github.io/2019/07/17/JVM%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</id>
    <published>2019-07-16T16:00:00.000Z</published>
    <updated>2019-07-16T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JDK-JRE-JVM"><a href="#JDK-JRE-JVM" class="headerlink" title="JDK JRE JVM"></a>JDK JRE JVM</h1><p><img src="/2019/07/17/JVM%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/JDKandJRE.png" alt="JDK JRE JVMå…³ç³»å›¾"></p><a id="more"></a><p>å…ˆç®€å•è¿‡ä¸€éå†å²ï¼Œè¿™ç®—æ˜¯å¸¸è¯†ã€‚<br>1991.4 Oakè¯­è¨€ï¼šjavaå‰èº«ï¼Œç›®æ ‡ï¼šç”µå­äº§å“ä¸Šçš„ç¨‹åºæ¶æ„<br>1996.1 JDK1.0å‘å¸ƒã€‚çº¯è§£é‡Šæ‰§è¡Œçš„Jvmå®ç°<br>1997.2 å‘å¸ƒJDK1.1ã€‚JDBCï¼Œå†…éƒ¨ç±»ï¼Œåå°„ç­‰å‡ºç°<br>1998.12 JDK1.2å‘å¸ƒã€‚æ‹†åˆ†ä¸‰ä¸ªä½“ç³»ï¼šJ2SEï¼ˆæ¡Œé¢å¼€å‘ï¼‰ï¼ŒJ2EEï¼ˆä¼ä¸šçº§å¼€å‘ï¼‰ï¼ŒJ2MEï¼ˆé¢å‘ç§»åŠ¨ç«¯ï¼‰ã€‚é›†åˆç±»ç­‰å‡ºç°ã€‚é¦–æ¬¡å†…ç½®JITç¼–è¯‘å™¨<br>1999.4 HotSpotè™šæ‹Ÿæœºå‘å¸ƒã€‚JDK1.3ä»¥åæˆä¸ºSun JDKçš„é»˜è®¤è™šæ‹Ÿæœº<br>2002.2 JDK1.4å‘å¸ƒã€‚å¼•å…¥å¼‚å¸¸ç±»ï¼Œæ­£åˆ™ï¼ŒNIOç­‰<br>2004.9 JDK1.5å‘å¸ƒï¼Œå¼•å…¥æ³›å‹ï¼ŒåŠ¨æ€æ³¨è§£ï¼Œæšä¸¾ï¼Œå¯å˜é•¿å‚æ•°ï¼Œforeachç­‰ã€‚æœ€åä¸€ä¸ªæ”¯æŒWin9xçš„Javaç‰ˆæœ¬<br>2006.12 JDK1.6å‘å¸ƒã€‚J2EEç­‰æ›´åã€‚JVMå†…éƒ¨æœºåˆ¶è¾ƒå¤§ä¿®æ”¹ã€‚åŒå¹´Javaå¤§ä¼šSunå®£å¸ƒJavaå¼€æºï¼ŒOpenJDKå»ºç«‹<br>2009.4 Oracleæ”¶è´­Sunå…¬å¸</p><p>Dalvik VM Googleå®ç°çš„androidæ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚<br><a href="https://juejin.im/post/59b7fa8cf265da066d3323bb">DalvikVMä¸JVMçš„åŒºåˆ«</a></p><h2 id="å¯¹è±¡å¤´-18-11"><a href="#å¯¹è±¡å¤´-18-11" class="headerlink" title="å¯¹è±¡å¤´(18-11)"></a>å¯¹è±¡å¤´(18-11)</h2><p>å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€åˆ†ä¸º å¯¹è±¡å¤´ï¼Œå®ä¾‹æ•°æ®ï¼Œå¯¹é½å¡«å……ã€‚<br>å¯¹è±¡å¤´åŒ…æ‹¬ å¯¹è±¡è‡ªèº«è¿è¡Œæ—¶æ•°æ®ï¼ˆMark World 64Bitsï¼‰ï¼Œç±»å‹æŒ‡é’ˆã€‚å¯¹è±¡æŒ‡å‘å…¶ç±»çš„å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ˆç”¨äºç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ï¼‰ã€‚<br>é”æ ‡å¿—ä½ï¼Œä¹Ÿä¿å­˜åœ¨å¯¹è±¡å¤´ä¸­ã€‚é”æ ‡å¿—ä½ä¸æ˜¯å¦åå‘é” å¯¹åº”åˆ°å”¯ä¸€çš„é”çŠ¶æ€</p><div class="note default">            <p>æœªå®Œå¾…ç»­â€¦</p>          </div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JDK-JRE-JVM&quot;&gt;&lt;a href=&quot;#JDK-JRE-JVM&quot; class=&quot;headerlink&quot; title=&quot;JDK JRE JVM&quot;&gt;&lt;/a&gt;JDK JRE JVM&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/2019/07/17/JVM%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/JDKandJRE.png&quot; alt=&quot;JDK JRE JVMå…³ç³»å›¾&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>IdeaæŠ¥é”™ï¼šé™åˆ¶å£ä»¤æ–‡ä»¶è¯»å–è®¿é—®æƒé™</title>
    <link href="http://codeminions.github.io/2019/07/07/%E5%85%B3%E9%97%ADJVM%E5%AE%89%E5%85%A8%E8%BF%9E%E6%8E%A5/"/>
    <id>http://codeminions.github.io/2019/07/07/%E5%85%B3%E9%97%ADJVM%E5%AE%89%E5%85%A8%E8%BF%9E%E6%8E%A5/</id>
    <published>2019-07-06T16:00:00.000Z</published>
    <updated>2019-07-08T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜èƒŒæ™¯"><a href="#é—®é¢˜èƒŒæ™¯" class="headerlink" title="é—®é¢˜èƒŒæ™¯"></a>é—®é¢˜èƒŒæ™¯</h1><p>æ­¤å…ˆè¯´æ˜ï¼Œæˆ‘çš„æ“ä½œç³»ç»Ÿç¯å¢ƒæ˜¯deepin-15.10.2ã€‚Tomcatç‰ˆæœ¬æ˜¯9.0.13<br>æŸå¤©å°†JetBrains-Ideaä»182æ›´æ–°åˆ°191åï¼ˆæ˜¯äº†ä¸€ç™¾å¹´æ²¡æ›´æ–°äº†ï¼‰ï¼Œæ­£å¸¸å¯åŠ¨tomcatè·‘ç¨‹åºæ—¶å€™ï¼Œçªç„¶åˆ·çš„ä¸€ä¸‹æŠ¥é”™</p><blockquote><p><strong>é”™è¯¯: å¿…é¡»é™åˆ¶å£ä»¤æ–‡ä»¶è¯»å–è®¿é—®æƒé™: â€¦/.IntelliJIdea/system/tomcat/Test/jmxremote.password </strong></p></blockquote><p>ï¼ˆå¿ƒæ€¥çš„æ—å‹ç›´æ¥çœ‹ä¸‹è¾¹æ–¹æ¡ˆå§ï¼Œä¸ç€æ€¥å¯ä»¥çœ‹çœ‹æˆ‘çš„è§£å†³è¿‡ç¨‹å™¢..ï¼‰</p><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><p><strong>åœ¨TomcatHome/bin/catalina.shæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼Œä½ç½®å¤§æ¦‚åœ¨åŸæ–‡æ³¨é‡Šä»¥åï¼Œæ‰€æœ‰ä»£ç ä»¥å‰</strong></p><blockquote><p>JAVA_OPTS=â€$JAVA_OPTS -Dcom.ibm.team.jfs.app.oauth.OAuthHelper.disableSecureCookies=trueâ€<br>JAVA_OPTS=â€$JAVA_OPTS -Dcom.sun.management.jmxremote.authenticate=falseâ€<br>JAVA_OPTS=â€$JAVA_OPTS -Dcom.sun.management.jmxremote.ssl=falseâ€</p></blockquote><a id="more"></a><h1 id="å¡«å‘è¿‡ç¨‹"><a href="#å¡«å‘è¿‡ç¨‹" class="headerlink" title="å¡«å‘è¿‡ç¨‹"></a>å¡«å‘è¿‡ç¨‹</h1><p>ï¼ˆå¼€å§‹è®²æ•…äº‹â€¦ï¼‰<br>ä¸€å¼€å§‹æˆ‘æ˜¯ä¸€è„¸æ‡µé€¼å•Šï¼Œä»æ¥æ²¡è§è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œé‚Googleã€‚åŸæ¥æ˜¯å› ä¸º <strong>jmxremote.password æ–‡ä»¶ä¸­å­˜å‚¨äº†æ˜æ–‡å¯†ç ï¼Œæ‰€ä»¥æ­¤æ–‡ä»¶å¿…é¡»åªèƒ½ç”±æ‰€æœ‰è€…è¯»å–ï¼Œå¦åˆ™ç¨‹åºå°†å…³é—­å¹¶æŠ¥é”™</strong> ã€‚<br>è™½ç„¶ä¸çŸ¥é“ç»†èŠ‚ä½†æ˜¯æ—¢ç„¶å¦‚æ­¤chmodèµ°ä¸€æ³¢â€¦å¹¶æœªç”Ÿæ•ˆï¼Ÿï¼Ÿé‡å¤å‡ æ¬¡ï¼Œä»å¦‚æ­¤ã€‚<br>åœ¨linuxä¸­æ‘¸çˆ¬æ»šæ‰“å¤šï¼ˆ== 2ï¼‰å¹´çš„æˆ‘é¢„æ„Ÿåˆ°äº†ï¼Œè¿™å¤§æ¦‚åˆæ˜¯ä¸€ä¸ªå¤§å‘ã€‚æœä¸å…¶ç„¶ï¼ŒGoogleå¾—çŸ¥ï¼Œ <strong>linuxæ— æ³•ä¿®æ”¹å…¶ä»–ç£ç›˜åˆ†åŒºçš„æ–‡ä»¶ï¼Œchmodåªèƒ½åœ¨linuxåˆ†åŒºä¸‹ç”Ÿæ•ˆï¼Œå¦åˆ™æƒé™æ”¹ä¸äº†,å› ä¸ºFATæˆ–NTFSæ–‡ä»¶ç³»ç»Ÿä¸­æ ¹æœ¬æ²¡æœ‰linuxä¸­çš„è¿™äº›æ–‡ä»¶æƒé™çš„æ¦‚å¿µ</strong> ã€‚ <a href="http://www.voidcn.com/article/p-aoxdvfon-tc.html">å‡ºå¤„åœ¨æ­¤</a><br>ä½†æ˜¯æœç´¢åŸæ¥é—®é¢˜ç»™å‡ºçš„è§£å†³æ–¹æ³•éƒ½æ˜¯ä¿®æ”¹æ–‡ä»¶æƒé™ï¼ŒWindowsä¸‹ç›´æ¥ä¿®æ”¹æˆ–è€…linuxä¸‹chmodæ“ä½œï¼Œå¹¶ä¸èƒ½ä¸ºæˆ‘æ‰€ç”¨ã€‚äºæ˜¯ç°æºœæºœçš„æ»šå›å»ç”¨182ç‰ˆæœ¬ã€‚<br>ä¸‰ä¸ªæœˆåä¹Ÿå°±æ˜¯ä»Šå¤©ï¼Œåˆšé‡è£…äº†Deepinåˆè§£å†³äº†ä¸€å †å‘çš„æˆ‘å†³å®šï¼ˆé¡ºä¾¿ï¼‰ç›´é¢è¿™ä¸ªé—®é¢˜ã€‚è¿™æ¬¡æˆ‘å†³å®šä»ä¸¤ä¸ªç‰ˆæœ¬ä¸ºä»€ä¹ˆä¼šä¸ä¸€æ ·çœ‹èµ·ã€‚å¯¹æ¯”äº†ä¸‹å‰é¢ç›®å½•ä¸‹å„ä¸ªå·¥ç¨‹çš„æ–‡ä»¶ï¼Œå‘ç°åªæœ‰æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ä¸‹ä¼šæœ‰jmxremote.passwordå’Œjmxremote.accessã€‚è¿™å…¶å®æ˜¯tomcatä½¿ç”¨JMXå®‰å…¨è¿æ¥æ‰€éœ€çš„å®‰å…¨è®¤è¯è¯ä¹¦å¯†ç ã€‚JMXä½¿ç”¨SSLè®¤è¯å¯åŠ¨åï¼Œå³å¯ä»¥ä½¿ç”¨httpsè®¿é—®tomcatæœåŠ¡å™¨äº†ã€‚<a href="https://www.ibm.com/support/knowledgecenter/zh/SSYMRC_6.0.1/com.ibm.jazz.repository.web.admin.doc/topics/t_server_mon_tomcat_option3.html">é…ç½®æ–¹æ³•</a></p><blockquote><p>è‡ªJava 6å¼€å§‹ï¼ŒJavaç¨‹åºå¯åŠ¨æ—¶éƒ½ä¼šåœ¨JVMå†…éƒ¨å¯åŠ¨ä¸€ä¸ªJMX agentï¼ŒJMX agentä¼šå¯åŠ¨ä¸€ä¸ªMBean serverç»„ä»¶ï¼ŒæŠŠMBeansï¼ˆJavaå¹³å°æ ‡å‡†çš„MBean + ä½ è‡ªå·±åˆ›å»ºçš„MBeanï¼‰æ³¨å†Œåˆ°å®ƒé‡Œé¢ï¼Œç„¶åæš´éœ²ç»™JMX clientç®¡ç†ã€‚ç®€å•æ¥è¯´å°±æ˜¯æ¯ä¸ªJavaç¨‹åºéƒ½å¯ä»¥é€šè¿‡JMXæ¥è¢«JMX clientç®¡ç†ï¼Œè€Œä¸”è¿™ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨å‘ç”Ÿçš„ã€‚è€ŒVisualVmå°±æ˜¯ä¸€ä¸ªJMX Clientã€‚<br>VisualVmèƒ½å¤Ÿè‡ªåŠ¨å‘ç°æœ¬æœºçš„Javaè¿›ç¨‹ï¼Œå¦‚æœè¦ç›‘æ§è¿œç¨‹ä¸»æœºä¸Šçš„Javaè¿›ç¨‹åˆ™éœ€è¦æ˜¾å¼åœ°é…ç½®JMXè¿æ¥ã€‚</p></blockquote><p>é™„ï¼š <a href="https://chanjarster.github.io/post/visualvm-remote-monitoring-jmx/">JMXç›‘å¬Javaç¨‹åº</a>/<a href="https://www.ibm.com/support/knowledgecenter/zh/SSHS8R_8.0.0/com.ibm.worklight.installconfig.doc/install_config/t_optional_config_app_server_tomcat.html">tomcaté…ç½®JMXè¿æ¥</a>çš„é…ç½®æ–¹æ³•</p><p>æˆ‘è®¤ä¸º,ä¹Ÿå°±æ˜¯è¯´ç¨‹åºé»˜è®¤å¼€å¯å®‰å…¨æ€§è®¾ç½®ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ°è¯ä¹¦å’Œå¯†ç ï¼Œé‚£å¦‚æœæˆ‘ä¸éœ€è¦å®‰å…¨è¿æ¥ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å…³é—­å®‰å…¨æ€§è®¾ç½®ï¼Œèƒ½åƒä»¥å‰ä¸€æ ·ä¸éœ€è¦è¯ä¹¦å¯†ç ï¼Œé‚£ä¹ˆå¯†ç æ–‡ä»¶çš„æƒé™ä¹Ÿå°±æ— æ‰€æ„ä¹‰äº†å‘¢ã€‚<br>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å…³é—­å®‰å…¨è¿æ¥å‘¢ã€‚æˆ‘çŒœæµ‹å¤§æ¦‚æ˜¯ä¿®æ”¹Javaçš„è¿è¡Œæ—¶å‚æ•°ã€‚é—®é¢˜åˆæ¥äº†ï¼Œç›´æ¥åœ¨Ideaä¸­æ·»åŠ è¿è¡Œæ—¶å‚æ•°å—ï¼Ÿæ„Ÿè§‰æœ‰ç‚¹è ¢ã€‚ã€‚<br>æˆ‘åˆæƒ³èµ·tomcatå¯åŠ¨æ—¶ä¸€èˆ¬æ˜¯è°ƒç”¨çš„å¯åŠ¨æ–‡ä»¶å¯åŠ¨ï¼Œä¹Ÿè®¸å°±æ˜¯åœ¨é‚£é‡Œæ–°å¢äº†å¯¹å®‰å…¨æ€§è®¾ç½®çš„ä¿®æ”¹ã€‚<br>æ‰“å¼€TomcatHome/bin/ï¼Œæ‰¾åˆ°startup.shï¼ˆstartup.batæ˜¯Windowsç”¨çš„å¯åŠ¨æ–‡ä»¶ï¼Œå…¶å®Windowsä¸‹æ˜¯æ‰§è¡Œbin/tomcat.exeï¼Œç›´æ¥è¯»å–çš„æ³¨å†Œè¡¨çš„å€¼ï¼‰ï¼Œæ‰“å¼€ä¸€çœ‹å¥½åƒæ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ç±»ä¼¼è¿è¡Œæ—¶å‚æ•°çš„é…ç½®æ ¼å¼ã€‚åæ¥å‘ç°tomcatå¯åŠ¨æ—¶ä¸»è¦è°ƒç”¨çš„æ–‡ä»¶æ˜¯Catalina.shæ–‡ä»¶ï¼Œæ˜¯å®ƒäº†ã€‚ï¼ˆä¸€å¼€å§‹æ˜¯å¬åˆ°ç›´æ¥åœ¨cetenv.shæ–‡ä»¶ä¸Šæ·»åŠ å‚æ•°ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶çš„è‡ªå·±æ–°å»ºå³å¯ï¼Œæ–°å»ºå®Œè¿è¡Œå‘ç°è‡ªåŠ¨è¯»å–è¯¥æ–‡ä»¶äº†ï¼Œä½†æ˜¯å‚æ•°éƒ½æ˜¯not foundä¸çŸ¥é“æ€ä¹ˆå›äº‹..ï¼‰<br>åˆç¿»äº†å¥½ä¹…å…³äºåœ¨å¯åŠ¨æ–‡ä»¶ä¸­æ·»åŠ å‚æ•°çš„æ ¼å¼ï¼Œå› ä¸ºæºæ–‡ä»¶ä¸­éƒ½æ˜¯ä»¥è„šæœ¬è¯­è¨€çš„å½¢å¼æ·»åŠ çš„ã€‚</p><p>ç»†åŒ–é—®é¢˜åï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆã€‚<br><a href="https://www.ibm.com/support/knowledgecenter/zh/SSYMRC_6.0.1/com.ibm.jazz.repository.web.admin.doc/topics/t_server_mon_tomcat_option1.html">ä¸ä½¿ç”¨å®‰å…¨è®¤è¯åœ¨Tomcatä¸Šæ¿€æ´»JMX</a><br><a href="https://www.ibm.com/support/knowledgecenter/zh/SSYMRC_6.0.0/com.ibm.jazz.install.doc/topics/t_disable_server_certificates.html">ç¦ç”¨å®‰å…¨è¯ä¹¦è®¾ç½®</a></p><p>äºæ˜¯æ·»åŠ ä»¥ä¸‹å‚æ•°åˆ°catalina.shä¸­ï¼Œä½ç½®å¤§æ¦‚åœ¨åŸæ–‡æ³¨é‡Šä»¥åï¼Œä»£ç å¼€å§‹çš„åœ°æ–¹å§(æˆ‘è§‰å¾—å¤§æ¦‚æ˜¯æ— æ‰€è°“çš„)..</p><blockquote><p><strong>JAVA_OPTS=â€$JAVA_OPTS -Dcom.ibm.team.jfs.app.oauth.OAuthHelper.disableSecureCookies=trueâ€</strong><br><strong>JAVA_OPTS=â€$JAVA_OPTS -Dcom.sun.management.jmxremote.authenticate=falseâ€    // å…³é—­èº«ä»½éªŒè¯</strong><br><strong>JAVA_OPTS=â€$JAVA_OPTS -Dcom.sun.management.jmxremote.ssl=falseâ€     // å…³é—­sslè¿æ¥</strong></p></blockquote><p>åŠ å®Œè¿è¡Œï¼Œå±…ç„¶æˆåŠŸäº†</p><h1 id="å¼€å§‹å­å­"><a href="#å¼€å§‹å­å­" class="headerlink" title="å¼€å§‹å­å­"></a>å¼€å§‹å­å­</h1><p>æ„ŸåŠ¨ä¹‹ä½™ï¼Œå‘ç°å³ä½¿ä¸ä¿®æ”¹catalina.shï¼Œåœ¨182ç‰ˆæœ¬ä¸­è¿™äº›å‚æ•°ä¹Ÿä¼šåœ¨è¿è¡Œæ—¥å¿—ä¸­æ‰“å°å‡ºæ¥ï¼Œè¯´æ˜182ä¸­è¿™æ˜¯é»˜è®¤çš„è®¾ç½®ï¼Œä½†æ˜¯191ä¸­å°±ç‚¸äº†ã€‚<br>å› æ­¤æˆ‘çŒœæµ‹ï¼Œå¤§æ¦‚æ˜¯191æ–°ç‰ˆæœ¬ä¸­å°†å®‰å…¨è¿æ¥è®¾ä¸ºäº†å¿…é¡»ã€‚ä½†è¯¢é—®å‘ç°å‘¨å›´å°ä¼™ä¼´éƒ½æ²¡æœ‰è§è¿‡ç›¸å…³çš„é—®é¢˜ï¼ˆæœ‰æˆ‘ä¹Ÿä¸ç”¨å›°æ‰°è¿™ä¹ˆä¹…äº†ï¼‰ï¼Œä½†ä¹Ÿè®¸æ˜¯å› ä¸ºä»–ä»¬ä½¿ç”¨çš„Windowsæ‰€ä»¥å¯†ç æ–‡ä»¶çš„è¯»å–æƒé™æ²¡æœ‰é—®é¢˜æ‰€ä»¥æ²¡æœ‰å‘ç°è¿™ä¸ªæ›´æ–°å‘¢ï¼Ÿ<br>ç®—äº†ï¼Œè‡³å°‘é—®é¢˜æ€»ç®—è§£å†³ï¼ˆè‡³å°‘ç›®å‰çœ‹æ¥æ˜¯è¿™æ ·çš„ï¼‰ï¼Œå†™äº†ä¸‰ä¸ªæœˆçš„åç«¯ï¼Œæˆ‘éƒ½å·®ç‚¹å¿˜äº†è‡ªå·±å…¶å®æ˜¯ä¸ªandroidç¨‹åºå‘˜äº†ã€‚ã€‚ï¼ˆè™½è¯´ç¨‹åºå‘˜ä¸è¯¥ç•Œå®šè‡ªå·±çš„æŠ€æœ¯æ ˆå§ï¼Œï¼Œï¼‰</p><h1 id="æ³¨ï¼š"><a href="#æ³¨ï¼š" class="headerlink" title="æ³¨ï¼š"></a>æ³¨ï¼š</h1><p>ç”±äºè¯¥é—®é¢˜ç ”ç©¶è¿‡ç¨‹ä¸­ï¼Œå…³è”åˆ°å¤ªå¤šçš„ç»†èŠ‚å’Œåº•å±‚é—®é¢˜ï¼Œæ‰€ä»¥æ–‡ä¸­æœ‰äº›éƒ¨åˆ†æ˜¯è‡ªå·±ç»“åˆæŠ€æœ¯æ–‡ç« çš„è§è§£ï¼Œæœ‰å¯èƒ½ä¸æ˜¯æ­£è§£ï¼ˆè¿™äº›éƒ¨åˆ†æˆ‘éƒ½æœ‰å†™æ˜ï¼‰è€Œä¸”æœ€åæ–¹æ¡ˆä¸ä¸€å®šæ˜¯å‡†ç¡®è§£å†³äº†ç—‡ç»“ï¼Œä½†å®ƒç¡®ç¡®å®å®è§£å†³äº†æˆ‘çš„é—®é¢˜æ¥çš„ã€‚å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸»è¦ä¸ºäº†è®°å½•è¿™æ¬¡å¡«å‘ä¹‹æ—…æ‰€é‡åˆ°åŠäº†è§£åˆ°çš„çŸ¥è¯†ï¼Œå› æ­¤æœ‰å…¶ä»–æ„è§å¸Œæœ›å‘æˆ‘æå‡ºäº¤æµã€‚</p><p>åšå®¢çš„ç•™è¨€åŠŸèƒ½è¿˜æ²¡æœ‰æŠ˜è…¾ï¼Œæ¬¢è¿å‘æˆ‘[é‚®ç®± <a href="mailto:xiaohuangren028@gmail.com">xiaohuangren028@gmail.com</a>]å•Šã€‚</p><hr><p>å…³äºä¿®æ”¹å¯†ç æ–‡ä»¶çš„æƒé™ï¼Œåæ¥æˆ‘åˆæ‰¾åˆ°<a href="https://www.cnblogs.com/Dhouse/p/7827175.html">è¿™ç¯‡åšå®¢</a>ï¼Œå…¶ä¸­æåˆ°æƒé™ä¿®æ”¹å¤±è´¥è¿˜æœ‰å¯èƒ½æ˜¯å› ä¸ºæ–¹å¼é”™è¯¯ã€‚</p><blockquote><p>åœ¨é…ç½®JMXè¿œç¨‹è®¿é—®çš„æ—¶å€™ï¼Œè®¾ç½®jmxremote.passwordæ–‡ä»¶æƒé™ï¼Œä¿®æ”¹è¯¥æ–‡ä»¶æ—¶æ·»åŠ å†™æƒé™ï¼Œchmod +w jmxremote.password ï¼Œæ”¾å¼€è§’è‰²ä¿¡æ¯é‚£ä¿©è¡Œçš„æ³¨é‡Šï¼Œä¿å­˜ï¼Œå†ä½¿ç”¨chmod 0400 jmxremote.password<br>è¿™æ ·å°±æ˜¯å®ƒæ­£ç¡®çš„æƒé™è®¾ç½®<br>jmxremote.password åœ¨jdk/jre/lib/management/ä¸‹ï¼Œjmxremote.password.templateå¤åˆ¶ï¼Œå»æ‰.templateåç¼€</p></blockquote><p>å¦‚æœä¸æ˜¯å› ä¸ºæŒ‚è½½åŸå› æ— æ³•ä¿®æ”¹æƒé™çš„ï¼Œå¯ä»¥å°è¯•ä»¥ä¸Šæ–¹æ³•ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#é—®é¢˜èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜èƒŒæ™¯&quot;&gt;&lt;/a&gt;é—®é¢˜èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;æ­¤å…ˆè¯´æ˜ï¼Œæˆ‘çš„æ“ä½œç³»ç»Ÿç¯å¢ƒæ˜¯deepin-15.10.2ã€‚Tomcatç‰ˆæœ¬æ˜¯9.0.13&lt;br&gt;æŸå¤©å°†JetBrains-Ideaä»182æ›´æ–°åˆ°191åï¼ˆæ˜¯äº†ä¸€ç™¾å¹´æ²¡æ›´æ–°äº†ï¼‰ï¼Œæ­£å¸¸å¯åŠ¨tomcatè·‘ç¨‹åºæ—¶å€™ï¼Œçªç„¶åˆ·çš„ä¸€ä¸‹æŠ¥é”™&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é”™è¯¯: å¿…é¡»é™åˆ¶å£ä»¤æ–‡ä»¶è¯»å–è®¿é—®æƒé™: â€¦/.IntelliJIdea/system/tomcat/Test/jmxremote.password &lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆå¿ƒæ€¥çš„æ—å‹ç›´æ¥çœ‹ä¸‹è¾¹æ–¹æ¡ˆå§ï¼Œä¸ç€æ€¥å¯ä»¥çœ‹çœ‹æˆ‘çš„è§£å†³è¿‡ç¨‹å™¢..ï¼‰&lt;/p&gt;
&lt;h1 id=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#è§£å†³æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;è§£å†³æ–¹æ¡ˆ&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;åœ¨TomcatHome/bin/catalina.shæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼Œä½ç½®å¤§æ¦‚åœ¨åŸæ–‡æ³¨é‡Šä»¥åï¼Œæ‰€æœ‰ä»£ç ä»¥å‰&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JAVA_OPTS=â€$JAVA_OPTS -Dcom.ibm.team.jfs.app.oauth.OAuthHelper.disableSecureCookies=trueâ€&lt;br&gt;JAVA_OPTS=â€$JAVA_OPTS -Dcom.sun.management.jmxremote.authenticate=falseâ€&lt;br&gt;JAVA_OPTS=â€$JAVA_OPTS -Dcom.sun.management.jmxremote.ssl=falseâ€&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
    <category term="IDE" scheme="http://codeminions.github.io/tags/IDE/"/>
    
  </entry>
  
  <entry>
    <title>Deepinåˆä¸€æ¬¡æŠ˜è…¾è®°å½•</title>
    <link href="http://codeminions.github.io/2019/07/05/deepin%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/"/>
    <id>http://codeminions.github.io/2019/07/05/deepin%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/</id>
    <published>2019-07-04T16:00:00.000Z</published>
    <updated>2019-07-09T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Deepin-15-10-2-stable"><a href="#Deepin-15-10-2-stable" class="headerlink" title="Deepin 15.10.2 stable"></a>Deepin 15.10.2 stable</h2><p>æœ€è¿‘åˆé‡è£…äº†ä¸€éDeepinï¼Œå…¨æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬Deepin15.10.1ï¼Œç„¶åæ›´åˆ°15.10.2ï¼ˆèµ¶ä¸Šè¿™å‡ å¤©Deepinæ›´æ–°äº†ï¼‰ã€‚æ­¤æ¬¡å®‰è£…æŠ˜è…¾äº†ä¸¤å¤©ï¼Œè§£å†³äº†å¾ˆå¤šä¹‹å‰çš„é—®é¢˜ï¼Œå½“ç„¶ï¼Œä¹Ÿå‡ºç°å¾ˆå¤šä¹‹å‰æ²¡æœ‰å‡ºç°è¿‡çš„é—®é¢˜ï¼ˆæµæ³ªï¼‰ã€‚<br>å¾—åˆ°äº†å¾ˆå¤šç»éªŒä½“ä¼šï¼Œç‰¹æ­¤è®°å½•<br>ï¼ˆè¿™å‡ å¤©ä¸æ–­åœ°å¼ºåˆ¶å…³æœºï¼Œæ„Ÿè§‰æˆ‘çš„æœºæ¢°ç¡¬ç›˜å‘½ä¸ä¹…çŸ£å™¢â€¦TATï¼‰<br><a id="more"></a></p><h2 id="å®‰å…¨æ¨¡å¼å®‰è£…ç³»ç»Ÿ"><a href="#å®‰å…¨æ¨¡å¼å®‰è£…ç³»ç»Ÿ" class="headerlink" title="å®‰å…¨æ¨¡å¼å®‰è£…ç³»ç»Ÿ"></a>å®‰å…¨æ¨¡å¼å®‰è£…ç³»ç»Ÿ</h2><p>é¦–å…ˆæ˜¯å…¨æ–°å®‰è£…ï¼Œæ—¥å¸¸å‡ºç°å¡åœ¨DeepinLogoå¤„æ­»æœºçš„ç°è±¡ã€‚é‡æ–°å¼€æœºï¼ˆæ²¡é”™å°±æ˜¯å…ˆå¼ºåˆ¶é‡å¯ï¼‰ï¼Œé€‰æ‹©install faillsafeï¼Œè¿›å…¥å®‰å…¨æ¨¡å¼ã€‚ï¼ˆè¿™é‡Œæœ‰æ—¶å€™ä¹Ÿä¼šè¿›ä¸å»ï¼Œå¤šè¯•ä¸¤æ¬¡å°±è¿›å»äº†ï¼‰ã€‚<br>ï¼ˆè¿™é‡Œå‡ºç°è¿‡ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼šå®‰å…¨æ¨¡å¼ä¸‹é•¿æ—¶é—´ä¸æ“ä½œï¼Œç³»ç»Ÿå¾…æœºï¼Œå”¤é†’åæ˜¯ç”¨æˆ·ç™»å½•é¡µï¼Œéœ€è¦è¾“å…¥å¯†ç ï¼Œæˆ‘éƒ½æ²¡æœ‰è®¾ç½®ç”¨æˆ·å’Œå¯†ç æ€ä¹ˆç™»å½•ï¼Ÿï¼Ÿè’™äº†å¥½å‡ ä¸ªæ‰€è°“åˆå§‹å¯†ç åï¼Œæ”¾å¼ƒï¼Œå¼ºåˆ¶é‡å¯ï¼‰<br>å®‰å…¨æ¨¡å¼ä¸­ï¼Œæˆ‘æ˜¯å…ˆå®‰è£…äº†intel-microcodeï¼Œå› ä¸ºåœ¨å¼€æœºæ—¥å¿—é‡Œä¼šçœ‹åˆ°update microcode to version 0x52</p><blockquote><p>sudo apt-get install intel-microcode</p></blockquote><p>æ³¨ï¼šä½¿ç”¨å…¶ä»–æºï¼ˆå¦‚ä¸Šäº¤å¤§æºï¼‰å¯èƒ½ä¼šæ— æ³•å®šä½è¯¥åŒ…ï¼Œå»ºè®®å…ˆåˆ‡å›å®˜æ–¹æºã€‚<br>ç„¶åæ›´æ–°ç‹¬æ˜¾é©±åŠ¨ï¼Œå› ä¸º15.5ç‰ˆæœ¬çš„æ—¶å€™ï¼Œä¸€æ›´æ–°ç³»ç»Ÿå†…æ ¸å°±ä¼šå´©ï¼Œå³å¡åœ¨logoæ— æ³•è¿›å…¥ç³»ç»Ÿï¼Œç›´åˆ°æ›´æ–°äº†æ˜¾å¡é©±åŠ¨ï¼Œåæ‰èƒ½æ­£å¸¸æ—¶å€™æ–°å†…æ ¸</p><blockquote><p>sudo apt-get install nvidia-driver    // å…¶å®æ˜¯å®‰è£…äº†ä¸€ä¸ªé—­æºçš„æ˜¾å¡é©±åŠ¨</p></blockquote><p>ç„¶åç‚¹å‡»æ¡Œé¢çš„å®‰è£…ç¨‹åºå¼€å§‹å®‰è£…ã€‚<br>å®‰è£…æˆåŠŸåå³å¯è¿›å…¥ç³»ç»Ÿã€‚æ³¨æ„é‡æ–°å®‰è£…ä¸€ä¸‹intel-microcodeï¼Œå’Œæ˜¾å¡é©±åŠ¨ï¼Œå› ä¸ºå®‰å…¨æ¨¡å¼çš„å®‰è£…çš„è½¯ä»¶ï¼Œåˆ°æ­£å¸¸ç³»ç»Ÿå°±æ²¡æœ‰äº†ï¼ˆå®‰å…¨æ¨¡å¼å¤§æ¦‚å°±ç±»ä¼¼windowsä¸‹çš„PEç³»ç»Ÿå§ï¼‰ã€‚</p><h2 id="æ›´æ–°è½¯ä»¶åˆ—è¡¨åŠæ›´æ¢é•œåƒæº"><a href="#æ›´æ–°è½¯ä»¶åˆ—è¡¨åŠæ›´æ¢é•œåƒæº" class="headerlink" title="æ›´æ–°è½¯ä»¶åˆ—è¡¨åŠæ›´æ¢é•œåƒæº"></a>æ›´æ–°è½¯ä»¶åˆ—è¡¨åŠæ›´æ¢é•œåƒæº</h2><p>æ¥ç€æ›´æ–°è½¯ä»¶åˆ—è¡¨</p><blockquote><p>sudo apt-get update</p></blockquote><p>æ³¨æ„ï¼Œåœ¨æ­¤ä¹‹å‰å¯ä»¥å…ˆæ›´æ¢ä¸€ä¸‹è½¯ä»¶æºï¼Œå› ä¸ºå®˜æ–¹æºä¸€èˆ¬ä¼šæ¯”è¾ƒæ…¢ã€‚æ®è¯´åœ¨å¹¿ä¸œåŠæ²³å—ç­‰åœ°ï¼Œä¸Šäº¤å¤§çš„é•œåƒæºä¼šæ¯”è¾ƒå¿«ã€‚å¦å¤–åä¸ºäº‘åœ¨ç¤¾åŒºå£ç¢‘ä¹Ÿä¸é”™ã€‚æ›´æ¢æ–¹å¼å¦‚ä¸‹ï¼Œè¿›å…¥/etc/apt/source.listç›´æ¥æ·»åŠ (1)æˆ–å‘½ä»¤è¡Œæ·»åŠ (2)ï¼š</p><blockquote><ol><li>deb [by-hash=force] <a href="http://ftp.sjtu.edu.cn/deepin">http://ftp.sjtu.edu.cn/deepin</a> panda main contrib non-free</li><li>sudo sed -i â€œs@<a href="http://packages.deepin.com/deepin@https://mirrors.huaweicloud.com/deepin@g&quot;">http://packages.deepin.com/deepin@https://mirrors.huaweicloud.com/deepin@g&quot;</a> /etc/apt/sources.list</li></ol></blockquote><p>è¯¥å‘½ä»¤ä¼šé¡ºå¸¦æ›´æ–°ç³»ç»Ÿã€‚</p><h2 id="ç‹¬æ˜¾é—®é¢˜å¼€å§‹ä½œå¦–"><a href="#ç‹¬æ˜¾é—®é¢˜å¼€å§‹ä½œå¦–" class="headerlink" title="ç‹¬æ˜¾é—®é¢˜å¼€å§‹ä½œå¦–"></a>ç‹¬æ˜¾é—®é¢˜å¼€å§‹ä½œå¦–</h2><p>å‡çº§å®Œç³»ç»Ÿåï¼Œåˆå‡ºç°é—®é¢˜äº†ã€‚<br>æˆ‘çš„ddeæ¡Œé¢çªç„¶é€€åˆ°2Dæ¨¡å¼ï¼Œå³å…³é—­äº†æ¡Œé¢åŠ¨ç”»ï¼Œè€Œä¸”ç³»ç»Ÿè½¯ä»¶æ‰“å¼€åéƒ½ä¼šå‡ºç°åšåšçš„é»‘æ¡†æ¡†ã€‚ç»æŸ¥ç¡®å®æ˜¯å¤„äº2Dæ¨¡å¼ä¸”æ— æ³•åˆ‡æ¢ä¸º3Dæ¨¡å¼ã€‚æˆ‘å°±æ„Ÿè§‰ï¼Œå¿…ç„¶åˆæ˜¯æ˜¾å¡å‡ºäº†é—®é¢˜ã€‚æŠ˜è…¾å¤§åŠå¤©ï¼Œåˆ‡æ¢ä¸ºå¤§é»„èœ‚æ˜¾å¡é©±åŠ¨æ–¹æ¡ˆå¯ä»¥è§£å†³é—®é¢˜ã€‚<br>åˆ‡æ¢æ–¹å¼å¯ä»¥é€šè¿‡</p><blockquote><p>sudo apt-get install bumblebee-nvidia nvidia-driver nvidia-settings</p></blockquote><p>å®‰è£…å¤§é»„èœ‚é©±åŠ¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç³»ç»Ÿè½¯ä»¶â€œæ˜¾å¡é©±åŠ¨ç®¡ç†å™¨â€ä¸­è‡ªåŠ¨å®‰è£…åˆ‡æ¢ã€‚å…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š<br><a href="https://wiki.deepin.org/index.php?title=Deepin%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0NVIDIA%E9%A9%B1%E5%8A%A8&amp;language=en">å®‰è£…å¤§é»„èœ‚æ˜¾å¡é©±åŠ¨</a><br>å…¶å®ä¸€å¼€å§‹åˆ‡æ¢æ˜¯æœ‰ç‚¹æ…Œçš„ï¼Œå› ä¸ºåœ¨ç¤¾åŒºè§è¿‡æœ‰æ—å‹è£…äº†å¤§é»„èœ‚ä»¥åæ— æ³•è¿›å…¥ç³»ç»Ÿã€‚</p><h2 id="å¾…æœºåæ— æ³•å”¤é†’"><a href="#å¾…æœºåæ— æ³•å”¤é†’" class="headerlink" title="å¾…æœºåæ— æ³•å”¤é†’"></a>å¾…æœºåæ— æ³•å”¤é†’</h2><p>ç„¶è€Œåæ¥ç¡®å®å‡ºç°é—®é¢˜äº†ã€‚æˆ‘å‘ç°å¾…æœºæ—¶é—´è¿‡é•¿ï¼Œæ˜¾ç¤ºå±å…³é—­åï¼Œæ— æ³•å”¤é†’æ˜¾ç¤ºå±ã€‚è™½ç„¶å¯ä»¥å¬åˆ°ç³»ç»Ÿç¡®å®å·²ç»å¯åŠ¨ï¼Œå¯ä»¥å¬åˆ°wifiè¿æ¥çš„æç¤ºéŸ³ï¼Œä½†æ˜¯æ˜¾ç¤ºå±å°±æ˜¯ä¸äº®ã€‚<br>è¿™ä¸ªåœ¨ç¤¾åŒºå·²ç»è‡­åæ˜­è‘—çš„å¾…æœºåæ— æ³•å”¤é†’çš„é—®é¢˜ï¼Œä»Šå¤©ç»ˆäºè¢«æˆ‘é‡ä¸Šäº†ã€‚ã€‚TAT<br>åœ¨ç¤¾åŒºçœ‹äº†å¾ˆå¤šå¸–å­ï¼Œéƒ½è¯´æ²¡æœ‰å¯ä»¥çœŸæ­£è§£å†³çš„æ–¹å¼ï¼Œæ— éå¼ºåˆ¶è®¡ç®—æœºä¸å¾…æœºï¼ˆï¼Ÿï¼Ÿï¼‰ã€‚æœŸé—´æˆ‘ä¹Ÿè¯•è¿‡åˆ‡æ¢å›å¼€æºé©±åŠ¨ï¼Œå³é»˜è®¤çš„é©±åŠ¨ï¼Œä½†æ˜¯æ²¡æœ‰æ•ˆæœï¼Œäºæ˜¯æœ€ååªå¾—åˆ‡å›å¤§é»„èœ‚ï¼ˆå¬è¯´è¯¥é©±åŠ¨çœç”µï¼‰ï¼Œç„¶åâ€¦å¼ºåˆ¶ä¸å¾…æœºâ€¦<br>æ„Ÿè§‰å¾ˆå¤šé—®é¢˜æŒ–åˆ°åè¾¹éƒ½èƒ½å’Œç‹¬æ˜¾æ‰¯ä¸Šå…³ç³»å•Šâ€¦</p><h2 id="pcspkré—®é¢˜ï¼Ÿï¼Ÿ"><a href="#pcspkré—®é¢˜ï¼Ÿï¼Ÿ" class="headerlink" title="pcspkré—®é¢˜ï¼Ÿï¼Ÿ"></a>pcspkré—®é¢˜ï¼Ÿï¼Ÿ</h2><p>è¿™ä¸€æ¬¡æ›´æ–°ç³»ç»Ÿåï¼Œè¿˜å‡ºç°ä¸€ä¸ªæ–°çš„ç°è±¡ï¼Œå‡ºç°ç³»ç»ŸLogoåï¼Œä¸€èˆ¬å°±è¿›å…¥ç”¨æˆ·ç™»å½•ç•Œé¢äº†ï¼Œä½†ç°åœ¨åœ¨Logoé¡µè¿˜ä¼šæ‰“å°logï¼Œå…¶ä¸­æ˜¯ä¸€æ¡æŠ¥é”™ä¿¡æ¯</p><blockquote><p>Error: Driver â€˜pcspkrâ€™ is already registered, abortingâ€¦</p></blockquote><p>ç”šè‡³åœ¨å‰å‡ æ¬¡å¼€æœºæ—¶ï¼Œå‡ºç°è¯¥logåï¼Œæ˜¯æœ‰ä¸€å®šå‡ ç‡è¿›ä¸å»ç³»ç»Ÿçš„ã€‚ã€‚è²Œä¼¼upateä»¥åå°±å¯ä»¥ç¨³å®šè¿›å…¥äº†ä½†æ˜¯æ¯æ¬¡åˆ°é‚£ä¸ªåœ°æ–¹è¿˜æ˜¯ä¼šæœ‰åœé¡¿çš„æ ·å­ã€‚æ¯æ¬¡éƒ½ä¼šæä¸€å£æ°”æ‹…å¿ƒç³»ç»Ÿåˆè¿™æ ·æŒ‚æ‰äº†ã€‚<br>æŸ¥äº†ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªè·Ÿèœ‚é¸£å™¨ç›¸å…³çš„å†…æ ¸æ¨¡å—ï¼Œæƒ³æƒ³ç¡®å®Deepinåœ¨é‚£ä¸ªæ—¶é—´ä¼šè°ƒèœ‚é¸£å™¨å‘å‡ºè¿›å…¥ç³»ç»Ÿçš„æç¤ºéŸ³ã€‚æ‰¾äº†ä¸€åœˆæ‰¾åˆ°çš„è§£å†³æ–¹å¼æ˜¯</p><ol><li><blockquote><p>aptitude install alsa-base<br>echo blacklist snd-pcsp &gt;&gt; /etc/modprobe.d/alsa-base-blacklist</p></blockquote></li><li><p>æ®è¯´è¯¥æ–¹æ³•åŸç†æ˜¯å±è”½è¯¥æ¨¡å—</p><blockquote><p>echo -e â€œ# Used for shielding pcspkr module, this module seems to be related to buzzer.\nblacklist pcspkrâ€ | sudo tee /etc/modprobe.d/blacklist-pcspkr.conf</p></blockquote></li></ol><p>ç”±äºæˆ‘è™½ç„¶å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯åæ¥éƒ½ä¸å½±å“å¯åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ²¡æŠ˜è…¾è¿™ä¸ªé—®é¢˜ã€‚ä½†æ®ç¤¾åŒºçš„å¸–å­æ‰€è¯´ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•è²Œä¼¼éƒ½æ²¡èƒ½æ ¹æ²»è¯¥é—®é¢˜â€¦</p><hr><h2 id="è‡­åæ˜­è‘—çš„Logoæ­»æœºé—®é¢˜"><a href="#è‡­åæ˜­è‘—çš„Logoæ­»æœºé—®é¢˜" class="headerlink" title="è‡­åæ˜­è‘—çš„Logoæ­»æœºé—®é¢˜"></a>è‡­åæ˜­è‘—çš„Logoæ­»æœºé—®é¢˜</h2><p>å…³äºå¼€æœºæ—¶å¡åœ¨logoå¤„çš„é—®é¢˜ï¼Œå¦æ‰¾åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š<br>å¼€æœºååœ¨grubå¼•å¯¼æ—¶ï¼Œé€‰æ‹©deepinç³»ç»Ÿï¼Œå…ˆä¸è¦æŒ‰Enterï¼ŒæŒ‰eé”®è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><blockquote><p>åœ¨èœå•ä¸­çš„ä»£ç ä¸­ï¼Œæ‰¾åˆ°å€’æ•°ç¬¬äºŒè¡Œï¼Œä¼šå‡ºç°å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼š<br>linux /vmlinuz-4.15.0-29deepin-generic root=UUID=b66d8ffa-aed9-466c-bc12-6bb801e45901 ro splash quiet<br>è¡¨ç¤ºåŠ è½½çš„linuxå†…æ ¸æ–‡ä»¶ï¼Œåé¢æ˜¯å†…æ ¸çš„å‚æ•°ï¼Œå„é¡¹å«ä¹‰ä¸º<br>rootå‘Šè¯‰å†…æ ¸æ ¹åˆ†åŒºçš„è®¾å¤‡<br>roè¡¨ç¤ºåœ¨è®¾å¤‡å¯åŠ¨æ—¶ä¸ºread-onlyï¼Œå¦‚æœæ˜¯rwè¡¨ç¤ºread-write<br>splashè¡¨ç¤ºå¼€æœºåŠ¨ç”»<br>quietè¡¨ç¤ºåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åªæœ‰é‡è¦ä¿¡æ¯æ˜¾ç¤ºï¼Œç±»ä¼¼ç¡¬ä»¶è‡ªæ£€çš„æ¶ˆæ¯ä¸ä¼šæ˜¾ç¤ºquietè¡¨ç¤ºåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åªæœ‰é‡è¦ä¿¡æ¯æ˜¾ç¤ºï¼Œç±»ä¼¼ç¡¬ä»¶è‡ªæ£€çš„æ¶ˆæ¯ä¸ä¼šæ˜¾ç¤º<br>singleä»¥å•ç”¨æˆ·æ¨¡å¼ç™»å½•ï¼Œä¸€èˆ¬ç”¨äºä¿®æ”¹ç³»ç»Ÿï¼Œæ¯”å¦‚deepinå¯†ç å¿˜è®°äº†ç­‰ç­‰ã€‚singleä»¥å•ç”¨æˆ·æ¨¡å¼ç™»å½•ï¼Œä¸€èˆ¬ç”¨äºä¿®æ”¹ç³»ç»Ÿï¼Œæ¯”å¦‚deepinå¯†ç å¿˜è®°äº†ç­‰ç­‰ã€‚<br><strong>åœ¨quietçš„åé¢ç©ºä¸€æ ¼åŠ ä¸Šå¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼šacpi_osi=! acpi=â€windows 2009â€ï¼ŒæŒ‰F10ä¿å­˜å³å¯ã€‚è¿™æ—¶ä¼šé‡æ–°å¼€å§‹ç™»å½•deepinç³»ç»Ÿï¼Œè€å¿ƒç­‰å¾…è¿›å…¥æ¡Œé¢ã€‚</strong></p></blockquote><p>ä½†æ˜¯ä»¥ä¸Šæ“ä½œåªèƒ½æˆåŠŸè¿›å…¥ç³»ç»Ÿä¸€æ¬¡ï¼Œå¤§æ¦‚å› ä¸ºä»¥ä¸Šå¯¹grubçš„è®¾ç½®å…¶å®å†™åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½å¯¹ä»¥åçš„è¿›å…¥å¥æ•ˆã€‚<br>æ‰€ä»¥éœ€è¦å¯¹grubçš„è®¾ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæ°¸ä¹…æ€§è§£å†³è¯¥é—®é¢˜ã€‚è¿›å…¥ç³»ç»Ÿä»¥åï¼Œæ‰§è¡Œ</p><blockquote><p>sudo gedit /boot/grub/grub.cfg</p></blockquote><p>æ‰“å¼€é…ç½®æ–‡ä»¶ã€‚å¦‚æœç³»ç»Ÿæ²¡æœ‰geditå¯ä»¥ä½¿ç”¨vimæˆ–nanoæ‰“å¼€ï¼Œä»åœ¨åŸæ¥çš„ä½ç½®åŠ ä¸Šï¼Œ<strong>acpi_osi=! acpi=â€windows 2009â€</strong>ã€‚<br>æ®è¯´è¿™ç§æ“ä½œçš„åŸç†æ˜¯ï¼šæ—§ç‰ˆçš„BIOSæ— æ³•æ‰“è¯†åˆ«ä¸€äº›æ–°ç‰ˆçš„linuxå†…æ ¸ï¼Œæ‰€ä»¥æ·»åŠ è¯¥è¯­å¥è®©ç³»ç»Ÿâ€œè¯¯ä»¥ä¸ºâ€æ˜¯Windowsç³»ç»Ÿã€‚<br><a href="https://blog.csdn.net/HuaCode/article/details/83216338">å‚è€ƒåŸæ–‡</a></p><hr><h2 id="å¤‡æ³¨ï¼šç³»ç»Ÿçš„æ˜¾å¡é©±åŠ¨ç®¡ç†å™¨ä¸­åŸæœ¬æœ‰ä¸€ä¸ªNV-PRIMEæ–¹æ¡ˆï¼Œç”¨äºæ··åˆæ˜¾å¡çš„é©±åŠ¨ã€‚ä½†15-10-2stableç‰ˆæœ¬ä¸­å®˜æ–¹ç¦ç”¨äº†primeæ–¹æ¡ˆï¼ˆæš‚æ—¶ï¼‰ã€‚"><a href="#å¤‡æ³¨ï¼šç³»ç»Ÿçš„æ˜¾å¡é©±åŠ¨ç®¡ç†å™¨ä¸­åŸæœ¬æœ‰ä¸€ä¸ªNV-PRIMEæ–¹æ¡ˆï¼Œç”¨äºæ··åˆæ˜¾å¡çš„é©±åŠ¨ã€‚ä½†15-10-2stableç‰ˆæœ¬ä¸­å®˜æ–¹ç¦ç”¨äº†primeæ–¹æ¡ˆï¼ˆæš‚æ—¶ï¼‰ã€‚" class="headerlink" title="å¤‡æ³¨ï¼šç³»ç»Ÿçš„æ˜¾å¡é©±åŠ¨ç®¡ç†å™¨ä¸­åŸæœ¬æœ‰ä¸€ä¸ªNV-PRIMEæ–¹æ¡ˆï¼Œç”¨äºæ··åˆæ˜¾å¡çš„é©±åŠ¨ã€‚ä½†15.10.2stableç‰ˆæœ¬ä¸­å®˜æ–¹ç¦ç”¨äº†primeæ–¹æ¡ˆï¼ˆæš‚æ—¶ï¼‰ã€‚"></a>å¤‡æ³¨ï¼šç³»ç»Ÿçš„æ˜¾å¡é©±åŠ¨ç®¡ç†å™¨ä¸­åŸæœ¬æœ‰ä¸€ä¸ªNV-PRIMEæ–¹æ¡ˆï¼Œç”¨äºæ··åˆæ˜¾å¡çš„é©±åŠ¨ã€‚ä½†15.10.2stableç‰ˆæœ¬ä¸­å®˜æ–¹ç¦ç”¨äº†primeæ–¹æ¡ˆï¼ˆæš‚æ—¶ï¼‰ã€‚</h2><p><strong>å¦‚æœå¯¹ä¸Šè¿°é—®é¢˜æœ‰è¾ƒå¥½çš„è§£å†³æ–¹å¼æˆ–çœ‹æ³•ï¼Œæ¬¢è¿äº¤æµ[é‚®ç®± <a href="mailto:xiaohuangren028@gmail.com">xiaohuangren028@gmail.com</a>]</strong></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Deepin-15-10-2-stable&quot;&gt;&lt;a href=&quot;#Deepin-15-10-2-stable&quot; class=&quot;headerlink&quot; title=&quot;Deepin 15.10.2 stable&quot;&gt;&lt;/a&gt;Deepin 15.10.2 stable&lt;/h2&gt;&lt;p&gt;æœ€è¿‘åˆé‡è£…äº†ä¸€éDeepinï¼Œå…¨æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬Deepin15.10.1ï¼Œç„¶åæ›´åˆ°15.10.2ï¼ˆèµ¶ä¸Šè¿™å‡ å¤©Deepinæ›´æ–°äº†ï¼‰ã€‚æ­¤æ¬¡å®‰è£…æŠ˜è…¾äº†ä¸¤å¤©ï¼Œè§£å†³äº†å¾ˆå¤šä¹‹å‰çš„é—®é¢˜ï¼Œå½“ç„¶ï¼Œä¹Ÿå‡ºç°å¾ˆå¤šä¹‹å‰æ²¡æœ‰å‡ºç°è¿‡çš„é—®é¢˜ï¼ˆæµæ³ªï¼‰ã€‚&lt;br&gt;å¾—åˆ°äº†å¾ˆå¤šç»éªŒä½“ä¼šï¼Œç‰¹æ­¤è®°å½•&lt;br&gt;ï¼ˆè¿™å‡ å¤©ä¸æ–­åœ°å¼ºåˆ¶å…³æœºï¼Œæ„Ÿè§‰æˆ‘çš„æœºæ¢°ç¡¬ç›˜å‘½ä¸ä¹…çŸ£å™¢â€¦TATï¼‰&lt;br&gt;</summary>
    
    
    
    <category term="OS" scheme="http://codeminions.github.io/categories/OS/"/>
    
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
    <category term="Deepin" scheme="http://codeminions.github.io/tags/Deepin/"/>
    
  </entry>
  
  <entry>
    <title>Viewäº‹ä»¶ä½“ç³»ä¹‹æ»‘åŠ¨å­¦ä¹ å¿ƒå¾—</title>
    <link href="http://codeminions.github.io/2019/04/30/View%E6%BB%91%E5%8A%A8%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/"/>
    <id>http://codeminions.github.io/2019/04/30/View%E6%BB%91%E5%8A%A8%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/</id>
    <published>2019-04-29T16:00:00.000Z</published>
    <updated>2019-10-27T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚"><a href="#æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚" class="headerlink" title="æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚"></a>æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚</h2><p>Viewä¸€èˆ¬æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼Œ<strong>ScrollTo/ScrollByå®ç°</strong>ï¼Œ<strong>åŠ¨ç”»å®ç°</strong>ï¼Œ<strong>æ”¹å˜å¸ƒå±€å‚æ•°å®ç°</strong>ã€‚æ³¨æ„å…¶ä¸­é™¤äº†åŠ¨ç”»ä»¥å¤–ï¼Œå…¶ä½™ä¸¤ç§éƒ½æ˜¯éå¼¹æ€§çš„æ»‘åŠ¨ï¼Œå³æ˜¯â€œç¬ç§»â€ã€‚</p><h2 id="ScrollTo-ScrollByå®ç°"><a href="#ScrollTo-ScrollByå®ç°" class="headerlink" title="ScrollTo/ScrollByå®ç°"></a>ScrollTo/ScrollByå®ç°</h2><p>è¿™æ˜¯Viewå†…éƒ¨çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸»è¦åŒºåˆ«å°±æ˜¯ç»å¯¹æ»‘åŠ¨å’Œç›¸å¯¹æ»‘åŠ¨ã€‚å³</p><blockquote><p>ScrollTo()ï¼ŒåŸºäºæ‰€ä¼ é€’å‚æ•°çš„ç»å¯¹æ»‘åŠ¨<br>ScrollBy()ï¼ŒåŸºäºå½“å‰ä½ç½®çš„ç›¸å¯¹æ»‘åŠ¨  </p></blockquote><a id="more"></a><p>è¿™æ˜¯ä¹¦ä¸­çš„åŸè¯ï¼Œä½†æ˜¯æˆ‘ä¸€å¼€å§‹å´æ²¡æœ‰ç†è§£å¯¹â€œç»å¯¹æ»‘åŠ¨â€ã€‚æ‰€è°“ç›¸å¯¹æ»‘åŠ¨æŒ‡çš„æ˜¯ç›¸å¯¹äºå½“å‰ä½ç½®çš„æ»‘åŠ¨ï¼Œæ‰€è°“ç»å¯¹æ»‘åŠ¨æŒ‡çš„æ˜¯contentåœ¨Viewä¸­çš„ç»å¯¹ä½ç½®ï¼Œè€Œéæˆ‘ä¸€å¼€å§‹ç†è§£çš„ç›¸å¯¹äºå±å¹•çš„ç»å¯¹ä½ç½®ã€‚å…³äºè¿™ä¸€ç‚¹ä¸ç†è§£çš„è¯ï¼Œåè¾¹ä¼šæœ‰ä¸€ä¸ªå°ä¾‹ï¼ˆkengï¼‰å­ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set the scrolled position of your view. This will cause a call to</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> #onScrollChanged(int, int, int, int)&#125; and the view will be</span></span><br><span class="line"><span class="comment"> * invalidated.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> x the x position to scroll to</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> y the y position to scroll to</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scrollTo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mScrollX != x || mScrollY != y) &#123;</span><br><span class="line">        <span class="keyword">int</span> oldX = mScrollX;</span><br><span class="line">        <span class="keyword">int</span> oldY = mScrollY;</span><br><span class="line">        mScrollX = x;</span><br><span class="line">        mScrollY = y;</span><br><span class="line">        invalidateParentCaches();</span><br><span class="line">        onScrollChanged(mScrollX, mScrollY, oldX, oldY);</span><br><span class="line">        <span class="keyword">if</span> (!awakenScrollBars()) &#123;</span><br><span class="line">            postInvalidateOnAnimation();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Move the scrolled position of your view. This will cause a call to</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> #onScrollChanged(int, int, int, int)&#125; and the view will be</span></span><br><span class="line"><span class="comment"> * invalidated.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> x the amount of pixels to scroll by horizontally</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> y the amount of pixels to scroll by vertically</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scrollBy</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    scrollTo(mScrollX + x, mScrollY + y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ç”±æºç å¾ˆæ˜æ˜¾çœ‹å‡ºï¼ŒScrollBy()å°±æ˜¯ç›´æ¥è°ƒç”¨äº†ScrollTo()ï¼ŒScrollTo()ä¸­å°±åªæ˜¯è®°å½•äº†ä¸€ä¸‹å½“å‰æ»‘åŠ¨çš„åæ ‡ç„¶åå¯¹Viewè¿›è¡Œäº†<strong>é‡ç»˜</strong>ï¼ˆpostInvalidateOnAnimationä¸­è§¦å‘é‡ç»˜ï¼‰ã€‚ä¸”åœ¨é‡ç»˜ä¹‹å‰è¿˜ä¼šè°ƒç”¨ <strong>onScrollChanged()</strong> æ–¹æ³•ã€‚<br>å…³äºå…¶ä¸­mScrollXï¼Œå’ŒmScrollYå±æ€§ï¼Œç›´æ¥ç”»äº†ä¸€ä¸ªç¤ºæ„å›¾æ–¹ä¾¿ç†è§£ã€‚<br><img src="/2019/04/30/View%E6%BB%91%E5%8A%A8%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/Scroller.jpg" alt="Content-View"></p><p>å…³äºScrollToæ–¹æ³•ååˆ†éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼š<br><strong>ScrollTo()æ–¹æ³•åªèƒ½å¯¹Viewä¸­çš„Contentè¿›è¡Œæ“ä½œç§»åŠ¨è€Œä¸èƒ½ç§»åŠ¨Viewçš„ä½ç½®</strong><br>Viewä¸­çš„Contentï¼Œä¾‹å¦‚TextViewçš„Contentå³ä¸ºæ–‡æœ¬ï¼ŒImageViewçš„Contentå³ä¸ºDrawableã€‚</p><h2 id="åŠ¨ç”»å®ç°"><a href="#åŠ¨ç”»å®ç°" class="headerlink" title="åŠ¨ç”»å®ç°"></a>åŠ¨ç”»å®ç°</h2><p>è¿™ç§å®ç°åœ¨æ•ˆæœä¸Šè¾ƒäºå…¶ä»–ä¸¤ç§æœ‰æ‰€ä¸åŒï¼ŒåŠ¨ç”»å¯ä»¥é€šè¿‡è®¾ç½®ç§»åŠ¨æ—¶é—´å®ç°å¼¹æ€§æ»‘åŠ¨çš„æ•ˆæœã€‚åŠ¨ç”»åœ¨å®è´¨ä¸Šå…¶å®æ˜¯å¯¹translationX/translationYè¿›è¡Œæ“ä½œã€‚</p><h3 id="ViewåŠ¨ç”»"><a href="#ViewåŠ¨ç”»" class="headerlink" title="ViewåŠ¨ç”»"></a>ViewåŠ¨ç”»</h3><p>ViewåŠ¨ç”»éœ€è¦åœ¨resä¸‹å»ºç«‹animæ–‡ä»¶å¤¹ï¼Œé€šè¿‡xmlæ–‡ä»¶å®šä¹‰åŠ¨ç”»å½¢å¼ã€‚<br>ç”±äºViewåŠ¨ç”»å®é™…ä¸Šæ˜¯å¯¹Viewçš„å½±åƒè¿›è¡Œæ“ä½œï¼Œå› æ­¤åœ¨ä½¿ç”¨ä¸Šæœ‰è®¸å¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹</p><ul><li>éœ€è¦æŒ‡å®š <strong>android:fillAfter=â€trueâ€</strong>ï¼Œå¦åˆ™åŠ¨ç”»å®Œæˆä»¥åå…¶ç»“æœä¼šæ¶ˆå¤±ï¼Œå›åˆ°åŸçŠ¶ã€‚</li><li>ç”±äºæ“ä½œçš„æ˜¯å½±åƒï¼Œæ‰€ä»¥ä¸èƒ½çœŸæ­£æ”¹å˜Viewçš„å®½é«˜ã€‚å› æ­¤åŠ¨ç”»ç»“æŸåï¼Œ<strong>æ–°çš„ä½ç½®å­˜åœ¨åªæ˜¯ä¸€ä¸ªå½±åƒ</strong>ï¼ŒViewçœŸæ­£çš„ä½ç½®å…¶å®è¿˜åœ¨åŸå§‹ä½ç½®ã€‚è¿™åœ¨ç”¨æˆ·äº¤äº’ä¸Šæ˜¾ç„¶æ˜¯æ˜¯ä¸€ä¸ªå¾ˆè¦å‘½çš„é—®é¢˜ï¼Œä¾‹å¦‚å¯¹ä¸€ä¸ªè®¾ç½®äº†ç‚¹å‡»äº‹ä»¶çš„Buttonè¿›è¡Œäº†viewåŠ¨ç”»ï¼Œå°†æ— æ³•åœ¨å½±å“ä¸Šå“åº”ç‚¹å‡»äº‹ä»¶ï¼Œè€Œæ˜¯è¿˜è¦ <strong>å›åˆ°åŸå§‹ä½ç½®è§¦å‘</strong>ã€‚</li></ul><h3 id="å±æ€§åŠ¨ç”»"><a href="#å±æ€§åŠ¨ç”»" class="headerlink" title="å±æ€§åŠ¨ç”»"></a>å±æ€§åŠ¨ç”»</h3><p>å±æ€§åŠ¨ç”»åˆ™æ˜¯ç›´æ¥åœ¨ä»£ç ä¸­å¯¹Viewè¿›è¡ŒåŠ¨ç”»æ“ä½œã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹translationXè¿›è¡Œæ“ä½œ 0-&gt;100</span></span><br><span class="line">ObjectAnimator.ofFloat(tatrgetView,<span class="string">&quot;translationX&quot;</span>, <span class="number">0</span>, <span class="number">100</span>).setDuration(<span class="number">100</span>).start();</span><br></pre></td></tr></table></figure><br>android3.0ä»¥å‰ï¼ŒViewåŠ¨ç”»éœ€è¦ä½¿ç”¨nineoldandroidsåº“å®ç°ï¼Œä½†å…¶å®ç°çš„å±æ€§åŠ¨ç”»ï¼Œå®è´¨ä¸Šè¿˜æ˜¯ViewåŠ¨ç”»ï¼Œå› æ­¤ä¹Ÿå…·æœ‰ViewåŠ¨ç”»çš„ç¼ºç‚¹ã€‚ä½†Android3.0ä»¥ä¸Šçš„å±æ€§åŠ¨ç”»åˆ™å¯ä»¥è§£å†³ä»¥ä¸Šçš„æ‰€æœ‰é—®é¢˜ã€‚</p><h4 id="ã€Šè‰ºæœ¯æ¢ç´¢ã€‹æä¾›çš„è§£å†³ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯è§„é¿ï¼‰ViewåŠ¨ç”»ç¼ºç‚¹çš„å‚è€ƒæ–¹æ¡ˆ"><a href="#ã€Šè‰ºæœ¯æ¢ç´¢ã€‹æä¾›çš„è§£å†³ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯è§„é¿ï¼‰ViewåŠ¨ç”»ç¼ºç‚¹çš„å‚è€ƒæ–¹æ¡ˆ" class="headerlink" title="ã€Šè‰ºæœ¯æ¢ç´¢ã€‹æä¾›çš„è§£å†³ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯è§„é¿ï¼‰ViewåŠ¨ç”»ç¼ºç‚¹çš„å‚è€ƒæ–¹æ¡ˆ"></a>ã€Šè‰ºæœ¯æ¢ç´¢ã€‹æä¾›çš„è§£å†³ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯è§„é¿ï¼‰ViewåŠ¨ç”»ç¼ºç‚¹çš„å‚è€ƒæ–¹æ¡ˆ</h4><p>åœ¨ç»ˆç‚¹ä½ç½®è®¾ç½®ä¸€ä¸ªä¸åŸå§‹Viewå¤–è§‚ä¸ç‚¹å‡»äº‹ä»¶éƒ½ç›¸åŒçš„Viewï¼ŒåŠ¨ç”»ç»“æŸä»¥åé€šè¿‡visibilityæ˜¾ç¤ºã€‚</p><h2 id="æ”¹å˜å¸ƒå±€å‚æ•°å®ç°"><a href="#æ”¹å˜å¸ƒå±€å‚æ•°å®ç°" class="headerlink" title="æ”¹å˜å¸ƒå±€å‚æ•°å®ç°"></a>æ”¹å˜å¸ƒå±€å‚æ•°å®ç°</h2><p>æ”¹å˜å¸ƒå±€å‚æ•°å³è®¾ç½®LayoutParamsã€‚ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å½¢ï¼Œä¸€æ˜¯ç›´æ¥è®¾ç½®ç›®æ ‡Viewçš„LayoutParamsï¼ˆmarginï¼‰å®ç°æ»‘åŠ¨ï¼ŒäºŒæ˜¯æ”¹å˜æ—è¾¹å¸ƒå±€çš„Layoutparamsï¼ˆwidthï¼‰å®ç°æ»‘åŠ¨ï¼Œè€Œå®é™…ä¸ŠViewæ˜¯è¢«â€œæŒ¤å¼€â€çš„ã€‚ä¹¦ä¸­ä¹Ÿä»‹ç»äº†ä¸¤ç§é‡æ–°è®¾ç½®Layoutparamsçš„æ–¹æ³•ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä¸€èˆ¬ä½¿ç”¨</span></span><br><span class="line">view.setLayoutParams(lp);</span><br><span class="line"><span class="comment">// æ¶¨è§è¯†</span></span><br><span class="line">view.requestLayout();</span><br></pre></td></tr></table></figure></p><h2 id="ä¸€ä¸ªå°å‘"><a href="#ä¸€ä¸ªå°å‘" class="headerlink" title="ä¸€ä¸ªå°å‘"></a>ä¸€ä¸ªå°å‘</h2><p>å­¦ä¹ äº†ç›¸å…³çŸ¥è¯†ä»¥åï¼Œæˆ‘å†³å®šå†™ä¸€ä¸ªå°demoæ£€éªŒ+åŠ æ·±ä¸€ä¸‹å­¦ä¹ æˆæœã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">btn_by.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        ObjectAnimator.ofFloat(viewP, <span class="string">&quot;translationX&quot;</span>, <span class="number">0</span>, <span class="number">300</span>).setDuration(<span class="number">1000</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">btn_to.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        viewP.scrollTo(-<span class="number">100</span>, -<span class="number">600</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>é€»è¾‘ååˆ†ç®€å•ï¼Œå°±æ˜¯ä¸¤ä¸ªViewç”¨æ¥æ»‘åŠ¨ï¼Œä¸ºäº†ä½“ç°æ»‘åŠ¨å‰åä¸ç”¨æˆ·çš„äº¤äº’æƒ…å†µï¼Œç»™ä»–ä»¬è®¾ç½®äº†ç‚¹å‡»äº‹ä»¶å¹¶é€šè¿‡ç‚¹å‡»äº‹ä»¶è®©è‡ªå·±æ»‘åŠ¨ã€‚å…¶ä¸­viewPæŒ‡çš„æ˜¯ä¸¤ä¸ªviewï¼ˆButtonï¼‰çš„çˆ¶å¸ƒå±€ï¼ˆLinearLayoutï¼‰ï¼Œå³ä¸¤ä¸ªviewæ—¶viewPçš„contentã€‚<br>ä¸€å¼€å§‹ä¸€åˆ‡å®ç°æ•ˆæœéƒ½åœ¨æˆ‘çš„é¢„è®¡ä¹‹ä¸­ï¼Œä½†å½“æˆ‘å°†ç‚¹å‡»ä»£ç æ”¹ä¸ºä»¥ä¸Šä»£ç æ—¶ï¼Œå‡ºç°äº†ä¸æˆ‘æƒ³è±¡å®Œå…¨ä¸åŒçš„æ•ˆæœ<br><img src="/2019/04/30/View%E6%BB%91%E5%8A%A8%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/æ¼”ç¤º1.gif" alt="æ¼”ç¤º1"><br>é¦–å…ˆbtn_toä½¿ç”¨ScrollTo()ï¼Œä¸åº”è¯¥ä¸¤æ¬¡ç§»åŠ¨åˆ°ä¸¤ä¸ªä¸åŒçš„ä½ç½®ï¼Œå…¶æ¬¡btn_byå¹¶ä¸æ˜¯æŒ‰åŠ¨ç”»ä¸­è®¾ç½®çš„ä»0ä½ç½®å‡ºå‘ã€‚çº ç»“åŠå¤©åï¼Œè®¾ç½®äº†èƒŒæ™¯è‰²ï¼Œé—®é¢˜å°±æ— å¤„éå½¢äº†ã€‚<br><img src="/2019/04/30/View%E6%BB%91%E5%8A%A8%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/æ¼”ç¤º2.gif" alt="æ¼”ç¤º2"><br>å¯ä»¥å¾ˆæ˜æ˜¾çš„å‘ç°ï¼Œbtn_byç‚¹å‡»ä»¥åï¼ŒåŠ¨ç”»æ˜¯ä½œç”¨åœ¨æ•´ä¸ªviewPä¸Šçš„ï¼Œæ‰€ä»¥ç‚¹å‡»btn_toä¹‹åï¼Œæ²¡æœ‰ç§»åŠ¨æˆ–è€…ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ä¸ºå³è¾¹å¹¶æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºbtn_toç›¸å¯¹äºå…¶çˆ¶å¸ƒå±€æ¥è¯´ç¡®å®æ˜¯åœ¨æŒ‡å®šä½ç½®äº†ã€‚<br>è™½ç„¶è¿™åªæ˜¯ä¸€ä¸ªå°ä¹Œé¾™ï¼Œä½†æç¤ºäº†æˆ‘ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><strong>åªæœ‰ScrollTo()æ–¹æ³•æ˜¯ä½œç”¨åœ¨contentä¸Šçš„</strong>ï¼ŒåŠ¨ç”»å’ŒLayoutParamséƒ½èƒ½ç›´æ¥ä½œç”¨äºViewã€‚è¿™ä¸€ç‚¹å‡ºé—®é¢˜å…¶é—´æ˜¯æœ‰æ„è¯†åˆ°çš„ï¼Œä½†æˆ‘ä¸€ç›´ä»¥ä¸ºScrollToæ‰€è°“çš„ç»å¯¹æ»‘åŠ¨æŒ‡çš„æ˜¯ç»å¯¹äºå±å¹•ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸‹ä¸€ç‚¹è¦è¯´çš„</li><li><strong>ScrollTo()æ‰€è°“çš„ç»å¯¹æ»‘åŠ¨æ˜¯ç›¸å¯¹äºçˆ¶å¸ƒå±€ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨ScrollTo()çš„Viewï¼‰è€Œè¨€</strong>ï¼Œè€Œä¸æ˜¯æˆ‘ä¸€å¼€å§‹è®¤ä¸ºçš„ç›¸å¯¹äºå±å¹•çš„åæ ‡ã€‚å‡ºäº†è¿™ä¸ªé—®é¢˜ï¼Œå†å›å¤´å»çœ‹é‚£ä¸ªContent-Viewçš„å›¾ï¼Œä¸€åˆ‡å°±éƒ½å¾ˆæ˜äº†äº†ã€‚</li></ul><p>æ€»ç»“ï¼š</p><ul><li>ScrollTo/ScrollByæ–¹æ³•æ“ä½œçš„æ˜¯Viewçš„Contentä¸Šï¼Œè€Œå…¶ä»–ä¸¤ç§æ–¹å¼åˆ™æ˜¯ç›´æ¥ä½œç”¨åœ¨Viewä¸Šè¾¹çš„ã€‚ä¸”è¿™ç§æ–¹å¼ä¸å½±å“å†…éƒ¨å…ƒç´ çš„äº¤äº’ï¼ˆç‚¹å‡»äº‹ä»¶ï¼‰</li><li>ä½¿ç”¨ViewåŠ¨ç”»æ—¶æ³¨æ„è®¾ç½®fillAfterä»¥â€œä¿å­˜â€åŠ¨ç”»ç»“æœï¼Œæ³¨æ„ViewåŠ¨ç”»æ— æ³•ç§»åŠ¨å®ä½“åªèƒ½ç§»åŠ¨å½±åƒå¯¹äº¤äº’çš„å½±å“ã€‚å› æ­¤ViewåŠ¨ç”»é€‚ç”¨äºä¸éœ€è¦ä¸ç”¨æˆ·äº¤äº’çš„æƒ…å†µ</li><li>Android3.0ä»¥å‰å®ç°å±æ€§åŠ¨ç”»éœ€è¦ä½¿ç”¨åˆ°çš„nineoldandroidsåº“å®è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº†ViewåŠ¨ç”»</li><li>ä¸€äº›å¤æ‚çš„æ•ˆæœåªæœ‰åŠ¨ç”»å¯ä»¥å®ç°</li></ul><p>Psï¼šé€šè¿‡å¯¹Viewä¸€äº›åŸç†ä¸Šçš„å­¦ä¹ ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šçš„æå‡äº†å¯¹Viewæœºåˆ¶çš„ç†è§£ï¼Œä¹Ÿå¯¹å¾ˆå¤šä¹‹å‰å†™ä»£ç æ—¶å€™ä½¿ç”¨åˆ°çš„ä¸œè¥¿ç†è§£æ›´åŠ æ¸…æ™°é€å½»ã€‚</p><p>çŸ¥å…¶ç„¶ï¼Œä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶ï¼</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚&quot;&gt;&lt;a href=&quot;#æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚&quot; class=&quot;headerlink&quot; title=&quot;æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚&quot;&gt;&lt;/a&gt;æœ€è¿‘å­¦ä¹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„Viewäº‹ä»¶ä½“ç³»ï¼Œå¯¹Viewæœ‰äº†è·Ÿå¤šçš„ç†è§£å’Œå¿ƒå¾—ä½“ä¼šï¼Œé‚è®°å½•ï¼ŒåŠ æ·±ç†è§£ä¹Ÿä¾¿åŒäººäº¤æµã€‚&lt;/h2&gt;&lt;p&gt;Viewä¸€èˆ¬æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼Œ&lt;strong&gt;ScrollTo/ScrollByå®ç°&lt;/strong&gt;ï¼Œ&lt;strong&gt;åŠ¨ç”»å®ç°&lt;/strong&gt;ï¼Œ&lt;strong&gt;æ”¹å˜å¸ƒå±€å‚æ•°å®ç°&lt;/strong&gt;ã€‚æ³¨æ„å…¶ä¸­é™¤äº†åŠ¨ç”»ä»¥å¤–ï¼Œå…¶ä½™ä¸¤ç§éƒ½æ˜¯éå¼¹æ€§çš„æ»‘åŠ¨ï¼Œå³æ˜¯â€œç¬ç§»â€ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ScrollTo-ScrollByå®ç°&quot;&gt;&lt;a href=&quot;#ScrollTo-ScrollByå®ç°&quot; class=&quot;headerlink&quot; title=&quot;ScrollTo/ScrollByå®ç°&quot;&gt;&lt;/a&gt;ScrollTo/ScrollByå®ç°&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯Viewå†…éƒ¨çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸»è¦åŒºåˆ«å°±æ˜¯ç»å¯¹æ»‘åŠ¨å’Œç›¸å¯¹æ»‘åŠ¨ã€‚å³&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ScrollTo()ï¼ŒåŸºäºæ‰€ä¼ é€’å‚æ•°çš„ç»å¯¹æ»‘åŠ¨&lt;br&gt;ScrollBy()ï¼ŒåŸºäºå½“å‰ä½ç½®çš„ç›¸å¯¹æ»‘åŠ¨  &lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>Androidæ‰‹åŠ¿ç›‘å¬å…¥é—¨</title>
    <link href="http://codeminions.github.io/2019/03/06/Android%E6%89%8B%E5%8A%BF%E7%9B%91%E5%90%AC%E5%85%A5%E9%97%A8/"/>
    <id>http://codeminions.github.io/2019/03/06/Android%E6%89%8B%E5%8A%BF%E7%9B%91%E5%90%AC%E5%85%A5%E9%97%A8/</id>
    <published>2019-03-05T16:00:00.000Z</published>
    <updated>2019-08-11T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚"><a href="#ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚" class="headerlink" title="ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚"></a>ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚</h2><p>Androidä¸­ä¸»è¦æœ‰ä¸¤ç§æ‰‹åŠ¿è¡Œä¸ºï¼Œä¸€æ˜¯å®˜æ–¹æä¾›çš„ç‰¹å®šæ‰‹åŠ¿ï¼Œè€Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ‰‹åŠ¿ã€‚æœ¬æ–‡ä¸»è¦è®²å…³äºandroidæä¾›çš„æ‰‹åŠ¿äº¤äº’ã€‚</p><h2 id="æ‰‹åŠ¿äº¤äº’é¡ºåº"><a href="#æ‰‹åŠ¿äº¤äº’é¡ºåº" class="headerlink" title="æ‰‹åŠ¿äº¤äº’é¡ºåº"></a>æ‰‹åŠ¿äº¤äº’é¡ºåº</h2><p>Androidä¸­çš„æ‰‹åŠ¿äº¤äº’å¯åˆ†è§£ä¸ºå‡ ä¸ªå°è¿‡ç¨‹ï¼š</p><ol><li>æ‰‹æŒ‡ä¸å±å¹•æ¥è§¦ï¼Œè§¦å‘<strong>MotionEventäº‹ä»¶</strong>ã€‚<ul><li>MotionEventäº‹ä»¶ä¸­å°è£…äº†ä¸€äº›æ‰‹åŠ¿åŠ¨ä½œçš„äº‹ä»¶ï¼Œä»¥åŠxï¼Œyè½´çš„åæ ‡å€¼ã€‚</li></ul></li><li>OnTouchListenerç›‘å¬MotionEventäº‹ä»¶ï¼Œé€šè¿‡å…¶onTouch()æ–¹æ³•å¯è·å¾—è¯¥äº‹ä»¶å¯¹è±¡ã€‚</li><li>MotionEventäº‹ä»¶å¯ç”±GestureDetectorè½¬å‘ç»™OnGestureListenerï¼Œåœ¨OnGestureListenerä¸­è·å–äº‹ä»¶å¯¹è±¡ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚<ul><li>GestureDetectorå¯ä»¥è¯†åˆ«å„ç§æ‰‹åŠ¿</li><li>OnGestureListenerç”¨äºç›‘å¬å„ç§çš„æ‰‹åŠ¿äº¤äº’</li></ul></li></ol><a id="more"></a><h2 id="GestureListenerçš„å›è°ƒæ–¹æ³•"><a href="#GestureListenerçš„å›è°ƒæ–¹æ³•" class="headerlink" title="GestureListenerçš„å›è°ƒæ–¹æ³•"></a>GestureListenerçš„å›è°ƒæ–¹æ³•</h2><ul><li>onDown() : æŒ‰ä¸‹è§¦å±ç¬é—´</li><li>onFling() : æŠ›æ·åŠ¨ä½œï¼Œå³æ‰‹æŒ‡è¿…é€Ÿç§»åŠ¨åæ¾å¼€</li><li>onLongPress() : é•¿æŒ‰</li><li>onScroll() : æ»‘åŠ¨æ‹–åŠ¨</li><li>onShowPress() : æŒ‰ä½ï¼Œæ—¶é—´èŒƒå›´åœ¨é•¿æŒ‰ä¹‹å‰</li><li>onSingleTapUp : æ‰‹æŒ‡ç¦»å±ç¬é—´</li></ul><h2 id="æ‰‹åŠ¿ç›‘å¬"><a href="#æ‰‹åŠ¿ç›‘å¬" class="headerlink" title="æ‰‹åŠ¿ç›‘å¬"></a>æ‰‹åŠ¿ç›‘å¬</h2><ul><li>åˆ›å»ºDestureDetectorå¯¹è±¡ï¼Œä¼ å…¥OnGestureListener</li><li><strong>å°†Activityæˆ–ç‰¹å®šç»„ä»¶ä¸Šçš„TouchEventäº‹ä»¶äº¤ç»™Gestureorå¤„ç†</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»è¦ä»£ç </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Activity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span>&#123;</span><br><span class="line">  GestureDetect detector = <span class="keyword">new</span> GestureDetector(<span class="keyword">this</span>, <span class="keyword">new</span> GestureDetector.OnGestureListener() &#123;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onDown</span><span class="params">(MotionEvent e)</span> </span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onShowPress</span><span class="params">(MotionEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onSingleTapUp</span><span class="params">(MotionEvent e)</span> </span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onScroll</span><span class="params">(MotionEvent e1, MotionEvent e2, <span class="keyword">float</span> distanceX, <span class="keyword">float</span> distanceY)</span> </span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLongPress</span><span class="params">(MotionEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onFling</span><span class="params">(MotionEvent e1, MotionEvent e2, <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY)</span> </span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent e)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> detector.onTouchEvent(e)ï¼›</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä¸è¦å¿˜äº†è½¬äº¤æ‰‹åŠ¿äº‹ä»¶ã€‚Demoä¸­æœ€å¥½ä¸è¦æ”¾å…¶ä»–ç»„ä»¶ï¼Œå…ˆç®€å•æ„Ÿå—ä¸€ä¸‹æ‰‹åŠ¿äº¤äº’ï¼ŒåŸå› åè¾¹ä¼šè®²ã€‚<br>ç”±äºå›è°ƒæ–¹æ³•å°†äº‹ä»¶åˆ†è§£çš„ååˆ†ç»†è‡´ï¼Œæ‰€ä»¥ä½ ä¸€ä¸ªåŠ¨ä½œå¯èƒ½ä¼šè¿ç»­è§¦å‘å¥½å‡ ä¸ªåŠ¨ä½œã€‚å¦‚ä¸€æ¬¡ç‚¹å‡»å°±ä¼šè§¦å‘onDown()å’ŒonSingleTapUp()æ–¹æ³•ã€‚  </p><h3 id="SimpleOnGestureListener"><a href="#SimpleOnGestureListener" class="headerlink" title="SimpleOnGestureListener"></a>SimpleOnGestureListener</h3><p>ç¬¬ä¸€æ¬¡å†™ä»¥ä¸Šdemoæ—¶å€™å°±æ„Ÿè§‰æœ‰äº›è ¢ï¼Œæœ‰æ—¶å€™åªæ˜¯æƒ³è¦ç›‘å¬ç‚¹å‡»æ‰‹åŠ¿æˆ–æ»‘åŠ¨æ‰‹åŠ¿ï¼Œå´å°±è¦å®ç°5,6ä¸ªå›è°ƒæ–¹æ³•ã€‚å®˜æ–¹ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œæ‰€ä»¥ç»™ä½ å°è£…ä¸€ä¸ªSimpleGestureListenerç±»ï¼Œåªéœ€è¦é‡å†™ä½ æƒ³è¦ç›‘å¬çš„æ‰‹åŠ¿çš„æ–¹æ³•å°±å¥½äº†ã€‚<br>ä½¿ç”¨ä¸OnGestureListenerç›¸åŒã€‚</p><h3 id="æ —å­ï¼š"><a href="#æ —å­ï¼š" class="headerlink" title="æ —å­ï¼š"></a>æ —å­ï¼š</h3><p>ä»¥ä¸‹æ˜¯<a href="http://www.runoob.com/w3cnote/android-tutorial-gestures.html">èœé¸Ÿ</a>ä¸Šçš„ä¸€ä¸ªç®€å•çš„æ —å­ï¼Œå€Ÿç”¨ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GestureDetector mDetector;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MIN_MOVE = <span class="number">200</span>;   <span class="comment">//æœ€å°è·ç¦»</span></span><br><span class="line">    <span class="keyword">private</span> MyGestureListener mgListener;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–SimpleOnGestureListenerä¸GestureDetectorå¯¹è±¡</span></span><br><span class="line">        mgListener = <span class="keyword">new</span> MyGestureListener();</span><br><span class="line">        mDetector = <span class="keyword">new</span> GestureDetector(<span class="keyword">this</span>, mgListener);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mDetector.onTouchEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyGestureListener</span> <span class="keyword">extends</span> <span class="title">GestureDetector</span>.<span class="title">SimpleOnGestureListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onFling</span><span class="params">(MotionEvent e1, MotionEvent e2, <span class="keyword">float</span> v, <span class="keyword">float</span> v1)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(e1.getY() - e2.getY() &gt; MIN_MOVE)&#123;</span><br><span class="line">                startActivity(<span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, MainActivity.class));</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">&quot;é€šè¿‡æ‰‹åŠ¿å¯åŠ¨Activity&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(e1.getY() - e2.getY()  &lt; MIN_MOVE)&#123;</span><br><span class="line">                finish();</span><br><span class="line">                Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">&quot;é€šè¿‡æ‰‹åŠ¿å…³é—­Activity&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ä»¥ä¸‹ä¹Ÿæ˜¯æˆ‘åˆä½“éªŒæ—¶æ¯”è¾ƒå‘çš„åœ°æ–¹ï¼Œæˆ‘ä¸€ä¸Šæ¥å°±ç›´æ¥åœ¨ListViewä¸Šè¯†åˆ«æ»‘åŠ¨æ‰‹åŠ¿ï¼Œå´å§‹ç»ˆä¸èƒ½æˆåŠŸè¯†åˆ«ã€‚åŸæ¥æˆ‘åªä¼ é€’äº†Activityä¸Šçš„TouchEventï¼Œæ‰€ä»¥æ²¡èƒ½æˆåŠŸè¯†åˆ«åˆ°ã€‚<br>æ‰€ä»¥è¿™é‡Œä»¥ListViewä¸ºä¾‹äº†è§£ä¸€ä¸‹å…¶ä»–æ§ä»¶çš„æ»‘åŠ¨äº‹ä»¶ç›‘å¬ã€‚</p><h2 id="ListViewçš„æ‰‹åŠ¿ç›‘å¬"><a href="#ListViewçš„æ‰‹åŠ¿ç›‘å¬" class="headerlink" title="ListViewçš„æ‰‹åŠ¿ç›‘å¬"></a>ListViewçš„æ‰‹åŠ¿ç›‘å¬</h2><p>ListViewä¸»è¦æœ‰ä¸¤ç§æ»‘åŠ¨äº‹ä»¶ç›‘å¬æ–¹æ³•ï¼ŒOnTouchListenerä¸OnSrcollListener</p><h3 id="OnTouchListener"><a href="#OnTouchListener" class="headerlink" title="OnTouchListener"></a>OnTouchListener</h3><p>è¯¥æ–¹æ³•æ¥è‡ªViewä¸­çš„ç›‘å¬äº‹ä»¶ï¼Œé€šè¿‡ç›‘å¬<strong>Action.DOWNï¼ŒAction.MOVEï¼ŒAction.UPä»¥åŠå…¶å‘ç”Ÿçš„ä½ç½®åæ ‡å³å¯åˆ¤æ–­ç”¨æˆ·çš„æ»‘åŠ¨æ–¹å‘</strong>ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mListView.setOnTouchListener(<span class="keyword">new</span> View.OnTouchListener())&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v,MotionEvent event)</span></span>&#123;</span><br><span class="line">              swicth(event.getAction())&#123;</span><br><span class="line">                    <span class="keyword">case</span>:MotionEvent.ACTION_DOWN:</span><br><span class="line">                           <span class="comment">//è§¦æ‘¸</span></span><br><span class="line">                           <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span>:MotionEvent.ACTION_MOVE:</span><br><span class="line">                           <span class="comment">//ç§»åŠ¨</span></span><br><span class="line">                           <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span>:MotionEvent.ACTION_MOVE:</span><br><span class="line">                           <span class="comment">//ç¦»å¼€</span></span><br><span class="line">                           <span class="keyword">break</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">         &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="OnScrollListener"><a href="#OnScrollListener" class="headerlink" title="OnScrollListener"></a>OnScrollListener</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">listView.setOnScrollListener(<span class="keyword">new</span> AbsListView.OnScrollListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollStateChanged</span><span class="params">(AbsListView view, <span class="keyword">int</span> scrollState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (scrollState)&#123;</span><br><span class="line">            <span class="keyword">case</span> SCROLL_STATE_IDLE:</span><br><span class="line">                <span class="comment">// æ»‘åŠ¨åœæ­¢æ—¶è°ƒç”¨</span></span><br><span class="line">                Toast.makeText(TestActivity.<span class="keyword">this</span>, <span class="string">&quot;åœå•¦...&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> SCROLL_STATE_TOUCH_SCROLL:</span><br><span class="line">                <span class="comment">// æ»šåŠ¨æ—¶è°ƒç”¨</span></span><br><span class="line">                Toast.makeText(TestActivity.<span class="keyword">this</span>, <span class="string">&quot;æ­£åœ¨æ»‘åŠ¨...&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> SCROLL_STATE_FLING:</span><br><span class="line">                <span class="comment">// ç¦»å±åListViewæƒ¯æ€§æ»‘åŠ¨æ—¶</span></span><br><span class="line">                Toast.makeText(TestActivity.<span class="keyword">this</span>, <span class="string">&quot;åœä¸ä¸‹æ¥...&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> firstVisibleItem å½“å‰èƒ½çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªItemçš„idï¼ŒåŒ…æ‹¬æœªæ˜¾ç¤ºå®Œæ•´çš„Itemï¼Œå³Itemçš„åºå·ï¼Œä»0å¼€å§‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> visibleItemCount å½“å‰èƒ½çœ‹åˆ°çš„Itemæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> totalItemCount ListViewçš„Itemæ€»æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScroll</span><span class="params">(AbsListView view, <span class="keyword">int</span> firstVisibleItem, <span class="keyword">int</span> visibleItemCount, <span class="keyword">int</span> totalItemCount)</span> </span>&#123;</span><br><span class="line">        Toast.makeText(TestActivity.<span class="keyword">this</span>, <span class="string">&quot;ç¬¬ &quot;</span> + firstVisibleItem, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>OnScrollListener()ä¸­æœ‰ä¸¤ä¸ªå›è°ƒæ–¹æ³•onScrollStateChanged()ä¸onScroll()ï¼Œéƒ½ä¼šè¿›è¡Œå¤šæ¬¡å›è°ƒ</p><h4 id="onScrollStateChanged"><a href="#onScrollStateChanged" class="headerlink" title="onScrollStateChanged()"></a>onScrollStateChanged()</h4><p>srrollStateå‚æ•°æœ‰ä¸‰ç§æƒ…å†µï¼Œå½“æ»‘åŠ¨ä¸ºæŠ›æ·åŠ¨ä½œæ—¶,è¯¥æ–¹æ³•åªä¼šå›è°ƒ3æ¬¡,æ— æŠ›æ·åŠ¨ä½œï¼ˆå¯ç†è§£ä¸ºæ‹–åŠ¨ï¼‰åˆ™å›è°ƒ2æ¬¡ã€‚å³æ»‘åŠ¨æ—¶å›è°ƒï¼Œåœæ­¢æ—¶å›è°ƒï¼Œè‹¥æœ‰æƒ¯æ€§æ»‘åŠ¨ï¼Œåˆ™å¤šå›è°ƒä¸€æ¬¡ã€‚<br>å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é€šè¿‡ä¸åŒçš„çŠ¶æ€æ¥è®¾ç½®ä¸€äº›Flagï¼ŒåŒºåˆ†ä¸åŒçš„æ»‘åŠ¨çŠ¶æ€,ä¾›å…¶ä»–æ–¹æ³•å¤„ç†ã€‚</p><h4 id="onScroll"><a href="#onScroll" class="headerlink" title="onScroll()"></a>onScroll()</h4><p>è¯¥æ–¹æ³•åœ¨ListViewæ»šåŠ¨æ—¶ä¼šä¸€ç›´ä¸æ–­çš„å›è°ƒ,é€šè¿‡å…¶å‚æ•°å¯è¿›è¡Œæ»‘åŠ¨çš„åˆ¤æ–­<br>å¦‚åˆ¤æ–­æ˜¯å¦æ»šåŠ¨åˆ°æœ€åä¸€è¡Œï¼Œå³å½“å‰ç¬¬ä¸€ä¸ªItemID + å½“å‰Itemå’Œ == Itemæ€»æ•°çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡ŒåŠ è½½æ›´å¤šItemç­‰æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(firstVisibleItem+visibleItemCount==totalItemCount&amp;&amp;totalItemCount&gt;<span class="number">0</span>)&#123;&#125;</span><br></pre></td></tr></table></figure><hr><p>ç„¶è€Œåˆ°è¿™é‡Œä»ç„¶æ²¡æœ‰è§£å†³æˆ‘çš„éœ€æ±‚ã€‚å› ä¸ºæˆ‘æ˜¯éœ€è¦åœ¨ä¸€ä¸ªSrcollViewä¸WebViewåµŒå¥—çš„ç»“æ„ä¸­ç›‘å¬æ»‘åŠ¨ï¼ŒScrollViewå’ŒWebViewéƒ½æ˜¯å¯æ»‘åŠ¨æ§ä»¶ï¼Œæ‰€ä»¥æ“ä½œèµ·æ¥éº»çƒ¦ã€‚è¿˜æœ‰å°±æ˜¯æ»‘åŠ¨åŠ¨ä½œä¸€ç›´ä½œç”¨åœ¨SrcollViewä¸Šï¼Œæ‰€ä»¥Activityä¸€ç›´æ— æ³•è·å¾—æ‰‹åŠ¿äº‹ä»¶ï¼Œä¹Ÿå°±æ— æ³•è§¦å‘æ–¹æ³•ã€‚<br>æ‰€ä»¥éœ€è¦è§£å†³çš„å°±æ˜¯ScrollViewæˆ–WebViewçš„æ»‘åŠ¨ç›‘å¬ã€‚<br>æœ€åæˆ‘æ˜¯é€šè¿‡å®ç°ScrollViewçš„æ»‘åŠ¨ç›‘å¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="å®ç°ScrollViewçš„æ»‘åŠ¨ç›‘å¬"><a href="#å®ç°ScrollViewçš„æ»‘åŠ¨ç›‘å¬" class="headerlink" title="å®ç°ScrollViewçš„æ»‘åŠ¨ç›‘å¬"></a>å®ç°ScrollViewçš„æ»‘åŠ¨ç›‘å¬</h2><h3 id="ç»§æ‰¿ScrollView"><a href="#ç»§æ‰¿ScrollView" class="headerlink" title="ç»§æ‰¿ScrollView"></a>ç»§æ‰¿ScrollView</h3><p>å’ŒWebViewä¸€æ ·ï¼ŒScrollViewçš„æ»‘åŠ¨ç›‘å¬æ–¹æ³•onScrollChanged()æ˜¯ä¸€ä¸ªå—ä¿æŠ¤çš„æ–¹æ³•ï¼Œè¿™æ„å‘³ç€æƒ³è¦ä½¿ç”¨å®ƒå¿…é¡»å®ç°ä¸€ä¸ªè‡ªå·±çš„ScrollViewé‡å†™åŸæ–¹æ³•ã€‚å…³äºè¿™ä¸€ç‚¹Googleå·²ç»è¢«é»‘æƒ¨äº†ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰ScrollView</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RLScrollView</span> <span class="keyword">extends</span> <span class="title">ScrollView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> OnScrollChangedListener onScrollChangedListener;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RLScrollView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RLScrollView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RLScrollView</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyle);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnScrollChangedListener</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> oldxX, <span class="keyword">int</span> oldY)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnScrollListener</span><span class="params">(OnScrollChangedListener onScrollChangedListener)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.onScrollChangedListener=onScrollChangedListener;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> oldX, <span class="keyword">int</span> oldY)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onScrollChanged(x, y, oldX, oldY);</span><br><span class="line">        <span class="keyword">if</span>(onScrollChangedListener!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            onScrollChangedListener.onScrollChanged(x, y, oldX, oldY);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">scrollView.setOnScrollListener(<span class="keyword">new</span> RLScrollView.OnScrollChangedListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollChanged</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> oldxX, <span class="keyword">int</span> oldY)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°é€šè¿‡åˆ¤æ–­å…ˆåYå€¼å·®è·å–æœ‰æ•ˆæ»‘åŠ¨è·ç¦»</span></span><br><span class="line">        <span class="keyword">if</span>(Math.abs(y-oldY) &lt; <span class="number">20</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨NestedScrollViewç±»"><a href="#ä½¿ç”¨NestedScrollViewç±»" class="headerlink" title="ä½¿ç”¨NestedScrollViewç±»"></a>ä½¿ç”¨NestedScrollViewç±»</h3><p>åæ¥å‘ç°v4åŒ…ä¸‹æœ‰ä¸€ä¸ªNestScrollViewç±»ï¼Œç›¸å½“äºä¸€ä¸ªå°è£…å¥½çš„ScrollViewç±»ï¼Œä½¿ç”¨æ–¹å¼ä¸è‡ªå®ç°ScrollViewç›¸åŒã€‚</p><hr>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚&quot;&gt;&lt;a href=&quot;#ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚&quot; class=&quot;headerlink&quot; title=&quot;ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚&quot;&gt;&lt;/a&gt;ä»Šå¤©å†™ä¸œè¥¿é‡åˆ°äº†æ»‘åŠ¨è§¦å‘åŠ¨ç”»çš„é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†Androidç›‘å¬æ‰‹åŠ¿ä¹‹æ—…ã€‚ç„¶è€Œå¹¶ä¸æ˜¯ç‰¹åˆ«é¡ºåˆ©ï¼Œç‰¹è®°ä¸‹ä¸€äº›å¿ƒå¾—ä½“ä¼šä¸ç›¸å…³çš„ç†è§£ã€‚&lt;/h2&gt;&lt;p&gt;Androidä¸­ä¸»è¦æœ‰ä¸¤ç§æ‰‹åŠ¿è¡Œä¸ºï¼Œä¸€æ˜¯å®˜æ–¹æä¾›çš„ç‰¹å®šæ‰‹åŠ¿ï¼Œè€Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ‰‹åŠ¿ã€‚æœ¬æ–‡ä¸»è¦è®²å…³äºandroidæä¾›çš„æ‰‹åŠ¿äº¤äº’ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ‰‹åŠ¿äº¤äº’é¡ºåº&quot;&gt;&lt;a href=&quot;#æ‰‹åŠ¿äº¤äº’é¡ºåº&quot; class=&quot;headerlink&quot; title=&quot;æ‰‹åŠ¿äº¤äº’é¡ºåº&quot;&gt;&lt;/a&gt;æ‰‹åŠ¿äº¤äº’é¡ºåº&lt;/h2&gt;&lt;p&gt;Androidä¸­çš„æ‰‹åŠ¿äº¤äº’å¯åˆ†è§£ä¸ºå‡ ä¸ªå°è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰‹æŒ‡ä¸å±å¹•æ¥è§¦ï¼Œè§¦å‘&lt;strong&gt;MotionEventäº‹ä»¶&lt;/strong&gt;ã€‚&lt;ul&gt;
&lt;li&gt;MotionEventäº‹ä»¶ä¸­å°è£…äº†ä¸€äº›æ‰‹åŠ¿åŠ¨ä½œçš„äº‹ä»¶ï¼Œä»¥åŠxï¼Œyè½´çš„åæ ‡å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;OnTouchListenerç›‘å¬MotionEventäº‹ä»¶ï¼Œé€šè¿‡å…¶onTouch()æ–¹æ³•å¯è·å¾—è¯¥äº‹ä»¶å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;MotionEventäº‹ä»¶å¯ç”±GestureDetectorè½¬å‘ç»™OnGestureListenerï¼Œåœ¨OnGestureListenerä¸­è·å–äº‹ä»¶å¯¹è±¡ï¼Œè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚&lt;ul&gt;
&lt;li&gt;GestureDetectorå¯ä»¥è¯†åˆ«å„ç§æ‰‹åŠ¿&lt;/li&gt;
&lt;li&gt;OnGestureListenerç”¨äºç›‘å¬å„ç§çš„æ‰‹åŠ¿äº¤äº’&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>Android/Javaè¿æ¥Mysqlæ•°æ®åº“</title>
    <link href="http://codeminions.github.io/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/"/>
    <id>http://codeminions.github.io/2019/02/05/android%E8%BF%9E%E6%8E%A5Mysql/</id>
    <published>2019-02-04T16:00:00.000Z</published>
    <updated>2019-02-04T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h1><p>å¬è¯´å…¶å®Androidç›´æ¥è¿æ¥æ•°æ®åº“çš„æƒ…å†µæ˜¯æ¯”è¾ƒå°‘çš„ï¼Œå‡ºäºå®‰å…¨å’Œå†…å­˜éƒ½ä¸å»ºè®®ï¼Œä¸€èˆ¬æ˜¯è¿æ¥æœåŠ¡å™¨ï¼Œé€šè¿‡æœåŠ¡å™¨æ“ä½œæ•°æ®åº“ã€‚<br>ä½†æ¯•ç«Ÿè¿˜æ˜¯æœ‰å¿…è¦æŒæ¡è¿™é¡¹æŠ€èƒ½ï¼ˆå…¶å®æ˜¯å·²ç»è®°ä¸æ¸…å‰å‡ å¤©æ˜¯ä¸ºä»€ä¹ˆè¦å†™è¿™ä¹ˆä¸ªä¸œè¥¿äº†ï¼Œçº ç¼ å‡ å¤©ä¸‹æ¥å·²ç„¶æ··ä¹±ï¼‰<br>è¿™å‡ å¤©è¿™æ˜¯ç„¦å¤´çƒ‚é¢ï¼Œæ¯ä¸€æ­¥éƒ½ä¼šå¡ä¸€ä¸‹ï¼Œç½‘ä¸Šçš„åšå®¢ä¹Ÿæ˜¯çœ‹äº†ä¸å°‘ï¼Œæ²¡èƒ½å¾ˆç›´æ¥è§£å†³é—®é¢˜ï¼ˆè™½ç„¶æœ€åçš„ç»“æœä¹Ÿæ˜¯ä»¤æˆ‘å“­ç¬‘ä¸å¾—ï¼‰  </p><blockquote><p>å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼š<br>JDBC URLä¸­çš„IPåœ°å€æˆ–ä¸»æœºåé”™è¯¯<br>æœ¬åœ°DNSæœåŠ¡å™¨æ— æ³•è¯†åˆ«JDBC URLä¸­çš„ä¸»æœºå<br>JDBC URLä¸­çš„ç«¯å£å·ä¸¢å¤±æˆ–é”™è¯¯<br>æ•°æ®åº“æœåŠ¡å™¨å…³é—­<br>æ•°æ®åº“æœåŠ¡å™¨ä¸æ¥å—TCP/IPè¿æ¥<br>æ•°æ®åº“æœåŠ¡å™¨å·²ç”¨å®Œè¿æ¥<br>Javaå’ŒDBä¹‹é—´çš„æŸäº›ä¸œè¥¿é˜»æ­¢äº†è¿æ¥ï¼Œä¾‹å¦‚é˜²ç«å¢™æˆ–ä»£ç†  </p><p>å¯ä»¥å°è¯•ä»¥ä¸‹æ“ä½œï¼š<br>æµ‹è¯•ipåœ°å€èƒ½å¦pingé€š<br>åˆ·æ–°DNSæˆ–ä½¿ç”¨JDBC URLä¸­çš„IPåœ°å€<br>æ ¹æ®MySQL DBçš„my.cnfè¿›è¡ŒéªŒè¯<br>å¯åŠ¨æ•°æ®åº“æœåŠ¡<br>éªŒè¯æ˜¯å¦åœ¨æ²¡æœ‰â€“skip-networkingé€‰é¡¹çš„æƒ…å†µä¸‹å¯åŠ¨mysqld<br>é‡æ–°å¯åŠ¨æ•°æ®åº“å¹¶ç›¸åº”åœ°ä¿®æ”¹ä»£ç ï¼Œä»¥ä¾¿æœ€ç»ˆå…³é—­è¿æ¥<br>ç¦ç”¨é˜²ç«å¢™å’Œ/æˆ–é…ç½®é˜²ç«å¢™/ä»£ç†ä»¥å…è®¸/è½¬å‘ç«¯å£<br>æ³¨æ„åˆ«å¿˜äº†ç»™appæ·»åŠ internetæƒé™  <code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</code></p></blockquote><p>ä»¥ä¸Šæ˜¯åœ¨å…¶ä»–åœ°æ–¹çœ‹åˆ°ç®€å•æ€»ç»“çš„ä¸€äº›è¦ç‚¹ã€‚<br>ç„¶åè¦å¼€å§‹æ¥è®²æ•…äº‹äº†ã€‚ã€‚<br><a id="more"></a></p><h1 id="Mysqlçš„è¿œç¨‹ç™»å½•æˆæƒ"><a href="#Mysqlçš„è¿œç¨‹ç™»å½•æˆæƒ" class="headerlink" title="Mysqlçš„è¿œç¨‹ç™»å½•æˆæƒ"></a>Mysqlçš„è¿œç¨‹ç™»å½•æˆæƒ</h1><p>Mysqléœ€è¦åœ¨å…è®¸è¿œç¨‹ç™»å½•çš„æƒ…å†µä¸‹æ‰èƒ½è¢«å…¶ä»–ä¸»æœºè®¿é—®ã€‚åƒåœ¨androidä¸­å°±ä¸å¯èƒ½å¯ä»¥æœ¬åœ°ç™»å½•å§ï¼Œæ— è®ºæ˜¯åœ¨å®ä½“æœºä¸­è¿˜æ˜¯è™šæ‹Ÿæœºä¸­ã€‚</p><blockquote><p>è¿™é‡Œé¡ºä¾¿è®°å½•ä¸€ä¸‹ä¸€äº›è™šæ‹Ÿæœºä¸­ä¸»æœºçš„IPåœ°å€ï¼š<br>Googleæ¨¡æ‹Ÿå™¨<br>emulator-5554<br>å¼€å‘æœºåœ°å€: [net.eth0.gw]: [10.0.2.2]<br>æ¨¡æ‹Ÿå™¨æœ¬æœºåœ°å€: [net.gprs.local-ip]: [10.0.2.15]<br>å¤œç¥æ¨¡æ‹Ÿå™¨<br>127.0.0.1:62001<br>å¼€å‘æœºåœ°å€: [dhcp.eth1.gateway]: 172.17.100.2<br>æ¨¡æ‹Ÿå™¨æœ¬æœºåœ°å€: [dhcp.eth1.ipaddress]: [172.17.100.15]<br>é€é¥æ¨¡æ‹Ÿå™¨<br>127.0.0.1:21503<br>å¼€å‘æœºåœ°å€: [dhcp.eth1.gateway]: [10.0.3.2]<br>æ¨¡æ‹Ÿå™¨æœ¬æœºåœ°å€: [dhcp.eth1.ipaddress]: [10.0.3.15]  </p></blockquote><h2 id="å¼€æ”¾3306ç«¯å£"><a href="#å¼€æ”¾3306ç«¯å£" class="headerlink" title="å¼€æ”¾3306ç«¯å£"></a>å¼€æ”¾3306ç«¯å£</h2><p>æŸ¥çœ‹3306ç«¯å£æƒ…å†µ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -an | grep 3306</span><br><span class="line">tcp6       0      0 :::3306                 :::*                    LISTEN</span><br></pre></td></tr></table></figure><br>è¯´æ˜3306åªæ˜¯ç›‘å¬æœ¬åœ°ï¼Œæ‹’ç»äº†å…¶ä»–IPè®¿é—®ï¼Œmysqlé»˜è®¤çŠ¶æ€ä¸‹æ˜¯ä¸å¼€æ”¾å¯¹å¤–è®¿é—®åŠŸèƒ½ã€‚é‚£ä¹ˆå¼€æ”¾ç«¯å£ã€‚<br>æ‰“å¼€etc/mysql/my.cnfï¼ˆä¹Ÿæœ‰äººè¯´æ˜¯/etc/mysql/mysql.conf.d/mysqld.cnfï¼‰ï¼Œæ‰¾åˆ°bind-address = 127.0.0.1ï¼ˆå¤§æ¦‚47è¡Œï¼‰åŠ  # æ³¨é‡Šå³å¯ã€‚  </p><ul><li>å…¶å®å¯èƒ½æ˜¯å› ä¸ºæˆ‘æ˜¯taräºŒè¿›åˆ¶ç›´æ¥å®‰è£…çš„ç¼˜æ•…ï¼Œæ²¡æœ‰æ‰¾åˆ°mysql.cnfï¼Œä½†åæ¥ä¹Ÿæ˜¯å¯ä»¥è¿æ¥ä¸Šemmm  </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿æ¥æˆåŠŸæ—¶3306çš„çŠ¶æ€å¦‚ä¸‹</span><br><span class="line">$ netstat -an | grep 3306</span><br><span class="line">tcp6       0      0 :::3306                 :::*                    ESTABLISHED</span><br></pre></td></tr></table></figure><h2 id="MySQLæˆæƒ"><a href="#MySQLæˆæƒ" class="headerlink" title="MySQLæˆæƒ"></a>MySQLæˆæƒ</h2><p>å¯åŠ¨mysql.serverï¼Œè¿›å…¥è´¦æˆ·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo .&#x2F;mysql.server start</span><br><span class="line">Starting MySQL</span><br><span class="line">[ ok ..</span><br><span class="line">$ mysql -uroot -p</span><br></pre></td></tr></table></figure><br>ç„¶åé—®é¢˜æ¥äº†ã€‚å…¶ä»–IPçš„è®¿é—®æˆæƒæ–¹å¼æœ‰ä¸¤ç§ï¼Œ<strong>æˆæƒæ³•</strong> å’Œ <strong>æ”¹è¡¨æ³•</strong>ã€‚æ³¨æ„Mysql5å’ŒMysql8çš„æˆæƒæ–¹æ³•æœ‰æ‰€ä¸åŒï¼Œä¸»è¦æ˜¯è¯­æ³•ä¸Šçš„æ”¹å˜ã€‚</p><h3 id="æˆæƒæ³•"><a href="#æˆæƒæ³•" class="headerlink" title="æˆæƒæ³•"></a>æˆæƒæ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grant all on æ•°æ®åº“å.è¡¨å to &#39;root&#39;@&#39;%&#39; identified by &#39;password&#39;;</span><br><span class="line"></span><br><span class="line"># all ä»£è¡¨æƒé™ï¼Œå¯ä»¥æ˜¯select,insert,update,deleteç­‰ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œallå’Œall privilegesä»£è¡¨æ‰€æœ‰æƒé™</span><br><span class="line"># æ•°æ®åº“.è¡¨å æŒ‡å®šå…·ä½“å¼€æ”¾çš„æ•°æ®åº“è¡¨ï¼Œä¸ç”¨åŠ &#39;&#39;</span><br><span class="line"># root æ˜¯è¿œç¨‹ç™»å½•ç”¨çš„ç”¨æˆ·åï¼ŒåŠ ä¸åŠ &#39;&#39;éƒ½å¯ä»¥</span><br><span class="line"># % æ˜¯æŒ‡å®šå¼€æ”¾çš„å…·ä½“IPï¼Œ%æŒ‡å¯¹æ‰€æœ‰ä¸»æœºå¼€æ”¾ï¼Œéœ€åŠ &#39;&#39;ï¼Œ@ä¸¤è¾¹ä¸è¦æœ‰ç©ºæ ¼</span><br><span class="line"># passwordæ˜¯è¿œç¨‹ç™»å½•æ—¶ç”¨çš„å¯†ç </span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šåœ¨Mysql5ä¸‹ä½¿ç”¨ï¼Œä¹Ÿæ˜¯ç½‘ä¸ŠæŸ¥åˆ°çš„99%çš„æ–¹æ³•ã€‚ç„¶è€Œåœ¨Mysql8ä¸­ä¼šæŠ¥è¯­æ³•é”™è¯¯<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to<br>your MySQL server version for the right syntax to use near â€˜identified by â€˜pswâ€™â€™ at line 1<br>è¿™ä¸ªé—®é¢˜ä¹ŸæŠ˜è…¾äº†æˆ‘ä¸€ä¸‹åˆï¼Œæœ€åæ˜¯æ±‚åŠ©äº†å­¦é•¿æ‰æ„è¯†åˆ°ç‰ˆæœ¬çš„é—®é¢˜ã€‚<br><strong>Mysql8</strong> ä¸‹çš„æˆæƒæ–¹æ³•å¦‚ä¸‹ï¼Œæ²¡é”™å°±æ˜¯æ²¡æœ‰identifiedéƒ¨åˆ†ã€‚<br>è€Œä¸”éœ€è¦ <strong>å…ˆåˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œåœ¨å¯¹å…¶è¿›è¡Œæˆæƒ</strong>ï¼Œå¦åˆ™ç›´æ¥grantä¼šæŠ¥é”™ You are not allowed to create a user with GRANTã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># å…ˆåˆ›å»ºç”¨æˆ·</span><br><span class="line">create user &#39;root&#39;@&#39;%&#39; identified by &#39;pwd&#39;;</span><br><span class="line"></span><br><span class="line"># å†è¿›è¡Œæˆæƒ</span><br><span class="line">grant all on *.* to &#39;root&#39;@&#39;%&#39; with grant option;</span><br><span class="line"></span><br><span class="line"># æƒé™åˆ·æ–°</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><br>æ³¨æ„æœ€å <strong>åˆ·æ–°æƒé™</strong>ã€‚</p><h3 id="æ”¹è¡¨æ³•"><a href="#æ”¹è¡¨æ³•" class="headerlink" title="æ”¹è¡¨æ³•"></a>æ”¹è¡¨æ³•</h3><p>å…¶å®æœ€åæˆ‘æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•å®Œæˆçš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; update user set host&#x3D;&#39;%&#39; where user&#x3D;&#39;root&#39;;</span><br><span class="line">Query OK, 1 row affected (0.63 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.21 sec)</span><br></pre></td></tr></table></figure><br>å¦‚ä¸Šï¼Œè¿›å…¥mysqlæ•°æ®åº“ï¼ŒæŸ¥çœ‹userï¼Œhostå¯çœ‹åˆ°rootç”¨æˆ·çš„hostæ˜¯localhostã€‚ä¿®æ”¹è¯¥é¡¹ä¸º%ï¼Œåˆ·æ–°æƒé™ã€‚<br>æˆ‘æ˜¯ä½¿ç”¨ideaé›†æˆçš„æ•°æ®åº“å·¥å…·æµ‹è¯•è¿æ¥ï¼Œè¿æ¥æˆåŠŸã€‚</p><h1 id="Android-Javaæ•°æ®åº“è¿æ¥"><a href="#Android-Javaæ•°æ®åº“è¿æ¥" class="headerlink" title="Android/Javaæ•°æ®åº“è¿æ¥"></a>Android/Javaæ•°æ®åº“è¿æ¥</h1><h2 id="å¯¼å…¥æ•°æ®åº“é©±åŠ¨JDBC"><a href="#å¯¼å…¥æ•°æ®åº“é©±åŠ¨JDBC" class="headerlink" title="å¯¼å…¥æ•°æ®åº“é©±åŠ¨JDBC"></a>å¯¼å…¥æ•°æ®åº“é©±åŠ¨JDBC</h2><p>åˆ°å®˜ç½‘ä¸‹è½½è·å–JDBCçš„jaråŒ…ï¼Œå¸¸è§çš„ç‰ˆæœ¬æ˜¯mysql-connector-java-5.1.47.jarï¼Œè¾ƒæ–°çš„ç‰ˆæœ¬æ˜¯mysql-connector-java-8.0.13ã€‚ï¼ˆæœ‰ç©ºäº†ä¼šè¯•ç€æŠŠè¿™ä¸¤ä¸ªä¸Šä¼ ï¼‰ã€‚<br>å¯¼åŒ…æ–¹å¼ï¼šå¤åˆ¶jaråˆ°é¡¹ç›®çš„libsç›®å½•ä¸‹<br>å³é”®jaré€‰æ‹©Add as libs<br>æˆ–è€…ç›´æ¥åœ¨appçš„build.gradleä¸­æ·»åŠ <br>implementation files(â€˜libs/mysql-connector-java-5.1.47.jarâ€™)</p><h2 id="ä¸»è¦ä»£ç "><a href="#ä¸»è¦ä»£ç " class="headerlink" title="ä¸»è¦ä»£ç "></a>ä¸»è¦ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ¨æ€åŠ è½½ç±»</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è¿æ¥åœ°å€ä»¥åŠæ•°æ®åº“åç§°</span></span><br><span class="line">String DB_URL = <span class="string">&quot;jdbc:mysql://mysql.æ•°æ®åº“æ‰€åœ¨ä¸»æœºIP:3306/è¡¨å&quot;</span>;</span><br><span class="line"><span class="comment">// è¿æ¥æ•°æ®åº“</span></span><br><span class="line">Connection conn = DriverManager.getConnection(DB_URL, <span class="string">&quot;ç”¨æˆ·å&quot;</span>, <span class="string">&quot;å¯†ç &quot;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»ºStatementå¯¹è±¡(å¯æ‰§è¡ŒSQLè¯­å¥çš„å¯¹è±¡)</span></span><br><span class="line">Statement stmt = conn.createStatement();</span><br><span class="line"><span class="comment">// æ‰§è¡Œsqlè¯­å¥ è¿”å›ä¸€ä¸ªResultSetå¯¹è±¡ï¼ˆè¿”å›æ•°æ®é›†åˆï¼‰</span></span><br><span class="line">ResultSet rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="comment">// rsè°ƒç”¨æ•°æ®</span></span><br><span class="line">rs.getString(<span class="number">1</span>);  <span class="comment">// éå†ç´¢å¼•</span></span><br><span class="line">rs.getString(<span class="string">&quot;name&quot;</span>); <span class="comment">// å­—æ®µåç´¢å¼•</span></span><br></pre></td></tr></table></figure><h2 id="æ³¨ï¼š"><a href="#æ³¨ï¼š" class="headerlink" title="æ³¨ï¼š"></a>æ³¨ï¼š</h2><h3 id="æ–°å»ºçº¿ç¨‹"><a href="#æ–°å»ºçº¿ç¨‹" class="headerlink" title="æ–°å»ºçº¿ç¨‹"></a>æ–°å»ºçº¿ç¨‹</h3><p>Androidä¸æ”¯æŒåœ¨è½¬çº¿ç¨‹æ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼ˆè€—æ—¶æ“ä½œï¼‰ä¼šæœ‰UnsupportedOperationExceptionã€‚<br>æ³¨æ„åŒ…æ‹¬stmt.executeQuery(str) æ–¹æ³•ä¹Ÿæ˜¯è”ç½‘æ“ä½œï¼Œä¹Ÿè¦æ”¾åœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡Œ</p><h3 id="ç‰ˆæœ¬é—®é¢˜"><a href="#ç‰ˆæœ¬é—®é¢˜" class="headerlink" title="ç‰ˆæœ¬é—®é¢˜"></a>ç‰ˆæœ¬é—®é¢˜</h3><p>5.0å’Œ8.0é©±åŠ¨åŒ…æœ‰å‡ ä¸ªåœ°æ–¹ä¸åŒ  </p><ul><li><p>åŠ è½½8.0é©±åŠ¨çš„æ—¶å€™æŠ¥é”™</p><blockquote><p>Loading class <code>&#39;com.mysql.jdbc.Driver&#39;. This is deprecated. The new driver class is &#39;com.mysql.cj.jdbc.Driver&#39;</code>. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.  </p></blockquote><p>æç¤ºï¼Œ8.0åŒ…çš„é©±åŠ¨ååº”è¯¥æ”¹ä¸º <strong>com.mysql.cj.jdbc.Driver</strong></p></li><li><p>å»ºç«‹è¿æ¥æ—¶æŠ¥é”™</p><blockquote><p>Establishing SSL connection without serverâ€™s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isnâ€™t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to â€˜falseâ€™. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</p></blockquote><p>mysql8.0æ˜¯ä¸éœ€è¦å»ºç«‹sslè¿æ¥ï¼Œéœ€è¦ä½¿ç”¨useSSL=falseæ‰‹åŠ¨å…³é—­ã€‚å³URLæ”¹ä¸º <strong>jdbc:mysql://mysql.æ•°æ®åº“æ‰€åœ¨ä¸»æœºIP:3306/è¡¨å?useSSL=false</strong></p></li><li>8.0é©±åŠ¨åŒ…åªèƒ½å…¼å®¹minSdkVersion = 26ï¼Œæˆ‘çš„æµ‹è¯•æœºSdkVersionæ˜¯24çš„ï¼Œæ‰€ä»¥æˆ‘åªèƒ½ç”¨5.0çš„é©±åŠ¨åŒ…</li></ul><h3 id="ä¸€äº›æŠ¥é”™"><a href="#ä¸€äº›æŠ¥é”™" class="headerlink" title="ä¸€äº›æŠ¥é”™"></a>ä¸€äº›æŠ¥é”™</h3><ul><li>serverTimezone=UTCï¼Œå¯ä»¥æŒ‡å®šæ—¶åŒºï¼ˆéå¿…è¦ï¼‰</li><li>æ•°æ®åº“æˆ–è¡¨æ˜å‡ºé”™ä¼šæœ‰æŠ¥é”™ï¼šNo address associated with hostnameï¼ŒUnknown database</li><li>ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼šAccess denied for user (using password: YES)</li><li>ç½‘ç»œåŸå› ï¼ˆæ— æƒé™ï¼Œæ— ç½‘ç»œè¿æ¥ï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼‰ï¼šcom.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.  </li><li>æ³¨æ„åœ¨é€‚å½“ä½ç½®å…³é—­ç›¸å…³èµ„æºæµ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// java</span></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String JDBC_DRIVER = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String DB_URL = <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/table&quot;</span>;</span><br><span class="line">    <span class="comment">// æ³¨æ„ä¿®æ”¹DB_URLï¼Œå’ŒUERï¼ŒPASS</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String PASS = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        ResultSet re;</span><br><span class="line">        Connection con;</span><br><span class="line">        Statement stmt;</span><br><span class="line">        String str = <span class="string">&quot;select * from books&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class.forName(JDBC_DRIVER);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Fail to load JDBC dirver.&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            con = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line">            stmt = con.createStatement();</span><br><span class="line"></span><br><span class="line">            re = stmt.executeQuery(str);</span><br><span class="line">            <span class="keyword">while</span>(re.next())&#123;</span><br><span class="line">                System.out.println(re.getString(<span class="number">2</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            con.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// android</span></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String JDBC_DRIVER = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String DB_URL = <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/table?useSSL=false&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String PASS = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ResultSet re;</span><br><span class="line">    <span class="keyword">private</span> Connection con;</span><br><span class="line">    <span class="keyword">private</span> Statement stmt;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="keyword">final</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> String str = <span class="string">&quot;select book_title from books&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Class.forName(JDBC_DRIVER);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;é©±åŠ¨åŠ è½½å¤±è´¥&quot;</span>, e.toString());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    con = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line">                    stmt = con.createStatement();</span><br><span class="line"></span><br><span class="line">                    re = stmt.executeQuery(str);</span><br><span class="line">                    <span class="keyword">if</span> (re != <span class="keyword">null</span>)</span><br><span class="line">                        Log.i(<span class="string">&quot;æ ‡è®°&quot;</span>, <span class="string">&quot;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n&quot;</span>);</span><br><span class="line">                    <span class="keyword">while</span> (re.next())</span><br><span class="line">                        Log.i(<span class="string">&quot;Data&quot;</span>, re.getString(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;è¿æ¥å¤±è´¥&quot;</span>, e.toString());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æˆ‘ç¢°åˆ°çš„é—®é¢˜ï¼š"><a href="#æˆ‘ç¢°åˆ°çš„é—®é¢˜ï¼š" class="headerlink" title="æˆ‘ç¢°åˆ°çš„é—®é¢˜ï¼š"></a>æˆ‘ç¢°åˆ°çš„é—®é¢˜ï¼š</h2><p><del>ä»¥ä¸‹å†…å®¹éé‡ç‚¹</del>  </p><ul><li>Communications link failure  </li><li>The last packet sent successfully to the server was 0 milliseconds ago.The driver has not received any packets from the server.  </li></ul><p>è¿™ä¸¤ä¸ªæŠ¥é”™è´¯ç©¿äº†æˆ‘ä¸¤å¤©çš„debugè¿‡ç¨‹ï¼Œä¹Ÿå¤§æ¦‚æ˜¯androidè¿æ¥Mysqlæœ€å¸¸è§çš„æŠ¥é”™<br>æŸ¥åˆ°çš„éƒ½æ˜¯è¶…æ—¶ç›¸å…³é—®é¢˜ï¼Œè¶…æ—¶å›æ”¶æœºåˆ¶äº‘äº‘ã€‚<strong>è¯¥é—®é¢˜æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„è¿æ¥æ± ä¸çŸ¥é“è¿æ¥è¢«å›æ”¶äº†æ‰€ä»¥æŠ¥å‡ºçš„å¼‚å¸¸ï¼Œè§£å†³æ–¹æ¡ˆå¤§æ¦‚æ˜¯ ä¿®æ”¹è¿æ¥æ± é…ç½® æˆ– ä¿®æ”¹mysqlç©ºé—²è¶…æ—¶æ—¶é—´é…ç½®</strong>ï¼Œå¦åˆ™é»˜è®¤æ˜¯8å°æ—¶ã€‚  </p><p>ä½†è¿™æ˜¯æ•°æ®åº“è¿æ¥ä¸­æ–­çš„é—®é¢˜ï¼Œæˆ‘è¿éƒ½è¿ä¸ä¸Šã€‚è¿™å¤§å¹´åˆä¸€çš„ï¼Œå°±æ˜¯ç†¬å¤œæ‰å¤´å‘ï¼Œæƒ³èµ·è¿™ä¸€å¹´çš„æ¼«æ¼«debugä¹‹è·¯ï¼Œå¿ä¸ä½æäº†æŠŠæ±—ã€‚<br>æˆ‘ä¸æŠ±å¸Œæœ›ä¿®æ”¹äº†å¦‚ä¸‹URLï¼Œç„¶åæ°”æ€¥è´¥åçš„è·‘å»å’Œæˆ‘å¦¹çœ‹ç”µè§†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;table?useUnicode&#x3D;true&amp;characterEncoding&#x3D;UTF-8&amp;autoReconnect&#x3D;true&amp;failOverReadOnly&#x3D;false</span><br></pre></td></tr></table></figure><br>åŠæ™Œï¼Œå°±åœ¨æˆ‘å›æ¥ç»§ç»­æ—¶å€™ï¼Œçœ‹åˆ°logoutä¸Šç»ˆäºæ‰“ä¸Šäº†æ•°æ®åº“çš„å†…å®¹ï¼Œæ¬£å–œè‹¥ç‹‚ï¼Œæ‰¯ç€ä¸€è„¸é—®å·çš„å¦¹å¦¹æ¡äº†åŠå¤©å¹¿åœºèˆã€‚<br>æ¥ä¸‹æ¥çš„äº‹ä»¤æˆ‘ä¸çŸ¥è¯¥å“­è¿˜æ˜¯è¯¥ç¬‘ï¼Œå€’ä¸æ˜¯ç¨‹åºåˆä¸èƒ½è·‘äº†ï¼Œæ˜¯å°±åœ¨æˆ‘å°†ä¸Šé¢çš„æŒ‡ä»¤ä¸€ä¸ªä¸€ä¸ªåˆ å»ï¼Œå°è¯•æ‰¾åˆ°ç½ªå½’ç¥¸é¦–æ—¶ï¼Œå‘ç°å·²ç»æ˜¯æŠŠä»£ç æ¢å¤åˆ°åŸæ¥çŠ¶æ€äº†ï¼Œappè¿˜æ˜¯ååˆ†ä¹–å·§çš„è¿ä¸Šäº†æ•°æ®åº“ï¼Œå³jdbc:mysql://ip:3306/tableã€‚<br>æˆ‘ï¼šï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ<br>åˆšåˆšåˆ°åº•å‘ç”Ÿä»€ä¹ˆäº†ï¼Œéš¾é“è¿˜æœ‰æ‰“å¼€æŸä¸ªå¼€å…³ä»¥åä»–å°±é»˜è®¤å¼€å¯ä¹‹ç±»çš„æ“ä½œï¼Ÿ</p><p>æ— è®ºå¦‚ä½•ï¼Œæ€»ç®—æ˜¯æˆåŠŸäº†ã€‚è€æ³ªçºµæ¨ªã€‚<br>æ„¿å¤©ä¸‹ç å†œå’Œå…«å“¥ç»ˆæˆçœ·å±ã€‚ã€‚TAT</p><hr><p><a href="https://blog.csdn.net/CristianTang/article/details/79553947">å‚è€ƒåšå®¢</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å¼•å…¥&quot;&gt;&lt;a href=&quot;#å¼•å…¥&quot; class=&quot;headerlink&quot; title=&quot;å¼•å…¥&quot;&gt;&lt;/a&gt;å¼•å…¥&lt;/h1&gt;&lt;p&gt;å¬è¯´å…¶å®Androidç›´æ¥è¿æ¥æ•°æ®åº“çš„æƒ…å†µæ˜¯æ¯”è¾ƒå°‘çš„ï¼Œå‡ºäºå®‰å…¨å’Œå†…å­˜éƒ½ä¸å»ºè®®ï¼Œä¸€èˆ¬æ˜¯è¿æ¥æœåŠ¡å™¨ï¼Œé€šè¿‡æœåŠ¡å™¨æ“ä½œæ•°æ®åº“ã€‚&lt;br&gt;ä½†æ¯•ç«Ÿè¿˜æ˜¯æœ‰å¿…è¦æŒæ¡è¿™é¡¹æŠ€èƒ½ï¼ˆå…¶å®æ˜¯å·²ç»è®°ä¸æ¸…å‰å‡ å¤©æ˜¯ä¸ºä»€ä¹ˆè¦å†™è¿™ä¹ˆä¸ªä¸œè¥¿äº†ï¼Œçº ç¼ å‡ å¤©ä¸‹æ¥å·²ç„¶æ··ä¹±ï¼‰&lt;br&gt;è¿™å‡ å¤©è¿™æ˜¯ç„¦å¤´çƒ‚é¢ï¼Œæ¯ä¸€æ­¥éƒ½ä¼šå¡ä¸€ä¸‹ï¼Œç½‘ä¸Šçš„åšå®¢ä¹Ÿæ˜¯çœ‹äº†ä¸å°‘ï¼Œæ²¡èƒ½å¾ˆç›´æ¥è§£å†³é—®é¢˜ï¼ˆè™½ç„¶æœ€åçš„ç»“æœä¹Ÿæ˜¯ä»¤æˆ‘å“­ç¬‘ä¸å¾—ï¼‰  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼š&lt;br&gt;JDBC URLä¸­çš„IPåœ°å€æˆ–ä¸»æœºåé”™è¯¯&lt;br&gt;æœ¬åœ°DNSæœåŠ¡å™¨æ— æ³•è¯†åˆ«JDBC URLä¸­çš„ä¸»æœºå&lt;br&gt;JDBC URLä¸­çš„ç«¯å£å·ä¸¢å¤±æˆ–é”™è¯¯&lt;br&gt;æ•°æ®åº“æœåŠ¡å™¨å…³é—­&lt;br&gt;æ•°æ®åº“æœåŠ¡å™¨ä¸æ¥å—TCP/IPè¿æ¥&lt;br&gt;æ•°æ®åº“æœåŠ¡å™¨å·²ç”¨å®Œè¿æ¥&lt;br&gt;Javaå’ŒDBä¹‹é—´çš„æŸäº›ä¸œè¥¿é˜»æ­¢äº†è¿æ¥ï¼Œä¾‹å¦‚é˜²ç«å¢™æˆ–ä»£ç†  &lt;/p&gt;
&lt;p&gt;å¯ä»¥å°è¯•ä»¥ä¸‹æ“ä½œï¼š&lt;br&gt;æµ‹è¯•ipåœ°å€èƒ½å¦pingé€š&lt;br&gt;åˆ·æ–°DNSæˆ–ä½¿ç”¨JDBC URLä¸­çš„IPåœ°å€&lt;br&gt;æ ¹æ®MySQL DBçš„my.cnfè¿›è¡ŒéªŒè¯&lt;br&gt;å¯åŠ¨æ•°æ®åº“æœåŠ¡&lt;br&gt;éªŒè¯æ˜¯å¦åœ¨æ²¡æœ‰â€“skip-networkingé€‰é¡¹çš„æƒ…å†µä¸‹å¯åŠ¨mysqld&lt;br&gt;é‡æ–°å¯åŠ¨æ•°æ®åº“å¹¶ç›¸åº”åœ°ä¿®æ”¹ä»£ç ï¼Œä»¥ä¾¿æœ€ç»ˆå…³é—­è¿æ¥&lt;br&gt;ç¦ç”¨é˜²ç«å¢™å’Œ/æˆ–é…ç½®é˜²ç«å¢™/ä»£ç†ä»¥å…è®¸/è½¬å‘ç«¯å£&lt;br&gt;æ³¨æ„åˆ«å¿˜äº†ç»™appæ·»åŠ internetæƒé™  &lt;code&gt;&amp;lt;uses-permission android:name=&amp;quot;android.permission.INTERNET&amp;quot;/&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸Šæ˜¯åœ¨å…¶ä»–åœ°æ–¹çœ‹åˆ°ç®€å•æ€»ç»“çš„ä¸€äº›è¦ç‚¹ã€‚&lt;br&gt;ç„¶åè¦å¼€å§‹æ¥è®²æ•…äº‹äº†ã€‚ã€‚&lt;br&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ</title>
    <link href="http://codeminions.github.io/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <id>http://codeminions.github.io/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</id>
    <published>2019-01-12T16:00:00.000Z</published>
    <updated>2019-03-12T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><ul><li>è®¡ç®—æœºç½‘ç»œåè®®ï¼šè¯­æ³•ï¼Œè¯­ä¹‰ï¼Œæ—¶åº<ul><li>è¯­æ³•ï¼šæè¿°å®ä½“é—´ä¿¡æ¯äº¤æ¢æ ¼å¼</li><li>è¯­ä¹‰ï¼šæ§åˆ¶ä¿¡æ¯çš„å…·ä½“å«ä¹‰</li><li>æ—¶åºï¼šäº¤æ¢ä¿¡æ¯çš„é¡ºåºä»¥åŠé€Ÿåº¦é…åˆ</li></ul></li><li>åŠŸèƒ½ï¼šç¡¬ä»¶ï¼Œè½¯ä»¶ï¼Œä¿¡æ¯</li><li>åˆ†ç±»ï¼šè¦†ç›–èŒƒå›´ï¼Œæ‹“æ‰‘ç»“æ„ï¼Œäº¤æ¢æ–¹å¼ï¼Œç”¨æˆ·å±æ€§<ul><li>æ ‘å½¢ï¼Œæ˜Ÿå½¢æ‹“æ‰‘ï¼šæ˜“äºç®¡ç†ï¼Œä¸­å¿ƒèŠ‚ç‚¹æ˜¯ç½‘ç»œçš„å…³é”®ï¼Œçº¿è·¯è¾ƒå¤šæˆæœ¬è¾ƒé«˜</li><li>ç¯å½¢ï¼Œæ€»çº¿æ‹“æ‰‘ï¼šæˆæœ¬æ•ˆç‡ä¸é«˜ï¼Œæ’é”™ï¼Œå¢åˆ ï¼Œä¸ä¾¿äºç®¡ç†</li><li>ç½‘çŠ¶æ‹“æ‰‘ï¼šèŠ‚ç‚¹é—´é€šä¿¡å¤šè·¯å¾„é€‰æ‹©ï¼Œç»“æ„å¤æ‚æˆæœ¬é«˜<a id="more"></a><h2 id="è®¡ç®—æœºç½‘ç»œç»“æ„"><a href="#è®¡ç®—æœºç½‘ç»œç»“æ„" class="headerlink" title="è®¡ç®—æœºç½‘ç»œç»“æ„"></a>è®¡ç®—æœºç½‘ç»œç»“æ„</h2><h3 id="ç½‘ç»œè¾¹ç¼˜"><a href="#ç½‘ç»œè¾¹ç¼˜" class="headerlink" title="ç½‘ç»œè¾¹ç¼˜"></a>ç½‘ç»œè¾¹ç¼˜</h3><h3 id="æ¥å…¥ç½‘ç»œæ–¹å¼"><a href="#æ¥å…¥ç½‘ç»œæ–¹å¼" class="headerlink" title="æ¥å…¥ç½‘ç»œæ–¹å¼"></a>æ¥å…¥ç½‘ç»œæ–¹å¼</h3></li></ul></li><li>ç”µè¯æ‹¨å·</li><li>æ•°å­—çº¿ADSLï¼Œä½¿ç”¨ç”µè¯çš„ç‰©ç†çº¿è·¯ï¼Œä½†ä¸åŒä¿¡é“ä¼ è¾“</li><li>æ··åˆå…‰çº¤åŒè½´ç”µç¼†HFC</li><li>å±€åŸŸç½‘</li><li>ç§»åŠ¨æ¥å…¥ç½‘ç»œï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰</li></ul><h3 id="ç½‘ç»œæ ¸å¿ƒ"><a href="#ç½‘ç»œæ ¸å¿ƒ" class="headerlink" title="ç½‘ç»œæ ¸å¿ƒ"></a>ç½‘ç»œæ ¸å¿ƒ</h3><ul><li>ç½‘ç»œæ ¸å¿ƒæ˜¯äº¤æ¢èŠ‚ç‚¹å’Œä¼ è¾“ä»‹è´¨çš„é›†åˆï¼Œå®ç°ç½‘ç»œè¾¹ç¼˜ä¸­ä¸»æœºæ•°æ®çš„ä¸­ç»§ä¸è½¬å‘ã€‚</li><li>ç½‘ç»œæ ¸å¿ƒï¼ˆé€šä¿¡å­ç½‘ï¼‰ä¸å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä¸æä¾›ç½‘ç»œæœåŠ¡ã€‚è¿™äº›åŠŸèƒ½ç”±ç½‘ç»œè¾¹ç¼˜ï¼ˆèµ„æºå­ç½‘ï¼‰æä¾›</li></ul><h2 id="æ•°æ®äº¤æ¢æŠ€æœ¯"><a href="#æ•°æ®äº¤æ¢æŠ€æœ¯" class="headerlink" title="æ•°æ®äº¤æ¢æŠ€æœ¯"></a>æ•°æ®äº¤æ¢æŠ€æœ¯</h2><h3 id="ç”µè·¯äº¤æ¢"><a href="#ç”µè·¯äº¤æ¢" class="headerlink" title="ç”µè·¯äº¤æ¢"></a>ç”µè·¯äº¤æ¢</h3><ul><li>ä¸»æœºé—´å»ºç«‹ä¸“ç”¨çš„é€šä¿¡çº¿è·¯ï¼Œé€šä¿¡ç»“æŸåé€šé“æ‹†é™¤</li><li>å®æ—¶æ€§é«˜ï¼Œæ—¶å»¶ä¸æ—¶å»¶æŠ–åŠ¨å°</li><li>çªå‘æ€§æ•°æ®ä¼ è¾“ï¼ˆç½‘é¡µæµè§ˆï¼‰ä¸­ï¼Œä¿¡é“åˆ©ç”¨ç‡ä½ï¼Œä¼ è¾“é€Ÿç‡å•ä¸€</li></ul><h3 id="ç”µæŠ¥äº¤æ¢"><a href="#ç”µæŠ¥äº¤æ¢" class="headerlink" title="ç”µæŠ¥äº¤æ¢"></a>ç”µæŠ¥äº¤æ¢</h3><ul><li>æ— éœ€å»ºç«‹è¿æ¥</li><li>åªæœ‰æŠ¥æ–‡è¢«è½¬å‘ï¼ˆä¼ è¾“æ•°æ®ï¼‰æ—¶æ‰ä¼šå ç”¨ä¿¡é“ï¼Œä¸ä¼šç‹¬å ä¿¡é“</li><li>ä»¥å­˜å‚¨-è½¬å‘å½¢å¼ä¼ é€ã€‚äº¤æ¢èŠ‚ç‚¹éœ€è¦ç¼“å†²å‚¨å­˜ï¼ŒæŠ¥æ–‡éœ€è¦æ’é˜Ÿï¼Œå¢åŠ æ—¶å»¶</li></ul><h3 id="åˆ†ç»„äº¤æ¢"><a href="#åˆ†ç»„äº¤æ¢" class="headerlink" title="åˆ†ç»„äº¤æ¢"></a><strong>åˆ†ç»„äº¤æ¢</strong></h3><ul><li>æ‹†åˆ†æŠ¥æ–‡ä¸ºè‹¥å¹²åˆ†ç»„ï¼Œåœ¨è¿›å­˜å‚¨è½¬å‘</li><li>å­˜å‚¨è®¾å¤‡å®¹é‡è¦æ±‚ä½ï¼Œé€Ÿç‡æ•ˆç‡é«˜</li><li>æ›´åŠ å…¬å¹³ï¼Œç¬¬ä¸€ä¸ªæŠ¥æ–‡ä¸ºå…¨éƒ¨ä¼ å®Œï¼Œå¯ä»¥å…ˆå¼€å§‹ä¸‹ä¸€ä¸ªæŠ¥æ–‡</li><li>å»¶è¿Ÿæ—¶é—´ï¼Œè¯¯ç ç‡</li></ul><h2 id="ç½‘ç»œæ€§èƒ½"><a href="#ç½‘ç»œæ€§èƒ½" class="headerlink" title="ç½‘ç»œæ€§èƒ½"></a>ç½‘ç»œæ€§èƒ½</h2><h3 id="å¸¦å®½ï¼ˆé¢‘å¸¦å®½åº¦ï¼‰"><a href="#å¸¦å®½ï¼ˆé¢‘å¸¦å®½åº¦ï¼‰" class="headerlink" title="å¸¦å®½ï¼ˆé¢‘å¸¦å®½åº¦ï¼‰"></a>å¸¦å®½ï¼ˆé¢‘å¸¦å®½åº¦ï¼‰</h3><ul><li>å•ä½èµ«å…¹ï¼Œé¢‘ç‡æå·®</li><li>å¸¦å®½è¶Šå¤§ï¼Œé€Ÿç‡è¶Šå¤§ï¼Œæ•…å¸¦å®½æœ‰æ—¶å€™ç”¨æ¥ä»£æ›¿é€Ÿç‡æè¿°ç½‘ç»œæ€§èƒ½</li></ul><h3 id="æ—¶å»¶"><a href="#æ—¶å»¶" class="headerlink" title="æ—¶å»¶"></a>æ—¶å»¶</h3><ul><li>æ•°æ®ä»ä¸€èŠ‚ç‚¹åˆ°å¦ä¸€èŠ‚ç‚¹æ‰€éœ€æ—¶é—´</li><li>å»¶è¿Ÿåˆ†ç±»ï¼š<ul><li><strong>å¤„ç†æ—¶å»¶</strong></li><li><strong>æ’é˜Ÿæ—¶å»¶</strong></li><li><strong>ä¼ è¾“æ—¶å»¶ï¼Œæ•°æ®ä¼ è¾“åˆ°çº¿è·¯ä¸Šæ‰€éœ€æ—¶é—´</strong></li><li><strong>ä¼ æ’­æ—¶å»¶ï¼Œæ•°æ®åœ¨çº¿è·¯ä¸Šçš„ä¼ æ’­æ—¶é—´</strong></li></ul></li></ul><h3 id="æ—¶å»¶å¸¦å®½ç§¯"><a href="#æ—¶å»¶å¸¦å®½ç§¯" class="headerlink" title="æ—¶å»¶å¸¦å®½ç§¯"></a>æ—¶å»¶å¸¦å®½ç§¯</h3><p>é“¾è·¯ä¸Šå¯ä»¥å®¹çº³çš„æ•°æ®ä½æ•°</p><h3 id="ä¸¢åŒ…ç‡"><a href="#ä¸¢åŒ…ç‡" class="headerlink" title="ä¸¢åŒ…ç‡"></a>ä¸¢åŒ…ç‡</h3><ul><li>ç½‘ç»œå¯é æ€§ï¼Œåæ˜ æ‹¥å¡ç¨‹åº¦</li><li>ä¸¢åŒ…ç‡ = ä¸¢å¤±åˆ†ç»„æ•°/å‘é€åˆ†ç»„æ•°</li></ul><h3 id="ååç‡"><a href="#ååç‡" class="headerlink" title="ååç‡"></a>ååç‡</h3><p>åº¦é‡æ•°æ®ä¼ é€èƒ½åŠ›</p><h2 id="è®¡ç®—æœºç½‘ç»œåˆ†å±‚ä½“ç³»ç»“æ„"><a href="#è®¡ç®—æœºç½‘ç»œåˆ†å±‚ä½“ç³»ç»“æ„" class="headerlink" title="è®¡ç®—æœºç½‘ç»œåˆ†å±‚ä½“ç³»ç»“æ„"></a>è®¡ç®—æœºç½‘ç»œåˆ†å±‚ä½“ç³»ç»“æ„</h2><p>å„å±‚æ¬¡å°è£…å„è‡ªçš„å¤´éƒ¨ä¿¡æ¯åä¼ é€’ä¸‹ä¸€å±‚æ¬¡å¤„ç†</p><ul><li>OSIå‚è€ƒæ¨¡å‹ï¼ˆä¸ƒå±‚ï¼‰</li><li>TCP/IPå‚è€ƒæ¨¡å‹</li><li>äº”å±‚æ¨¡å‹ï¼š<strong>åº”ç”¨å±‚ï¼ˆæŠ¥æ–‡ï¼‰ï¼Œä¼ è¾“å±‚ï¼ˆæ®µï¼‰ï¼Œç½‘ç»œå±‚ï¼ˆæ•°æ®æŠ¥ï¼‰ï¼Œé“¾è·¯å±‚ï¼ˆå¸§ï¼Œè‹¥å¹²æ¯”ç‰¹ç»„ç»‡çš„æ•°æ®å¤„ç†å•å…ƒï¼‰ï¼Œç‰©ç†å±‚ï¼ˆæ¯”ç‰¹æµï¼‰</strong></li></ul><h1 id="ç½‘ç»œåº”ç”¨"><a href="#ç½‘ç»œåº”ç”¨" class="headerlink" title="ç½‘ç»œåº”ç”¨"></a>ç½‘ç»œåº”ç”¨</h1><h2 id="ç½‘ç»œåº”ç”¨ä½“ç³»ç»“æ„"><a href="#ç½‘ç»œåº”ç”¨ä½“ç³»ç»“æ„" class="headerlink" title="ç½‘ç»œåº”ç”¨ä½“ç³»ç»“æ„"></a>ç½‘ç»œåº”ç”¨ä½“ç³»ç»“æ„</h2><ul><li>ä¸‰ç§ç±»å‹<ul><li><strong>å®¢æˆ·ç«¯/ç”¨æˆ·ï¼ˆC/Sï¼‰ç»“æ„</strong>ï¼Œä¸¤ç«¯è§’è‰²å›ºå®šï¼Œä¸”ç”¨æˆ·ä¹‹é—´ä¸é€šä¿¡</li><li><strong>P2Pï¼ˆPeer To Peerï¼‰ç»“æ„</strong> å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„ç»“åˆä½“ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„åœ°ä½åªæ˜¯åœ¨ä¸€æ¬¡é€šä¿¡è¿‡ç¨‹ä¸­ä¸å˜</li><li><strong>æ··åˆç»“æ„</strong> ä¸­å¿ƒæœåŠ¡å™¨+å¯¹ç­‰å®¢æˆ·ç«¯ç›´æ¥é€šä¿¡</li></ul></li><li><strong>ç½‘ç»œåº”ç”¨åŸºæœ¬åŸç†</strong><ul><li>æœ¬è´¨éƒ½æ˜¯CSç»“æ„</li><li>æœåŠ¡å™¨ç«¯è¢«åŠ¨ç­‰å¾…è¯·æ±‚ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·é€šä¿¡è¯·æ±‚æœåŠ¡</li><li>åº”ç”¨è¿›ç¨‹éµå¾ªåº”ç”¨å±‚åè®®</li></ul></li></ul><h2 id="åŸŸåç³»ç»ŸDNS"><a href="#åŸŸåç³»ç»ŸDNS" class="headerlink" title="åŸŸåç³»ç»ŸDNS"></a>åŸŸåç³»ç»ŸDNS</h2><p>ç”¨IPåœ°å€å”¯ä¸€çš„æ ‡è¯†é€šä¿¡åŒæ–¹ï¼Œä½†IPä¸æ–¹ä¾¿è®°å¿†ä½¿ç”¨ã€‚ä½¿ç”¨åŸŸåï¼Œå†ç”±ç³»ç»Ÿè§£æä¸ºIPåœ°å€</p><ul><li>é¡¶çº§åŸŸåå‘½åæ–¹æ³•ï¼š<br>1 å›½å®¶åŸŸånTLDï¼› [cnä¸­å›½ â€¦]<br>2 é€šç”¨é¡¶çº§åŸŸågTLDï¼ˆç»„ç»‡ï¼‰ï¼› [comä¼ä¸š netç½‘ç»œç»„ç»‡ orgéè¥åˆ©æ€§ç»„ç»‡ eduæ•™è‚²æœºæ„ govæ”¿åºœ â€¦]<br>3 åŸºç¡€ç»“æ„åŸŸå<br>ä¸‰çº§åŸŸåä¸€èˆ¬ä»£è¡¨ä¼ä¸šå†…éƒ¨çš„ä¸»æœºåï¼Œä½¿ç”¨æ—¶ç”±å¶èŠ‚ç‚¹çº§çº§å¾€ä¸Š<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/åŸŸåæ ‘çŠ¶ç»“æ„.png" alt="å±‚æ¬¡æ ‘çŠ¶ç»“æ„"></li><li>ç›®å‰å­˜åœ¨13ä¸ªDNSæ ¹åŸŸåæœåŠ¡å™¨ï¼Œa.root-server.netä¸ºä¸€å°æ ¹åŸŸåæœåŠ¡å™¨åŸŸå</li><li>å¤§éƒ¨åˆ†æ ¹åŸŸæœåŠ¡å™¨ç”±å¤šå°ç‹¬ç«‹ç‰©ç†æœåŠ¡å™¨æ„æˆçš„æœåŠ¡å™¨é›†ç¾¤ï¼Œè€Œæœ‰çš„æ˜¯ç”±åˆ†å¸ƒåœ¨ä¸åŒä½ç½®çš„å¤šå°é•œåƒæœåŠ¡å™¨</li><li>åŸŸåæœåŠ¡å™¨<ul><li>å»ºç«‹åˆ†å¸ƒå¼æ•°æ®åº“å‚¨å­˜åŸŸåï¼Œæ ¹æ®ç”¨æˆ·è¯·æ±‚å°†åŸŸåæ˜ å°„ä¸ºIPåœ°å€</li><li>æœåŠ¡å™¨åˆ†ç±»ï¼šæ ¹åŸŸåï¼Œé¡¶çº§åŸŸåï¼Œæƒå¨åŸŸåï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨</li></ul></li><li>åŸŸåè§£æ<ul><li>é€’å½’æŸ¥è¯¢ï¼ŒæœåŠ¡å™¨ä»£æ›¿ä¸»æœºè¿›è¡ŒæŸ¥è¯¢</li><li>è¿­ä»£æŸ¥è¯¢ã€‚æœåŠ¡å™¨è¿”å›ä¸‹ä¸€æœåŠ¡å™¨ï¼Œç”±ä¸»æœºè‡ªè¡ŒæŸ¥è¯¢<h2 id="ä¸‡ç»´ç½‘åº”ç”¨"><a href="#ä¸‡ç»´ç½‘åº”ç”¨" class="headerlink" title="ä¸‡ç»´ç½‘åº”ç”¨"></a>ä¸‡ç»´ç½‘åº”ç”¨</h2></li></ul></li><li>webæœåŠ¡å™¨ï¼Œå‘é€è¶…æ–‡æœ¬ï¼Œå†ç”±æµè§ˆå™¨è§£æ</li><li>æµè§ˆå™¨ï¼Œç½‘é¡µè¶…é“¾æ¥ï¼ŒåŒ…å«URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼ŒURLåŒ…å«æœåŠ¡å™¨åŸŸåã€‚</li><li>TCPè¿æ¥ï¼ˆä¿è¯ä¼ è¾“å¯é æ€§ï¼‰</li><li>è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTPï¼ˆç”±HTMLç¼–å†™ï¼‰<ul><li>éæŒä¹…è¿æ¥ é¦–æ¬¡å»ºç«‹TCPè¿æ¥ï¼Œè¯·æ±‚HTMLé¡µé¢ï¼Œè¿æ¥æ–­å¼€ã€‚è§£æé¡µé¢åï¼Œéœ€è¦å†å‘æœåŠ¡å™¨è·å–è‹¥å¹²èµ„æºå¯¹è±¡ã€‚<ul><li>ä¸²è¡Œè¿æ¥ï¼šæ¯æ¬¡åªå‘æœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”æ¯æ¬¡éƒ½è¦é‡æ–°å»ºç«‹TCPè¿æ¥ã€‚</li><li>å¹¶è¡Œè¿æ¥ï¼šä¸€æ¬¡å‘æœåŠ¡å™¨åŒæ—¶å‘é€è‹¥å¹²è¯·æ±‚ï¼Œå»ºç«‹è‹¥å¹²è¿æ¥<br>è¦æ±‚å¯¹æ–¹æœåŠ¡å™¨å…è®¸å»ºç«‹ä¸‰æ¡è¿æ¥</li></ul></li><li>æŒä¹…è¿æ¥<ul><li>éæµæ°´æ–¹å¼æŒä¹…è¿æ¥ å»ºç«‹TCPï¼Œè¯·æ±‚htmlï¼Œå†ä¾æ¬¡è¯·æ±‚èµ„æºï¼Œç›´åˆ°æ‰€æœ‰èµ„æºè¯·æ±‚å®Œæ¯•å†é‡Šæ”¾è¿æ¥</li><li>æµæ°´æ–¹å¼æŒä¹…è¿æ¥ è·å–htmlåï¼ŒåŒæ—¶å‘å‡ºä¸‰ä¸ªTCPè¿æ¥ã€‚å¯¹æœåŠ¡å™¨å‹åŠ›è¾ƒå¤§</li></ul></li><li>HTTPæŠ¥æ–‡ è¯·æ±‚æŠ¥æ–‡ &amp; å“åº”æŠ¥æ–‡<ul><li>å…¸å‹çš„è¯·æ±‚æ–¹æ³•ï¼šGET, HEAD, POST, OPTION, PUTç­‰ã€‚<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTPæŠ¥æ–‡.png" alt="HTTPæŠ¥æ–‡"><br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡.png" alt="è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡"><br>ï¼ˆçŠ¶æ€ç çš„çŸ­è¯­æ˜¯å¯¹çŠ¶æ€ç çš„ç®€å•æè¿°ï¼‰</li></ul></li></ul></li></ul><table><thead><tr><th>çŠ¶æ€ç </th></tr></thead><tbody><tr><td>1Ã—Ã—</td><td>ä¿¡æ¯æç¤ºï¼Œéœ€è¿›ä¸€æ­¥äº¤äº’</td></tr><tr><td>2Ã—Ã—</td><td>æˆåŠŸ</td></tr><tr><td>3Ã—Ã—</td><td>é‡å®šå‘ï¼Œèµ„æºå·²è½¬ç§»</td></tr><tr><td>4Ã—Ã—</td><td>å®¢æˆ·ç«¯é”™è¯¯</td></tr><tr><td>5Ã—Ã—</td><td>æœåŠ¡ç«¯å™¨é”™è¯¯</td></tr></tbody></table><ul><li>Cookie å°å‹æ–‡æœ¬æ–‡ä»¶ï¼Œå¼¥è¡¥äº†httpæ— çŠ¶æ€æ€§çš„ä¸è¶³ï¼Œæœ‰åˆ©äºå¯¹ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªæˆ–è¿›è¡Œé’ˆå¯¹æ€§æœåŠ¡</li></ul><ul><li>é¦–æ¬¡è®¿é—®ï¼ŒæœåŠ¡å™¨ç»™ç”¨æˆ·ç¼–å·å¹¶è®¾ç½®IDï¼Œå°†å¸¦ç¼–å·çš„Cookieå‘é€å›ç»™ç”¨æˆ·</li><li>ç”¨æˆ·æµè§ˆå™¨ä¿å­˜è¯¥Cookieæ–‡ä»¶ï¼Œå¹¶åœ¨ä¸‹ä¸€æ¬¡è®¿é—®æ—¶ä¸€å¹¶å‘é€ç»™æœåŠ¡ç«¯<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/Cookie.png" alt="Cookieå·¥ä½œåŸç†"></li></ul><h2 id="Internetç”µå­é‚®ä»¶"><a href="#Internetç”µå­é‚®ä»¶" class="headerlink" title="Internetç”µå­é‚®ä»¶"></a>Internetç”µå­é‚®ä»¶</h2><ul><li>ç”µå­é‚®ä»¶ç³»ç»ŸåŒ…æ‹¬é‚®ä»¶æœåŠ¡å™¨ï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼ˆSMTPï¼‰ï¼Œç”¨æˆ·ä»£ç†ï¼Œé‚®ä»¶è¯»å–åè®®ç­‰ã€‚</li><li>SMTPæ˜¯Internetç”µå­é‚®ä»¶ä¸­æ ¸å¿ƒåº”ç”¨å±‚åè®®ï¼Œå®ç°é‚®ä»¶æœåŠ¡å™¨ä¹‹é—´æˆ–ç”¨æˆ·ä»£ç†åˆ°é‚®ä»¶æœåŠ¡å™¨çš„ä¼ è¾“ï¼Œé»˜è®¤ç«¯å£ä¸º25ã€‚ä½¿ç”¨ä¼ è¾“å±‚TCPåè®®è¿›è¡Œå¯é ä¿¡æ¯ä¼ è¾“</li><li><p>åº”ç”¨å±‚äº¤äº’é˜¶æ®µï¼šæ¡æ‰‹é˜¶æ®µï¼Œé‚®ä»¶ä¼ è¾“é˜¶æ®µï¼Œå…³é—­é˜¶æ®µ</p><blockquote><p><strong>SMTPåè®®ç¤ºä¾‹</strong><br>C: telent SMTP.163.com 25  //ä»¥telenetæ–¹å¼è¿æ¥163é‚®ä»¶æœåŠ¡å™¨<br>S: 220 163.com Anti-spam GT for Coremail System  //220ä¸ºå“åº”æ•°å­—ï¼Œå…¶åä¸ºæ¬¢è¿ä¿¡æ¯<br>C: HELO SMTP.163.com //HELOå‘å‡ºæ¡æ‰‹è¯·æ±‚ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒHELOä¸»è¦ç”¨æ¥æŸ¥è¯¢æœåŠ¡å™¨æ”¯æŒçš„æ‰©å……åŠŸèƒ½<br>S: 250-mail<br>S: 250-AUTH LOGIN PLAIN<br>S: 250 8BITMIME //æœ€åä¸€ä¸ªå“åº”æ•°å­—åº”ç­”ç ä¹‹åè·Ÿçš„æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œè€Œä¸æ˜¯â€™-â€˜<br>C: AUTH LOGIN   //è¯·æ±‚è®¤è¯<br>S: 334 dxNlcm5hbWU6  //æœåŠ¡å™¨çš„å“åº”â€”â€”ç»è¿‡base64ç¼–ç äº†çš„â€œUsernameâ€=<br>C: Y29zdGFAYW1heGl0Lm5ldA==  //å‘é€ç»è¿‡BASE64ç¼–ç äº†çš„ç”¨æˆ·å<br>S: 334 UGFzc3dvcmQ6  //ç»è¿‡BASE64ç¼–ç äº†çš„â€Password:â€=<br>C: MTk4MjIxNA==  //å®¢æˆ·ç«¯å‘é€çš„ç»è¿‡BASE64ç¼–ç äº†çš„å¯†ç <br>S: 235 auth successfully  //è®¤è¯æˆåŠŸ<br>// è¿›å…¥é‚®ä»¶ä¼ è¾“é˜¶æ®µ<br>C: MAIL FROM: <a href="mailto:bripengandre@163.com">bripengandre@163.com</a>  //å‘é€è€…é‚®ç®±<br>S: 250 <a href="mailto:bripengandre@163.com">bripengandre@163.com</a> â€¦ Sender ok //â€œâ€¦â€ä»£è¡¨çœç•¥äº†ä¸€äº›å¯è¯»ä¿¡æ¯<br>C: RCPT TO: <a href="mailto:bripengandre@smail.hust.edu.cn">bripengandre@smail.hust.edu.cn</a>ã€€//æ¥æ”¶è€…é‚®ç®±<br>S: 250 <a href="mailto:bripengandre@163.com">bripengandre@163.com</a> â€¦ Recipient ok<br>C: DATA //è¯·æ±‚å‘é€æ•°æ®<br>S: 354 Enter mail, end with â€œ.â€ on a line by itself<br>C: Enjoy Protocol Studing   // é‚®ä»¶å†…å®¹<br>C: .<br>S: 250 Message sent<br>C: QUIT //é€€å‡ºè¿æ¥<br>S: 221 Bye    // closing connection</p></blockquote></li><li><p>ç”µå­é‚®ä»¶æ ¼å¼ï¼šé¦–éƒ¨ï¼Œç©ºç™½è¡Œï¼Œä¸»ä½“ã€‚To, Subject, Cc, From, Date, Reply-Toç­‰å…³é”®å­—ã€‚</p></li><li>MIME å¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ã€‚å°†éAScIIè½¬æ¢ä¸ºASCIIï¼Œå†åˆ©ç”¨SMTPè¿›è¡Œä¼ è¾“ã€‚é‚®ä»¶é¦–éƒ¨å¢åŠ MIMEï¼Œè¯´æ˜ä¸»ä½“åŸæœ¬æ•°æ®ç±»å‹åŠç¼–ç æ ‡å‡†</li><li>é‚®ä»¶è¯»å–åè®®<ul><li>é‚®å±€åè®® POP3(å°†é‚®ä»¶ä¸‹è½½åˆ°æœ¬åœ°æ“ä½œï¼Œä¸ä¼šåŒæ­¥ï¼Œä¸‹è½½åæ— éœ€è”ç½‘å)ã€‚<strong>é»˜è®¤ç«¯å£å·110</strong></li><li>äº’è”ç½‘é‚®ä»¶è®¿é—®åè®® IMAPï¼ˆç›´æ¥æ“ä½œé‚®ä»¶æœåŠ¡å™¨ï¼‰</li><li>HTTPï¼ˆé€šè¿‡æœåŠ¡å™¨ç½‘å€è®¿é—®ï¼‰</li></ul></li></ul><h2 id="FTPæ–‡ä»¶ä¼ è¾“åè®®"><a href="#FTPæ–‡ä»¶ä¼ è¾“åè®®" class="headerlink" title="FTPæ–‡ä»¶ä¼ è¾“åè®®"></a>FTPæ–‡ä»¶ä¼ è¾“åè®®</h2><p>äº’è”ç½‘ä¸­å®ç°ä¸¤ä¸»æœºé—´æ–‡ä»¶ä¼ è¾“çš„ <strong>åº”ç”¨å±‚</strong> åè®®ã€‚åˆ©ç”¨ä¼ è¾“å±‚TCPåè®®ã€‚<br>CSæ¨¡å¼ã€‚ä½†ä¸åŒäºå…¶ä»–æœåŠ¡ï¼Œéœ€è¦é‡‡ç”¨ä¸¤ç§è¿æ¥ã€‚æ§åˆ¶è¿æ¥ï¼ˆ<strong>21ç«¯å£</strong>ï¼‰ä¼ è¾“æ§åˆ¶å‘½ä»¤ï¼Œæ•°æ®è¿æ¥ï¼ˆ<strong>20ç«¯å£</strong>ï¼‰ä¼ è¾“æ–‡ä»¶å†…å®¹<br>é€‚ç”¨äºä¼ è¾“è¾ƒå¤§æ–‡ä»¶ã€‚ä½¿æ§åˆ¶å‘½ä»¤æ›´å¥½æ›´å¿«ä¼ è¾“</p><h2 id="P2Påº”ç”¨"><a href="#P2Påº”ç”¨" class="headerlink" title="P2Påº”ç”¨"></a>P2Påº”ç”¨</h2><ul><li>å……åˆ†èšé›†ç«¯ç³»ç»Ÿçš„è®¡ç®—èƒ½åŠ›åŠç½‘ç»œä¼ è¾“å¸¦å®½ï¼Œå¯¹æœåŠ¡å™¨ä¾èµ–å¾ˆå°</li><li>å¯ä»¥è¯·æ±‚å¯¹ç­‰çš„ç«¯ç³»ç»Ÿè¿›è¡Œæ•°æ®è·å–ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è¯·æ±‚æœåŠ¡å™¨ï¼Œå„è·å–ä¸€éƒ¨åˆ†æ•°æ®åœ¨ç»„åˆ</li></ul><h2 id="Socketæ¥å£æ¨¡å‹"><a href="#Socketæ¥å£æ¨¡å‹" class="headerlink" title="Socketæ¥å£æ¨¡å‹"></a>Socketæ¥å£æ¨¡å‹</h2><p>ç½‘ç»œåº”ç”¨è¿›ç¨‹é€šä¿¡é€šè¿‡APIæ¥å£è¯·æ±‚çš„åº•å±‚åè®®çš„æœåŠ¡ã€‚æ ¹æ®å®é™…ä½¿ç”¨ä¼ è¾“å±‚çš„TCPæˆ–UDPä¼ è¾“ã€‚<br>åˆ›å»ºç›¸åº”æä¾›çš„æ¥å£è°ƒç”¨ä¸åŒçš„ä¼ è¾“åè®®</p><ul><li>æ•°æ®æŠ¥ç±»å‹Sock_dgramå¯¹åº”UDPæœåŠ¡<ul><li>å®¢æˆ·ç«¯é€šè¿‡ä¸´æ—¶ç«¯å£ç›´æ¥å‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚æœåŠ¡å™¨é€šè¿‡ç»‘å®šå›ºå®šç«¯å£å·ï¼Œæ— éœ€å»ºç«‹è¿æ¥ï¼Œç›´æ¥ç›‘å¬ç­‰å¾…å®¢æˆ·ç«¯æ•°æ®</li></ul></li><li>æµå¼å¥—æ¥å­—Sock_streamå¯¹åº”TCPæœåŠ¡<ul><li>æœåŠ¡ç«¯é€šè¿‡ç»‘å®šå›ºå®šçš„ç«¯å£å·ï¼Œç›‘å¬è¯·æ±‚ã€‚å®¢æˆ·ç«¯æ— éœ€ç»‘å®šç«¯å£ï¼Œé€šè¿‡socket()ä¸´æ—¶è·å–ç«¯å£å·</li><li>å»ºç«‹TCPè¿æ¥ï¼Œå¼€å§‹æ•°æ®äº¤äº’</li><li>äº¤äº’ç»“æŸï¼Œå®¢æˆ·ç«¯å…³é—­æ¥å£ï¼›æœåŠ¡ç«¯å…³é—­è¿æ¥ï¼Œæœ€ååœ¨å…³é—­ç«¯å£</li></ul></li><li>åŸå§‹å¥—æ¥å­—Sock_rawç›´æ¥è°ƒç”¨ç½‘ç»œå±‚çš„æœåŠ¡ï¼Œç›´æ¥æ„å»ºIPåŒ…è®¿é—®ã€‚ä¸å†ä¾èµ–ä¼ è¾“å±‚çš„æœåŠ¡</li></ul><h1 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h1><h3 id="ä¼ è¾“å±‚åŸºæœ¬æœåŠ¡"><a href="#ä¼ è¾“å±‚åŸºæœ¬æœåŠ¡" class="headerlink" title="ä¼ è¾“å±‚åŸºæœ¬æœåŠ¡"></a>ä¼ è¾“å±‚åŸºæœ¬æœåŠ¡</h3><p>æ ¸å¿ƒä»»åŠ¡æ˜¯ä¸ºåº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡æœåŠ¡ã€‚<br>ç½‘ç»œå±‚å®ç°çš„æ˜¯ä¸»æœºåˆ°ä¸»æœºçš„ä¼ è¾“æœåŠ¡ã€‚ä¼ è¾“å±‚ç«¯ç‚¹æŒ‡çš„æ˜¯ä¸»æœºä¸­è¿è¡Œçš„åº”ç”¨è¿›ç¨‹ã€‚<br>ä¼ è¾“å±‚åŠŸèƒ½ï¼š<strong>ä¼ è¾“å±‚åè®®æä¾›é€»è¾‘é€šä¿¡æœåŠ¡ï¼Œåªéœ€åœ¨ç«¯ç³»ç»Ÿä¸­å®ç°</strong>ã€‚ä¸­é—´çš„èŠ‚ç‚¹å¦‚è·¯ç”±å™¨äº¤æ¢æœºæ— éœ€å®ç°ä¼ è¾“å±‚åŠŸèƒ½ï¼Œæé«˜æ•ˆç‡<br>ä¸»è¦åŠŸèƒ½ï¼š</p><ul><li>ä¼ è¾“å±‚å¯»å€<ul><li>é€šè¿‡ <strong>ç«¯å£å·</strong> æ‰¾åˆ°å¯¹åº”åº”ç”¨ç¨‹åºã€‚åœ¨å…¨ç½‘èŒƒå›´å†…åˆ©ç”¨ <strong>IP+ç«¯å£å·</strong> å”¯ä¸€çš„æ ‡ç¤ºä¸€ä¸ªé€šä¿¡ç«¯ç‚¹ï¼ˆåº”ç”¨ç¨‹åºï¼‰</li><li>ä¼ è¾“å±‚ç«¯å£å·ä¸º16ä½äºŒè¿›åˆ¶ã€‚åˆ†ä¸ºä¸‰ç±»ï¼š</li></ul><ol><li>ç†ŸçŸ¥ç«¯å£å·ï¼š1ï½1023ã€‚å¦‚http:80</li><li>ç™»è®°ç«¯å£ï¼š1024~49151ã€‚ä¸ºæ— ç†ŸçŸ¥ç«¯å£å·çš„ç¨‹åºä½¿ç”¨ï¼Œéœ€è¦åœ¨IANAç™»è®°ä»¥é˜²é‡å¤</li><li>å®¢æˆ·ç«¯å£å·/çŸ­æš‚ç«¯å£å·ï¼š49152ï½65535ã€‚ç”¨äºä¸´æ—¶ç”³è¯·åˆ†é…æŒ‰ä½¿ç”¨ã€‚ä¸å›ºå®šã€‚</li></ol></li><li>åº”ç”¨å±‚æŠ¥æ–‡çš„åˆ†æ®µå’Œå¯»å€</li><li>æŠ¥æ–‡çš„å·®é”™æ£€æµ‹</li><li>è¿›ç¨‹é—´ç«¯åˆ°ç«¯çš„å¯é æ•°æ®ä¼ è¾“æ§åˆ¶ï¼ˆæ˜¯å¦æ”¶åˆ°ï¼‰</li><li>é¢å‘åº”ç”¨å±‚çš„å¤ç”¨å’Œåˆ†è§£</li><li>ç«¯åˆ°ç«¯çš„æµé‡æ§åˆ¶</li><li>æ‹¥å¡æ§åˆ¶</li></ul><ul><li>æ— è¿æ¥æœåŠ¡UDPï¼šæ•°æ®äº¤äº’ä¹‹å‰æ— éœ€å¯¹ç«¯è¿›è¡Œä»»ä½•ä¿¡æ¯äº¤æ¢ï¼ˆæ¡æ‰‹ï¼‰ï¼Œç›´æ¥æ„é€ ä¼ è¾“å±‚æŠ¥æ–‡æ®µå¹¶å‘æ¥æ”¶ç«¯å‘é€</li><li>é¢å‘è¿æ¥çš„æœåŠ¡TCPï¼šä¼ è¾“å‰åŒæ–¹äº¤æ¢æ§åˆ¶ä¿¡æ¯ï¼Œå»ºç«‹é€»è¾‘è¿æ¥ï¼Œåœ¨ä¼ è¾“æ•°æ®ï¼Œæœ€åæ‹†é™¤è¿æ¥</li></ul><h3 id="ä¼ è¾“å±‚çš„å¤ç”¨ä¸åˆ†è§£"><a href="#ä¼ è¾“å±‚çš„å¤ç”¨ä¸åˆ†è§£" class="headerlink" title="ä¼ è¾“å±‚çš„å¤ç”¨ä¸åˆ†è§£"></a>ä¼ è¾“å±‚çš„å¤ç”¨ä¸åˆ†è§£</h3><p>æ”¯æŒä¼—å¤šè¿›ç¨‹ä½¿ç”¨é€šè¿‡åŒä¸€åè®®è¿›è¡Œä¼ è¾“</p><ul><li>å¤šè·¯å¤ç”¨ï¼šä»æ¯ä¸ªåº”ç”¨ä¸­è·å–æ˜¯æ•°æ®è¿›è¡Œå°è£…å‘é€</li><li>å¤šè·¯åˆ†è§£ï¼šä»æ•°æ®ä¸­é€šè¿‡ç«¯å£å·åˆ†å„ä¸ªåº”ç”¨</li></ul><h4 id="æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£"><a href="#æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£" class="headerlink" title="æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£"></a>æ— è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£</h4><ul><li>UDPå¥—æ¥å­—ï¼š&lt;ç›®çš„IP, ç›®çš„ç«¯å£å·&gt;</li><li>ç«¯å£å·æ˜¯UDPå®ç°å¤šè·¯å¤ç”¨çš„é‡è¦ä¾æ®</li></ul><h4 id="é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£"><a href="#é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£" class="headerlink" title="é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£"></a>é¢å‘è¿æ¥çš„å¤šè·¯å¤ç”¨ä¸å¤šè·¯åˆ†è§£</h4><ul><li>TCPå¥—æ¥å­—æ ‡ç¤ºä¸€æ¡TCPè¿æ¥ï¼š&lt;æºIP, æºç«¯å£ï¼Œç›®çš„IP, ç›®çš„ç«¯å£å·&gt;</li><li>ä¸€æ®µTCPæŠ¥æ–‡åˆ°è¾¾ä¸»æœºæ—¶ï¼Œæ ¹æ®æ­¤å°†æŠ¥æ–‡åˆ†è§£åˆ°ç›¸åº”å¥—æ¥å­—ï¼ˆåŒä¸€è¿æ¥ï¼‰</li></ul><h3 id="åœ-ç­‰åè®®ä¸æ»‘åŠ¨çª—å£åè®®"><a href="#åœ-ç­‰åè®®ä¸æ»‘åŠ¨çª—å£åè®®" class="headerlink" title="åœ-ç­‰åè®®ä¸æ»‘åŠ¨çª—å£åè®®"></a>åœ-ç­‰åè®®ä¸æ»‘åŠ¨çª—å£åè®®</h3><h4 id="å®ç°å¯é ä¼ è¾“çš„æªæ–½ï¼š"><a href="#å®ç°å¯é ä¼ è¾“çš„æªæ–½ï¼š" class="headerlink" title="å®ç°å¯é ä¼ è¾“çš„æªæ–½ï¼š"></a>å®ç°å¯é ä¼ è¾“çš„æªæ–½ï¼š</h4><ol><li>å·®é”™æ£€æµ‹ï¼šåˆ©ç”¨å·®é”™ç¼–ç å®ç°æ•°æ®åŒ…æ£€æµ‹</li><li>ç¡®è®¤ï¼šå‘å‘é€æ–¹åé¦ˆæ¥å—çŠ¶æ€</li><li>é‡ä¼ </li><li>åºå·ï¼šç¡®ä¿æ•°æ®æŒ‰åºæäº¤</li><li>è®¡æ—¶å™¨ï¼šè§£å†³æ•°æ®ä¸¢å¤±é—®é¢˜</li></ol><h4 id="åœç­‰åè®®"><a href="#åœç­‰åè®®" class="headerlink" title="åœç­‰åè®®"></a>åœç­‰åè®®</h4><p>æ¯å‘é€ä¸€ä¸ªæŠ¥æ–‡åå°±åœä¸‹ç­‰å¾…æ¥æ”¶æ–¹ç¡®è®¤</p><ul><li>å‘é€ç»è¿‡å·®é”™ç¼–ç ä¸ç¼–å·çš„æŠ¥æ–‡æ®µ</li><li>ç¡®è®¤æ¥æ”¶åˆ™å‘é€ACKï¼Œå¦åˆ™ä¸¢å¼ƒæŠ¥æ–‡å‘é€NCK</li><li>æ ¹æ®åé¦ˆçŠ¶æ€é€‰æ‹©é‡å‘æˆ–è€…ç»§ç»­</li></ul><h4 id="æ»‘åŠ¨çª—å£åè®®"><a href="#æ»‘åŠ¨çª—å£åè®®" class="headerlink" title="æ»‘åŠ¨çª—å£åè®®"></a>æ»‘åŠ¨çª—å£åè®®</h4><p>æ€§èƒ½é—®é¢˜ï¼šåœç­‰æœºåˆ¶é™ä½ä¿¡é“åˆ©ç”¨ç‡ã€‚<br>è§£å†³æ–¹æ¡ˆï¼šæµæ°´çº¿åè®®/ç®¡é“åè®®ï¼šå…è®¸å‘é€æ–¹åœ¨æœªæ”¶åˆ°ç¡®è®¤å‰ä¸æ–­å‘é€å¤šä¸ª(åç»­)åˆ†ç»„ã€‚<br>ç»§ç»­æ”¹è¿›ï¼šå¢åŠ åˆ†ç»„åºå·èŒƒå›´ï¼›å‘ï¼Œæ”¶æ–¹å¿…é¡»å¯ä»¥ç¼“å­˜å¤šä¸ªåˆ†ç»„ï¼ˆå¯¹æœªæ”¶åˆ°ç¡®è®¤çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼‰<br>ä¸¤ç§æœ‰ä»£è¡¨æ€§çš„æ»‘åŠ¨çª—å£åè®®ï¼š</p><ul><li>å›é€€Næ­¥åè®®ï¼ˆGo-Back-N, GBNï¼‰ï¼šæ¥æ”¶çª—å£å¤§å°ä¸º1ï¼Œåªæ¥æ”¶1ä¸ªæŒ‰æŒ‰åºåˆ°è¾¾çš„åˆ†ç»„ã€‚å‡ºé”™åˆ†ç»„ä»¥åçš„å…¨éƒ¨ä¸¢å¼ƒé‡ä¼ </li><li>é€‰æ‹©é‡ä¼ åè®®ï¼ˆSelective RePeat, SRï¼‰ï¼šæ¥æ”¶çª—å£&gt;1ï¼Œç¼“å­˜æ­£ç¡®ä½†å¤±åºçš„åˆ†ç»„</li></ul><h3 id="ç”¨æˆ·æ•°æ®æŠ¥åè®®-UDP"><a href="#ç”¨æˆ·æ•°æ®æŠ¥åè®®-UDP" class="headerlink" title="ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP"></a>ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP</h3><p>UDPæ•°æ®æŠ¥ç»“æ„</p><ul><li>æºå’Œç›®çš„ç«¯å£å·ï¼šç”¨äºUDPå¤ç”¨åˆ†è§£</li><li>é•¿åº¦å­—æ®µï¼šUDPæŠ¥æ–‡æ®µä¸­çš„å­—èŠ‚æ•°</li><li>æ ¡éªŒå’Œï¼šæ¥æ”¶æ–¹æ£€æµ‹æŠ¥æ–‡æ®µæ˜¯å¦å‡ºé”™<br>æ ¡éªŒå’Œè®¡ç®—<ol><li>å¯¹æ‰€æœ‰å‚åŠ è¿ç®—çš„å†…å®¹æŒ‰16ä½å¯¹é½æ±‚å’Œ</li><li>æ±‚å’Œè¿‡ç¨‹ä¸­é‡åˆ°æº¢å‡ºï¼ˆè¿›ä½ï¼‰éƒ½ä¼šè¢«å›å·ï¼ˆè¿›ä½ä¸å’Œçš„æœ€ä½ä½å†åŠ ï¼‰</li><li>å¾—åˆ°çš„å’Œå–åç </li></ol></li></ul><h3 id="ä¼ è¾“æ§åˆ¶åè®®-TCP"><a href="#ä¼ è¾“æ§åˆ¶åè®®-TCP" class="headerlink" title="ä¼ è¾“æ§åˆ¶åè®® TCP"></a>ä¼ è¾“æ§åˆ¶åè®® TCP</h3><p>TCPæŠ¥æ–‡é¦–éƒ¨ç»“æ„</p><ul><li>æºä¸ç›®çš„ç«¯å£å·</li><li>åºå· æ ‡ç¤ºè¯¥æŠ¥æ–‡åœ¨æ•´ä¸ªåˆ†ç»„ä¸­çš„åºå·</li><li>ç¡®è®¤å· åé¦ˆæŸåˆ†ç»„å‘é€çŠ¶æ€</li><li>æ•°æ®åç§» åŒåºå·çš„æŠ¥æ–‡å†æ‹†åˆ†åçš„æ•°æ®ä½ç½®</li><li>URGï¼Œæ ‡ç¤ºç´§æ€¥æŒ‡é’ˆä½æ˜¯å¦æœ‰æ•ˆ</li><li><strong>ACK</strong> ç¡®è®¤ä½ï¼Œæ ‡ç¤ºç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆ</li><li>PSH é€šçŸ¥å¯ä»¥å¾ˆå¿«å¯¹æ•°æ®è¿›è¡Œæäº¤</li><li>RST å¤ä½ï¼Œå‡ºç°é”™è¯¯ï¼Œéœ€è¦é‡ç½®è¿æ¥</li><li><strong>SYN</strong> åŒæ­¥è¯·æ±‚ï¼Œåå•†åºå·ç­‰ä¿¡æ¯</li><li>FIN é€šçŸ¥æ‹†é™¤è¿æ¥</li><li>çª—å£ æµé‡æ§åˆ¶ï¼Œçª—å£å¤§å°å¯æœ‰åŒæ–¹æ§åˆ¶</li><li>æ ¡éªŒå’Œ<br>// ä»¥ä¸Šä¸º <strong>TCPçš„å›ºå®šé¦–éƒ¨ï¼Œ20å­—èŠ‚</strong></li><li>é€‰é¡¹</li><li>å¡«å…… é¦–éƒ¨å¤§å°éœ€ä¸º4å­—èŠ‚çš„å€æ•°<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCPæŠ¥æ–‡ç»“æ„.jpg" alt="TCPæŠ¥æ–‡ç»“æ„"></li></ul><h4 id="TCPè¿æ¥"><a href="#TCPè¿æ¥" class="headerlink" title="TCPè¿æ¥"></a>TCPè¿æ¥</h4><p>TCPä¼ è¾“æœºåˆ¶åŒ…æ‹¬å·®é”™ç¼–ç ï¼Œç¡®è®¤ï¼Œåºå·ï¼Œé‡ä¼ ï¼Œè®¡æ—¶å™¨ï¼ˆå®ç°é‡ä¼ ï¼‰ç­‰<br>TCPçš„å¯é æ•°æ®ä¼ è¾“åŸºäºæ»‘åŠ¨çª—å£åè®®ï¼Œå‘é€çª—å£åŠ¨æ€å˜åŒ–ï¼ˆæµé‡æ§åˆ¶ï¼‰</p><h5 id="è¿æ¥å»ºç«‹-ä¸‰æ¬¡æ¡æ‰‹"><a href="#è¿æ¥å»ºç«‹-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="è¿æ¥å»ºç«‹-ä¸‰æ¬¡æ¡æ‰‹"></a>è¿æ¥å»ºç«‹-ä¸‰æ¬¡æ¡æ‰‹</h5><ol><li><strong>SYNè¿æ¥è¯·æ±‚</strong> syn = 1, seq = x(åŒæ­¥è¯·æ±‚ï¼Œä¸”åˆå§‹åºå·ä¸ºx)ã€å®¢æˆ·ç«¯çŠ¶æ€ä¸ºSYN-SENTã€‘</li><li><strong>SYNACKç¡®è®¤</strong> syn = 1, ACK = 1, seq = y, ack = x+1ï¼ˆxå·²æ”¶åˆ°è¯·æ±‚x+1ï¼Œå‘ŠçŸ¥æœåŠ¡ç«¯åˆå§‹åºå·ï¼‰ã€æœåŠ¡ç«¯çŠ¶æ€SYN-RVDã€‘</li><li><strong>ACKç¡®è®¤</strong> ACK = 1, seq = x+1, ack = y+1<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/TCPä¸‰æ¬¡æ¡æ‰‹.png" alt="TCPä¸‰æ¬¡æ¡æ‰‹"><h5 id="TCPæ–­å¼€-å››æ¬¡æŒ¥æ‰‹"><a href="#TCPæ–­å¼€-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCPæ–­å¼€-å››æ¬¡æŒ¥æ‰‹"></a>TCPæ–­å¼€-å››æ¬¡æŒ¥æ‰‹</h5></li><li><strong>ä»»æ„ä¸€æ–¹å‘èµ·æ–­å¼€è¯·æ±‚</strong> FIN = 1, seq = u</li><li><strong>è¿”å›ç¡®è®¤</strong> ACK = 1, seq = v, ack = u+1ã€‚è¯·æ±‚æ–¹åœæ­¢å‘é€æ•°æ®ã€‚å¦ä¸€æ–¹ç»§ç»­å‘é€æ•°æ®ã€‚</li><li><strong>å‘é€è¯·æ±‚é‡Šæ”¾è¿æ¥</strong> FIN = 1, ACK = 1, seq = w, ack = u+1</li><li><strong>æ¥æ”¶æ–¹è¿”å›ç¡®è®¤</strong> ACK = 1, seq = u+1, ack = w+1ã€‚æ¥æ”¶ç«¯æ¥æ”¶åˆ°ä»¥åå…³é—­è¿æ¥ï¼Œå‘é€ç«¯è¿›å…¥TIME-WAITé˜¶æ®µï¼Œä¸€æ®µæ—¶é—´åå…³é—­è¿æ¥</li></ol><ul><li><strong>å°è£…TCPæŠ¥æ–‡æ®µ</strong></li><li><strong>å‘å‡ºä¸€ä¸ªæŠ¥æ–‡æ®µåå¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨</strong></li><li><strong>æ ¡éªŒå’Œå‘ç°æ•°æ®å·®é”™</strong></li><li><strong>é‡æ’åºï¼Œä¸¢å¼ƒé‡å¤</strong></li><li><strong>æµé‡æ§åˆ¶</strong></li></ul><h5 id="TCPæµé‡æ§åˆ¶"><a href="#TCPæµé‡æ§åˆ¶" class="headerlink" title="TCPæµé‡æ§åˆ¶"></a>TCPæµé‡æ§åˆ¶</h5><ul><li>TCPåˆ©ç”¨çª—å£æœºåˆ¶å®ç°æµé‡æ§åˆ¶ï¼Œä½†ä¸æ˜¯ç®€å•çš„æ»‘åŠ¨çª—å£åè®®ï¼ˆçª—å£åŠ¨æ€å˜æ¢ï¼‰</li><li>TCPè¿æ¥å»ºç«‹æ—¶åŒæ–¹åˆ†é…å›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ï¼Œå‘é€æ•°æ®å¿…é¡»åœ¨ç¼“å†²åŒºæ¥çº³çš„å¤§å°<ul><li>æ¥æ”¶ç«¯ç»™å‘é€æ–¹å‘é€ç¡®è®¤æ—¶é€šçŸ¥æ¥æ”¶çª—å£å¤§å°</li><li>å‘é€ç«¯å‘é€æ•°æ®æ—¶ï¼Œä¿è¯æœªç¡®è®¤æ®µåº”ç”¨å±‚æ•°æ®ä¸è¶…è¿‡æ¥æ”¶ç«¯çª—å£å¤§å°ï¼Œä½¿å¯¹æ–¹çª—å£ä¸ä¼šäº§ç”Ÿæº¢å‡º</li></ul></li></ul><h5 id="TCPæ‹¥å¡æ§åˆ¶"><a href="#TCPæ‹¥å¡æ§åˆ¶" class="headerlink" title="TCPæ‹¥å¡æ§åˆ¶"></a>TCPæ‹¥å¡æ§åˆ¶</h5><ul><li>çª—å£æœºåˆ¶ é€šè¿‡è°ƒèŠ‚çª—å£å¤§å°å®ç°å‘é€é€Ÿç‡è°ƒèŠ‚</li><li>çª—å£è°ƒèŠ‚åŸºæœ¬ç­–ç•¥ AIMD<ul><li>åŠ æ€§å¢åŠ  ç½‘ç»œæœªæ‹¥å µï¼Œé€æ¸å¢åŠ </li><li>ä¹˜æ€§å‡å° ç½‘ç»œæ‹¥å µï¼Œé€æ¸å‡å°</li></ul></li><li>TCPæ‹¥å¡æ§åˆ¶ç®—æ³•<ul><li>æ…¢å¯åŠ¨</li><li>æ‹¥å¡é¿å…</li><li>å¿«é€Ÿé‡ä¼ </li><li>å¿«é€Ÿæ¢å¤</li></ul></li></ul><h1 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h1><p>ä¼ è¾“å±‚ä¸»è¦ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œç½‘ç»œå±‚è´Ÿè´£æ•°æ®çš„è½¬å‘å’Œå‘é€<br>ç½‘ç»œå±‚çš„ä¸»è¦ä½œç”¨æ˜¯å°†ç½‘ç»œæ•°æ®æŠ¥ä»æºä¸»æœºå‘é€åˆ°ç›®æ ‡ä¸»æœº<br>ä¸»è¦åŠŸèƒ½ï¼š</p><ul><li><strong>åˆ†ç»„è½¬å‘</strong>ï¼šåˆ†ç»„ä»ä¼ è¾“æ¥å£è½¬ç§»åˆ°è¾“å‡ºæ¥å£  </li><li><strong>è·¯ç”±é€‰æ‹©</strong>ï¼šå†³å®šåˆ†ç»„ç»è¿‡çš„è·¯ç”±æˆ–è·¯å¾„<h2 id="è·¯ç”±å™¨å†…éƒ¨ç»“æ„"><a href="#è·¯ç”±å™¨å†…éƒ¨ç»“æ„" class="headerlink" title="è·¯ç”±å™¨å†…éƒ¨ç»“æ„"></a>è·¯ç”±å™¨å†…éƒ¨ç»“æ„</h2></li><li>è·¯ç”±é€‰æ‹©å¤„ç†æœºï¼šè·¯ç”±é€‰æ‹©åè®® -&gt;è·¯ç”±è¡¨ï¼ˆè®°å½•ä¸‹ä¸€è·³çš„è·¯ç”±å™¨ï¼‰</li><li>è¾“å…¥ç«¯å£è¿›æ¥çš„æ•°æ®é€šè¿‡ <strong>è½¬å‘è¡¨</strong> è®°å½•çš„è¾“å‡ºç«¯å£</li><li>é€šè¿‡è·¯ç”±è¡¨è®°å½•æˆè½¬å‘è¡¨</li></ul><h2 id="æ•°æ®æŠ¥ç½‘ç»œ"><a href="#æ•°æ®æŠ¥ç½‘ç»œ" class="headerlink" title="æ•°æ®æŠ¥ç½‘ç»œ"></a>æ•°æ®æŠ¥ç½‘ç»œ</h2><p>æŒ‰ç…§ç›®çš„ä¸»æœºçš„åœ°å€è¿›è¡Œè·¯ç”±é€‰æ‹©çš„ç½‘ç»œï¼ˆæœ¬è´¨ä¸Šä¸å¯é ï¼Œä½†æ•ˆç‡ä¸æˆæœ¬å¥½ã€‚äº’è”ç½‘ä¾èµ–æ­¤æŠ€æœ¯å»ºç«‹ï¼‰</p><ul><li>æ— è¿æ¥</li><li>æ¯ä¸ªåˆ†ç»„ä½œä¸ºç‹¬ç«‹çš„æ•°æ®æŠ¥è¿›è¡Œé€‰è·¯ä¼ è¾“ï¼Œè·¯å¾„å¯èƒ½ä¸åŒ</li><li>åˆ†ç»„å¯èƒ½å‡ºç°ä¹±åºä¸ä¸¢å¤±</li></ul><h2 id="è™šç”µè·¯ç½‘ç»œ"><a href="#è™šç”µè·¯ç½‘ç»œ" class="headerlink" title="è™šç”µè·¯ç½‘ç»œ"></a>è™šç”µè·¯ç½‘ç»œ</h2><p>åœ¨ç½‘ç»œå±‚æä¾›çš„é¢å‘è¿æ¥çš„åˆ†ç»„äº¤æ¢æœåŠ¡<br>äº’è”ç½‘çš„æ•°æ®æŠ¥æ–¹å¼ä¸å¯é ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ­¤ä¹‹ä¸Šå»ºç«‹é¢å‘è¿æ¥çš„ä¼ è¾“å±‚æ¥ç¡®ä¿ä¼ è¾“å¯é æ€§ã€‚</p><ul><li>å»ºç«‹ä¸€æ¡ç½‘ç»œå±‚çš„é€»è¾‘è¿æ¥</li><li>ä¸éœ€è¦ä¸ºæ¯æ¡è™šç”µè·¯åˆ†é…ç‹¬äº«èµ„æºï¼ˆåŒºåˆ«ä¸ç”µè·¯äº¤æ¢ï¼Œä¿¡é“åˆ©ç”¨ç‡è¾ƒé«˜ï¼‰</li><li>æ²¿è™šç”µè·¯è·¯å¾„æŒ‰åºå‘é€åˆ†ç»„<br>å¼‚æ­¥ä¼ è¾“æ¨¡å¼çš„ç½‘ç»œå³é‡‡ç”¨æ­¤ç½‘ç»œï¼Œæˆæœ¬è¾ƒé«˜ä½†æ˜¯ä¼ è¾“è¾ƒå¯é </li></ul><h2 id="ç½‘ç»œäº’è¿"><a href="#ç½‘ç»œäº’è¿" class="headerlink" title="ç½‘ç»œäº’è¿"></a>ç½‘ç»œäº’è¿</h2><h3 id="å¼‚æ„ç½‘ç»œäº’è¿"><a href="#å¼‚æ„ç½‘ç»œäº’è¿" class="headerlink" title="å¼‚æ„ç½‘ç»œäº’è¿"></a>å¼‚æ„ç½‘ç»œäº’è¿</h3><p>ä¸¤ä¸ªç½‘ç»œä½¿ç”¨çš„æŠ€æœ¯ä¸åè®®ä¸åŒ</p><ul><li>åè®®è½¬æ¢</li><li>æ„å»ºè™šæ‹Ÿäº’è”ç½‘ç»œ ä½¿ç”¨IPåè®®ä½œä¸ºè¿™äº›ç½‘ç»œæŠ€æœ¯å’Œåè®®çš„ä¸‹å±‚åè®®ï¼Œä½¿ç”¨IPåè®®è¿›è¡Œä¼ è¾“ã€‚åœ¨IPå±‚æ¬¡æ„å»ºäº†è™šæ‹Ÿç½‘ç»œ<h3 id="ç½‘ç»œè®¾å¤‡â€“è·¯ç”±å™¨"><a href="#ç½‘ç»œè®¾å¤‡â€“è·¯ç”±å™¨" class="headerlink" title="ç½‘ç»œè®¾å¤‡â€“è·¯ç”±å™¨"></a>ç½‘ç»œè®¾å¤‡â€“è·¯ç”±å™¨</h3></li><li>è¾“å…¥è¾“å‡ºç«¯å£ ä¸åŒçš„ç½‘ç»œæŠ€æœ¯æœ‰ä¸åŒçš„ç«¯å£<br>// è¾“å…¥ç«¯å£<ol><li>çº¿è·¯æ¥æ”¶åˆ†ç»„</li><li>ç‰©ç†å±‚å¤„ç†ï¼ˆå¤„ç†ä¸åŒç½‘ç»œæŠ€æœ¯ï¼‰</li><li>æ•°æ®é“¾è·¯å±‚å¤„ç†ï¼ˆæå–å…¶ä¸­ç½‘ç»œå±‚çš„IPæ•°æ®ï¼‰</li><li>ç½‘ç»œå±‚å¤„ç†åˆ†ç»„æ’é˜Ÿï¼ˆæŸ¥è¡¨è½¬å‘è¾“å‡ºï¼Œé€šè¿‡äº¤æ¢ç»“æ„è¿›å…¥è¾“å‡ºç«¯å£ï¼‰<br>// è¾“å‡ºç«¯å£</li><li>ç½‘ç»œå±‚æ’é˜Ÿï¼Œç¼“å­˜ç®¡ç†ï¼Œæ¯æ¬¡å–å‡ºä¸€ä¸ªæ•°æ®</li><li>æ•°æ®é“¾è·¯å±‚å¤„ç†ï¼ˆå¤„ç†ä¸ºä¸åŒæŠ€æœ¯ï¼‰</li><li>ç‰©ç†å±‚å¤„ç†ï¼Œå‘é€åˆ°çº¿è·¯</li></ol></li><li>äº¤æ¢ç»“æ„è®¾è®¡<ul><li>åŸºäºå†…å­˜äº¤æ¢</li><li>åŸºäºæ€»çº¿äº¤æ¢</li><li>åŸºäºç½‘ç»œäº¤æ¢ï¼ˆèŠ‚ç‚¹å¼€å…³ï¼‰<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/è·¯ç”±å™¨äº¤æ¢ç»“æ„.png" alt="è·¯ç”±å™¨äº¤æ¢ç»“æ„"></li></ul></li><li>è·¯ç”±å¤„ç†å™¨<br>æ‰§è¡Œè·¯ç”±å™¨å„ç§æŒ‡ä»¤ï¼ŒåŒ…æ‹¬è·¯ç”±åè®®è¿è¡Œï¼Œè·¯ç”±è®¡ç®—ï¼Œè·¯ç”±è¡¨çš„æ›´æ–°ç»´æŠ¤ç­‰</li></ul><h2 id="ç½‘ç»œå±‚æ‹¥å¡æ§åˆ¶"><a href="#ç½‘ç»œå±‚æ‹¥å¡æ§åˆ¶" class="headerlink" title="ç½‘ç»œå±‚æ‹¥å¡æ§åˆ¶"></a>ç½‘ç»œå±‚æ‹¥å¡æ§åˆ¶</h2><h3 id="æ‹¥å¡ï¼šæŒç»­è¿‡è½½çš„ç½‘ç»œçŠ¶æ€ï¼Œç”¨æˆ·å¯¹ç½‘ç»œèµ„æºçš„éœ€æ±‚ï¼ˆé“¾è·¯å¸¦å®½ï¼Œå­˜å‚¨ç©ºé—´ï¼Œå¤„ç†èƒ½åŠ›ï¼‰æ€»éœ€æ±‚è¶…è¿‡å›ºæœ‰å®¹é‡"><a href="#æ‹¥å¡ï¼šæŒç»­è¿‡è½½çš„ç½‘ç»œçŠ¶æ€ï¼Œç”¨æˆ·å¯¹ç½‘ç»œèµ„æºçš„éœ€æ±‚ï¼ˆé“¾è·¯å¸¦å®½ï¼Œå­˜å‚¨ç©ºé—´ï¼Œå¤„ç†èƒ½åŠ›ï¼‰æ€»éœ€æ±‚è¶…è¿‡å›ºæœ‰å®¹é‡" class="headerlink" title="æ‹¥å¡ï¼šæŒç»­è¿‡è½½çš„ç½‘ç»œçŠ¶æ€ï¼Œç”¨æˆ·å¯¹ç½‘ç»œèµ„æºçš„éœ€æ±‚ï¼ˆé“¾è·¯å¸¦å®½ï¼Œå­˜å‚¨ç©ºé—´ï¼Œå¤„ç†èƒ½åŠ›ï¼‰æ€»éœ€æ±‚è¶…è¿‡å›ºæœ‰å®¹é‡"></a>æ‹¥å¡ï¼šæŒç»­è¿‡è½½çš„ç½‘ç»œçŠ¶æ€ï¼Œç”¨æˆ·å¯¹ç½‘ç»œèµ„æºçš„éœ€æ±‚ï¼ˆé“¾è·¯å¸¦å®½ï¼Œå­˜å‚¨ç©ºé—´ï¼Œå¤„ç†èƒ½åŠ›ï¼‰æ€»éœ€æ±‚è¶…è¿‡å›ºæœ‰å®¹é‡</h3><ul><li>ç¼“å†²åŒºå®¹é‡æœ‰é™</li><li>å¸¦å®½æœ‰é™</li><li>ç»“ç‚¹å¤„ç†èƒ½åŠ›æœ‰é™</li><li>å‘ç”Ÿæ•…éšœ  <h3 id="æµé‡æ„ŸçŸ¥è·¯ç”±"><a href="#æµé‡æ„ŸçŸ¥è·¯ç”±" class="headerlink" title="æµé‡æ„ŸçŸ¥è·¯ç”±"></a>æµé‡æ„ŸçŸ¥è·¯ç”±</h3>æ ¹æ®è´Ÿè½½çŠ¶æ€åŠ¨æ€è°ƒæ•´ï¼Œå°†ç½‘ç»œæµé‡å¼•å¯¼åˆ°ä¸åŒé“¾è·¯ä¸Šï¼Œå‡è¡¡è´Ÿè½½ï¼Œä»è€Œå»¶ç¼“æˆ–é¿å…æ‹¥å¡å‘ç”Ÿ<br>è§£å†³ç½‘ç»œè´Ÿè½½çš„éœ‡è¡ç°è±¡</li><li>å¤šè·¯å¾„è·¯ç”±</li><li>ç¼“æ…¢è½¬ç§»æµé‡è‡³å¦ä¸€é“¾è·¯<h3 id="å‡†å…¥æ§åˆ¶"><a href="#å‡†å…¥æ§åˆ¶" class="headerlink" title="å‡†å…¥æ§åˆ¶"></a>å‡†å…¥æ§åˆ¶</h3>ä¸»è¦åº”ç”¨äºè™šç”µè·¯ç½‘ç»œã€‚å¯¹æ–°å»ºè™šç”µè·¯è¿›è¡Œå®¡æ ¸ï¼Œè‹¥è¯¥ç”µè·¯ä¼šå¯¼è‡´æ‹¥å¡åˆ™æ‹’ç»å»ºç«‹ã€‚<br>æ‹¥å¡çŠ¶æ€çš„é‡åŒ–ï¼šåŸºäºå¹³å‡æµé‡ä¸ç¬æ—¶æµé‡<h3 id="æµé‡è°ƒèŠ‚"><a href="#æµé‡è°ƒèŠ‚" class="headerlink" title="æµé‡è°ƒèŠ‚"></a>æµé‡è°ƒèŠ‚</h3></li></ul><ol><li>æ„ŸçŸ¥æ‹¥å¡</li><li>å¤„ç†æ‹¥å¡ï¼šå°†æ‹¥å¡ä¿¡æ¯é€šçŸ¥åˆ°å…¶ä¸Šæ¸¸ç»“ç‚¹<br>å¤„ç†æ–¹æ³•ï¼š<ul><li>æŠ‘åˆ¶åˆ†ç»„ï¼šç»™æ‹¥å¡æ•°æ®æŠ¥æºä¸»æœºè¿”å›ä¸€ä¸ªæŠ‘åˆ¶åˆ†ç»„ï¼ˆå‡å°‘å‘é€ï¼‰</li><li>èƒŒå‹ï¼šè®©æŠ‘åˆ¶åˆ†ç»„ä»æ‹¥å¡ç»“ç‚¹åˆ°æºç»“ç‚¹çš„è·¯å¾„ä¸Šçš„æ¯ä¸€è·³éƒ½å‘æŒ¥æŠ‘åˆ¶ä½œç”¨<h3 id="è´Ÿè½½è„±è½"><a href="#è´Ÿè½½è„±è½" class="headerlink" title="è´Ÿè½½è„±è½"></a>è´Ÿè½½è„±è½</h3>ä¸»åŠ¨ä¸¢å¼ƒæŸäº›æ•°æ®æŠ¥</li></ul></li></ol><ul><li>ä¸¢å¼ƒæ–°åˆ†ç»„ï¼šå¦‚GBN</li><li>ä¸¢å¼ƒè€åˆ†ç»„ï¼šå¦‚å®æ—¶è§†é¢‘æµ</li></ul><h2 id="Internetç½‘ç»œå±‚"><a href="#Internetç½‘ç»œå±‚" class="headerlink" title="Internetç½‘ç»œå±‚"></a>Internetç½‘ç»œå±‚</h2><h3 id="IPv4åè®®"><a href="#IPv4åè®®" class="headerlink" title="IPv4åè®®"></a>IPv4åè®®</h3><h4 id="æ•°æ®æŠ¥æ ¼å¼"><a href="#æ•°æ®æŠ¥æ ¼å¼" class="headerlink" title="æ•°æ®æŠ¥æ ¼å¼"></a>æ•°æ®æŠ¥æ ¼å¼</h4><ul><li>IPé¦–éƒ¨åˆ†è£…äº†æ¥è‡ªä¼ è¾“å±‚çš„æ•°æ®</li><li>IPé¦–éƒ¨å›ºå®šéƒ¨åˆ†20å­—èŠ‚</li><li>ç‰ˆæœ¬ï¼šIPv4/IPv6</li><li>é¦–éƒ¨é•¿åº¦ å›ºå®š+å¯å˜</li><li>åŒºåˆ†æœåŠ¡ åŒºåˆ†ä¸åŒæœåŠ¡è´¨é‡</li><li>æ€»é•¿åº¦ IPåŒ…æ€»é•¿åº¦</li><li>æ ‡ç¤º è¯†åˆ«IPåŒ…ã€‚åˆ¤æ–­åˆ†ç‰‡æ˜¯å¦å±äºåŒä¸€å­—æ®µ</li><li>æ ‡å¿— è¯†åˆ«IPåŒ…æ˜¯å¦è¢«åˆ†å‰²ã€‚åˆ¤æ–­æ˜¯å¦ä¸ºæœ€ååˆ†ç‰‡</li><li>ç‰‡åç§» åˆ¤æ–­åˆ†ç‰‡å…ˆåé¡ºåº</li><li>ç”Ÿå­˜æ—¶é—´ å¤šæ¬¡è½¬å‘ä»æœªæŠµè¾¾ç›®çš„åœ°ï¼Œç”Ÿå­˜æ—¶é—´è¿‡é•¿ä¸¢å¼ƒ</li><li>åè®® æ ‡ç¤ºæ•°æ®éƒ¨åˆ†ä½¿ç”¨çš„åè®®</li><li>æ£€éªŒå’Œ å·®é”™</li><li>æºï¼Œç›®çš„åœ°å€ å‘é€ä¸æ¥æ”¶ æ•°æ®çš„ä¸»æœºçš„IPåœ°å€ã€‚<strong>åˆ†åˆ«å 4å­—èŠ‚</strong>  </li></ul><p><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/IPæ•°æ®æŠ¥æ ¼å¼.png" alt="IPæ•°æ®æŠ¥æ ¼å¼"></p><h4 id="IPv4ç¼–å€"><a href="#IPv4ç¼–å€" class="headerlink" title="IPv4ç¼–å€"></a>IPv4ç¼–å€</h4><h5 id="IPåœ°å€"><a href="#IPåœ°å€" class="headerlink" title="IPåœ°å€"></a>IPåœ°å€</h5><p>32ä½çš„äºŒè¿›åˆ¶ ç‚¹åˆ†åè¿›åˆ¶æ ‡è®°æ³• 8ä½ä¸€ç»„ç‚¹åˆ†æ ‡<br><strong>ç½‘ç»œå·</strong>ï¼ˆåŒä¸€ç½‘ç»œä¸‹çš„ä¸»æœºå…·æœ‰ç›¸åŒçš„ç½‘ç»œå·ï¼‰ + <strong>ä¸»æœºå·</strong><br>åˆ†ç±»åœ°å€ï¼šA, B, C, D, E<br>ç‰¹æ®Šåœ°å€ï¼Œç§æœ‰åœ°å€<br>ABCï¼šå®é™…åˆ†é…ç»™è”ç½‘çš„ä¸»æœºï¼Œæ²¡æœ‰é‡å¤çš„å”¯ä¸€åœ°å€<br>Dï¼šç»„æ’­/å¤šæ’­åœ°å€ã€‚é«˜å››ä½ä¸º1110<br>Eï¼šä¿ç•™ä½¿ç”¨ã€‚é«˜å››ä½ä¸º1111<br>Aï¼šå‰8ä½ä¸ºç½‘ç»œå·ã€‚æœ€é«˜ä½ä¸º0   0~127 ä¸»æœºæ•°é‡ï¼š2^24-2<br>Bï¼šå‰16ä½ä¸ºç½‘ç»œå·ã€‚é«˜äºŒä½ä¸º10   ä¸»æœºæ•°é‡ï¼š2^16-2<br>Cï¼šå‰24ä½ä¸ºç½‘ç»œå·ã€‚é«˜ä¸‰ä½ä¸º110    ä¸»æœºæ•°é‡ï¼š2^8-2<br><strong>ABCç½‘ç»œè§„æ¨¡ä¸åŒ</strong></p><h5 id="å­ç½‘åˆ’åˆ†"><a href="#å­ç½‘åˆ’åˆ†" class="headerlink" title="å­ç½‘åˆ’åˆ†"></a>å­ç½‘åˆ’åˆ†</h5><p>å°†ä¸€ä¸ªå­ç½‘åˆ’åˆ†ä¸ºå¤šä¸ªå­ç½‘<br>å¤§å­ç½‘å…·æœ‰è¾ƒçŸ­ç½‘ç»œå‰ç¼€ã€‚å°å­å…·æœ‰ç¨é•¿å‰ç¼€  </p><ul><li>è¶…ç½‘ï¼šå­ç½‘åˆå¹¶ä¸ºå¤§ç½‘  </li><li>å­ç½‘æ©ç ï¼šå®šä¹‰è°ƒèŠ‚ä¸€ä¸ªå­ç½‘çš„ç½‘ç»œå‰ç¼€é•¿åº¦ï¼Œç”¨äºåˆ’åˆ†å­ç½‘ã€‚å‰éƒ¨å…¨ä¸º1ï¼Œå³ä¸ºç½‘ç»œå‰ç¼€ï¼Œåéƒ¨å…¨ä¸º0</li></ul><ul><li><strong>IP ^ Mask = Subnet    IPåœ°å€ä¸å­ç½‘æ©ç è¿›è¡Œä¸è¿ç®—å¾—åˆ°å­ç½‘åœ°å€</strong>  </li><li><strong>åŒä¸€å­ç½‘ä¸­ï¼Œç½‘ç»œå‰ç¼€éƒ¨åˆ†ç›¸åŒï¼Œåé¢ä¸ºä¸»æœºå·ä¸åŒï¼Œæœ€å°ä¸»æœºå·ä»£è¡¨å­ç½‘åœ°å€ï¼Œæœ€å¤§ä¸»æœºå·ä»£è¡¨ç›´æ¥å¹¿æ’­åœ°å€</strong>  </li><li>å8ä¸ºçš„å‰ç¼€éƒ¨åˆ†å³ä¸ºå­ç½‘å·ï¼Œå¯ä½œä¸ºè¿ç»­æ ‡ç¤º</li><li>é™¤å»å­ç½‘åœ°å€ä¸å¹¿æ’­åœ°å€ï¼Œå‰©ä½™å³ä¸ºå¯åˆ†é…çš„ä¸»æœºæ•°</li><li>å­ç½‘æ©ç å»¶é•¿rä½è¯¥å­ç½‘åˆ’åˆ†ä¸º2^r ä¸ªå­ç½‘<br><img src="/2019/01/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/å­ç½‘åˆ’åˆ†.png" alt="å­ç½‘åˆ’åˆ†"></li></ul><h5 id="è·¯ç”±èšåˆ"><a href="#è·¯ç”±èšåˆ" class="headerlink" title="è·¯ç”±èšåˆ"></a>è·¯ç”±èšåˆ</h5><p>å°†ç›¸åŒè·¯ç”±çš„è¿ç»­å­ç½‘åˆå¹¶<br>è·¯ç”±è¡¨ä¸­çš„åˆ†ç»„è½¬å‘ï¼šæŸ¥æ‰¾è½¬å‘è¡¨ï¼ˆä¸è¿ç®—åŒ¹é…ï¼‰ï¼Œæœ€é•¿å‰ç¼€ä¼˜å…ˆåŒ¹é…<br>IPåœ°å€ä¸åˆ†ç»„è¡¨å­ç½‘æ©ç åä¸è¿ç®—ï¼Œæ‰€å¾—æ˜¯å¦åŒ¹é…ï¼Œå†æ ¹æ®æœ€é•¿å‰ç¼€è¿›è¡Œé€‰æ‹©</p><h4 id="åŠ¨æ€ä¸»æœºé…ç½®åè®®"><a href="#åŠ¨æ€ä¸»æœºé…ç½®åè®®" class="headerlink" title="åŠ¨æ€ä¸»æœºé…ç½®åè®®"></a>åŠ¨æ€ä¸»æœºé…ç½®åè®®</h4><p><strong>ç•¥</strong></p><h4 id="ç½‘ç»œåœ°å€è½¬æ¢"><a href="#ç½‘ç»œåœ°å€è½¬æ¢" class="headerlink" title="ç½‘ç»œåœ°å€è½¬æ¢"></a>ç½‘ç»œåœ°å€è½¬æ¢</h4><p>ç½‘ç»œåœ°å€è½¬æ¢ NATåè®® â€“ä½¿ç”¨ç§æœ‰åœ°å€è®¿é—®äº’è”ç½‘<br>å¤§é‡åœ°å€åœ¨äº’è”ç½‘ä¸Šä¸åˆ†é…ä¸ä½¿ç”¨åªåœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä½†ä¿ç•™åœ°å€åœ¨äº’è”ç½‘ä¸Šæ— æ³•ä½¿ç”¨  </p><ul><li>æºIPåœ°å€ç”±Natè·¯ç”±å™¨æ›¿æ¢ä¸ºNatæ‹¥æœ‰çš„åˆæ³•ä½¿ç”¨çš„å…¬å…±IPåœ°å€ï¼ŒåŒæ—¶æ›¿æ¢ç«¯å£å·ï¼Œå¹¶å°†æ›¿æ¢å…³ç³»è®°å½•åˆ°Natè½¬æ¢è¡¨ä¸­</li><li>ä»äº’è”ç½‘è¿”å›çš„IPæ•°æ®æŠ¥ï¼Œä¾æ®å…¶ç›®çš„åœ°å€ä¸ç›®çš„ç«¯å£å·æ£€ç´¢Natè½¬æ¢è¡¨ï¼Œè·å–å†…éƒ¨ipä¸ç«¯å£<br>åŒæ—¶èµ·åˆ°éšè—å®é™…IPåœ°å€ï¼Œåªå…¬å¼€å…¬å…±åœ°å€çš„æ•ˆæœ</li></ul><h2 id="è·¯ç”±ç®—æ³•"><a href="#è·¯ç”±ç®—æ³•" class="headerlink" title="è·¯ç”±ç®—æ³•"></a>è·¯ç”±ç®—æ³•</h2><hr><h1 id="é“¾è·¯å±‚"><a href="#é“¾è·¯å±‚" class="headerlink" title="é“¾è·¯å±‚"></a>é“¾è·¯å±‚</h1><p>ä¼ è¾“å±‚è´Ÿè´£åº”ç”¨å±‚çš„å¤ç”¨åˆ†ç”¨ä¿è¯å¯é ä¼ è¾“ï¼Œç½‘ç»œå±‚è´Ÿè´£å°†æ•°æ®ä»ä¸»æœºä¼ åˆ°ä¸»æœº<br>é“¾è·¯å±‚è´Ÿè´£æŠŠä¸€ä¸ªèŠ‚ç‚¹å¯é çš„ä¼ è¾“åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸ºç½‘ç»œå±‚æä¾›æœåŠ¡  </p><h2 id="æ•°æ®é“¾è·¯æœåŠ¡"><a href="#æ•°æ®é“¾è·¯æœåŠ¡" class="headerlink" title="æ•°æ®é“¾è·¯æœåŠ¡"></a>æ•°æ®é“¾è·¯æœåŠ¡</h2><p>è´Ÿè´£ç›´æ¥ç›¸é‚»èŠ‚ç‚¹çš„ä¼ è¾“<br>é“¾è·¯å±‚æ•°æ®å•å…ƒï¼šå¸§<br>ç½‘ç»œå±‚å°†æ•°æ®æŠ¥å°è£…äº¤ç»™é“¾è·¯å±‚ï¼Œé“¾è·¯å±‚å°†æ•°æ®æ·»åŠ å¸§å¤´å¸§å°¾ï¼Œæ„é€ æ•°æ®å¸§  </p><ul><li>ç»„å¸§</li><li>é“¾è·¯æ¥å…¥ï¼šç‚¹å¯¹ç‚¹é“¾è·¯ï¼Œå¹¿æ’­é“¾è·¯ï¼ˆä¸€æ¡é“¾è·¯ä¸Šæœ‰å¤šä¸ªèŠ‚ç‚¹ï¼‰</li><li>å¯é äº¤ä»˜ï¼ˆç”¨äºé«˜å‡ºé”™é“¾è·¯ï¼‰</li><li>å·®é”™æ§åˆ¶</li></ul><h2 id="å¤šè·¯è®¿é—®æ§åˆ¶åè®®"><a href="#å¤šè·¯è®¿é—®æ§åˆ¶åè®®" class="headerlink" title="å¤šè·¯è®¿é—®æ§åˆ¶åè®®"></a>å¤šè·¯è®¿é—®æ§åˆ¶åè®®</h2><h3 id="ALOHAåè®®"><a href="#ALOHAåè®®" class="headerlink" title="ALOHAåè®®"></a>ALOHAåè®®</h3><p>çº¯ALOHAåè®®ï¼ˆPure ALOHAï¼‰ï¼šç›´æ¥å‘é€ -&gt;ä¿¡é“ä¾¦å¬ï¼ˆåé¦ˆç¡®è®¤ï¼‰ -&gt;å†²çªé‡å‘<br>æ—¶éš™ALOHAåè®®ï¼ˆSloated ALOHAï¼‰ï¼šå‘é€æ—¶é—´åˆ†ä¸ºæ—¶éš™ï¼Œæ—¶éš™å¼€å§‹æ—¶å‘é€ -&gt;ä¿¡é“ä¾¦å¬ -&gt;å†²çªåˆ™ä¸‹ä¸€æ—¶éš™ä»¥æ¦‚ç‡Pé‡å‘</p><h3 id="è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®åè®®CSMA"><a href="#è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®åè®®CSMA" class="headerlink" title="è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®åè®®CSMA"></a>è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®åè®®CSMA</h3><p>å‘é€å‰ç›‘å¬ä¿¡é“æ˜¯å¦ç©ºé—²</p><ol><li>éåšæŒCSMAï¼šå¿™åˆ™ç­‰å¾…éšæœºæ—¶é—´å‘é€ååœ¨ä¾¦å¬</li><li>1-åšæŒCSMAï¼šå¿™åˆ™æŒç»­ä¾¦å¬ç›´åˆ°ä¿¡é“ç©ºé—²</li><li>P-åšæŒCSMAï¼šé—²åˆ™æ¦‚ç‡Påœ¨æœ€è¿‘æ—¶éš™å‘é€ï¼ˆé¿å…åŒæ—¶ä¾¦å¬å†²çªï¼‰<h3 id="å¸¦å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®CSMA-CD"><a href="#å¸¦å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®CSMA-CD" class="headerlink" title="å¸¦å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®CSMA/CD"></a>å¸¦å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®CSMA/CD</h3>ç›‘å¬ç©ºé—²åå‘é€ï¼Œå‘é€æ—¶æ£€æµ‹ç¢°æ’ï¼Œç¢°æ’åç­‰å¾…é‡å‘</li></ol><h2 id="å±€åŸŸç½‘"><a href="#å±€åŸŸç½‘" class="headerlink" title="å±€åŸŸç½‘"></a>å±€åŸŸç½‘</h2><h3 id="é“¾è·¯å±‚å¯»å€ä¸ARP"><a href="#é“¾è·¯å±‚å¯»å€ä¸ARP" class="headerlink" title="é“¾è·¯å±‚å¯»å€ä¸ARP"></a>é“¾è·¯å±‚å¯»å€ä¸ARP</h3><p>å±€åŸŸç½‘å¹¿æ’­é€šä¿¡ï¼Œä½¿ç”¨Macåœ°å€è¿›è¡Œæ ‡ç¤ºé€šä¿¡ã€‚</p><h4 id="MACåœ°å€-ç¡¬ä»¶åœ°å€"><a href="#MACåœ°å€-ç¡¬ä»¶åœ°å€" class="headerlink" title="MACåœ°å€/ç¡¬ä»¶åœ°å€"></a>MACåœ°å€/ç¡¬ä»¶åœ°å€</h4><p>æ¯ä¸ªæ¥å£å¯¹åº”ä¸€ä¸ªMACåœ°å€ï¼Œå…¨çƒå”¯ä¸€ã€‚<br>è·¯ç”±å™¨æ¥å£ï¼Œç½‘å¡æ¥å£ï¼Œäº¤æ¢æœºæ¥å£<br>é•¿åº¦48ä½ï¼Œåå…­è¿›åˆ¶ï¼Œ å‰24ä¸ºå‚å•†æ ‡ç¤ºï¼Œ å‚å•†åˆ†é…ä»£ç </p><h4 id="åœ°å€è§£æåè®®ARP"><a href="#åœ°å€è§£æåè®®ARP" class="headerlink" title="åœ°å€è§£æåè®®ARP"></a>åœ°å€è§£æåè®®ARP</h4><p>æ ¹æ®æœ¬ç½‘å†…ç›®çš„ä¸»æœºæˆ–é»˜è®¤ç½‘å…³çš„IPåœ°å€è·å–å…¶MACåœ°å€<br>æŸ¥è¯¢/å“åº”æ–¹å¼<br>æ‰€ä»¥ARPåªä¸ºåœ¨åŒä¸€åªå­ç½‘ä¸‹çš„ä¸»æœºå’Œè·¯ç”±å™¨è§£æIP</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;/a&gt;åŸºæœ¬æ¦‚å¿µ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è®¡ç®—æœºç½‘ç»œåè®®ï¼šè¯­æ³•ï¼Œè¯­ä¹‰ï¼Œæ—¶åº&lt;ul&gt;
&lt;li&gt;è¯­æ³•ï¼šæè¿°å®ä½“é—´ä¿¡æ¯äº¤æ¢æ ¼å¼&lt;/li&gt;
&lt;li&gt;è¯­ä¹‰ï¼šæ§åˆ¶ä¿¡æ¯çš„å…·ä½“å«ä¹‰&lt;/li&gt;
&lt;li&gt;æ—¶åºï¼šäº¤æ¢ä¿¡æ¯çš„é¡ºåºä»¥åŠé€Ÿåº¦é…åˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½ï¼šç¡¬ä»¶ï¼Œè½¯ä»¶ï¼Œä¿¡æ¯&lt;/li&gt;
&lt;li&gt;åˆ†ç±»ï¼šè¦†ç›–èŒƒå›´ï¼Œæ‹“æ‰‘ç»“æ„ï¼Œäº¤æ¢æ–¹å¼ï¼Œç”¨æˆ·å±æ€§&lt;ul&gt;
&lt;li&gt;æ ‘å½¢ï¼Œæ˜Ÿå½¢æ‹“æ‰‘ï¼šæ˜“äºç®¡ç†ï¼Œä¸­å¿ƒèŠ‚ç‚¹æ˜¯ç½‘ç»œçš„å…³é”®ï¼Œçº¿è·¯è¾ƒå¤šæˆæœ¬è¾ƒé«˜&lt;/li&gt;
&lt;li&gt;ç¯å½¢ï¼Œæ€»çº¿æ‹“æ‰‘ï¼šæˆæœ¬æ•ˆç‡ä¸é«˜ï¼Œæ’é”™ï¼Œå¢åˆ ï¼Œä¸ä¾¿äºç®¡ç†&lt;/li&gt;
&lt;li&gt;ç½‘çŠ¶æ‹“æ‰‘ï¼šèŠ‚ç‚¹é—´é€šä¿¡å¤šè·¯å¾„é€‰æ‹©ï¼Œç»“æ„å¤æ‚æˆæœ¬é«˜</summary>
    
    
    
    <category term="Network" scheme="http://codeminions.github.io/categories/Network/"/>
    
    
    <category term="Network" scheme="http://codeminions.github.io/tags/Network/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>ä¿®æ”¹deepinå¯åŠ¨å†…æ ¸å‚æ•°</title>
    <link href="http://codeminions.github.io/2018/12/20/Deepin(Ubuntu)%E5%90%AF%E5%8A%A8%E5%86%85%E6%A0%B8%E4%BF%AE%E6%94%B9/"/>
    <id>http://codeminions.github.io/2018/12/20/Deepin(Ubuntu)%E5%90%AF%E5%8A%A8%E5%86%85%E6%A0%B8%E4%BF%AE%E6%94%B9/</id>
    <published>2018-12-19T16:00:00.000Z</published>
    <updated>2019-03-20T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ™šä¸Šä¿®æ”¹äº†deepinçš„å¯åŠ¨é¡¹ã€‚<br>è™½ç„¶è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆamd64ç‰ˆæœ¬å°±å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å…ˆç…§ä¸€ä¸ªå¸–å­ä¿®æ”¹äº†å¯åŠ¨é¡¹ã€‚æˆ‘è§‰å¾—æ²¡é—®é¢˜ã€‚ä½†æ˜¯è¿˜æ˜¯è®°å½•ä¸€ä¸‹ä¿®æ”¹è¿‡ç¨‹ä»¥åŠä¸€äº›ç»†èŠ‚<br><a id="more"></a></p><p>é¦–å…ˆé˜²æ­¢å´©æºƒæˆ‘æŠŠé…ç½®æ–‡ä»¶åŸä»¶å¤åˆ¶ä¸‹æ¥äº†<br>ç„¶åæ‰“å¼€/boot/grub/grub.cfgï¼Œèµ«ç„¶å¤§å­—ï¼šnot edit this file<br>æ²¡äº‹å¤§ç¥å¸–å­æ’‘è…°ï¼Œå¤§ä¸äº†é‡è£…å˜›..</p><p>ç„¶åå‘ç°äº†ï¼Œï¼Œè¿™é‡Œé¢å‡ ä¹æ˜¯å®Œå…¨å®šä¹‰äº†grupçš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡å­—å›¾ç‰‡ä¸»é¢˜ç­‰å¾…æ—¶é—´ï¼ˆæ³¨é‡Šè¯´è¿™ä¸ªæ–‡ä»¶æ˜¯ç”±å…¶ä»–ä¸¤ä¸ªé…ç½®æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼‰<br>æ ¹æ®ä»…æœ‰çš„è‹±æ–‡æ°´å¹³ï¼ˆä»‹ç»+ç¿»è¯‘ï¼‰çœ‹æ‡‚ä¸€äº›</p><p>é¦–å…ˆæœ‰ä¸ªGRUB_DEFAULT=0ï¼Œé»˜è®¤å¯åŠ¨é¡¹ï¼Œè¿™ä¸ªå€¼ä¸º0å°±æ˜¯é»˜è®¤å¯åŠ¨ç¬¬ä¸€ä¸ªï¼Œä¸º1é»˜è®¤å¯åŠ¨ç¬¬äºŒä¸ª</p><p>ç„¶åæ˜¯å¯åŠ¨èœå•ï¼Œå¥½å‡ ä¸ªç³»ç»Ÿå†…æ ¸èµ«ç„¶åœ¨åˆ—ï¼Œä¹ŸåŒ…æ‹¬advanced optionçš„é€‰é¡¹ç§°ä¹‹ä¸ºsubmenuï¼Œå…¶ä¸‹é¢å°±æ˜¯ä¸¤ä¸ªdeepinå†…æ ¸äº†ã€‚æˆ‘çš„æ˜¯  </p><ul><li>Deepin 15.8 GNU/Linux, with Linux 4.15.0-29deepin-generic</li><li>Deepin 15.8 GNU/Linux, with Linux 4.9.0-deepin13-amd64</li></ul><p>å¯¹çš„ä¸‹é¢é‚£ä¸ªèƒ½ç”¨..<br>ç„¶åæˆ‘å°±ç²—æš´çš„ï¼ˆå°å¿ƒç¿¼ç¿¼ï¼‰çš„æŠŠè¿™ä¸ªå¯åŠ¨é¡¹ã€æè¿°ï¼ˆå¦‚ä¸‹ï¼‰ã€‘æ•´ä¸ªå¤åˆ¶åˆ°äº†ç¬¬ä¸€é¡¹ä¸Šé¢ï¼ˆå‰é¢è®¾å®šäº†é»˜è®¤å¯åŠ¨é¦–é¡¹ï¼‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">menuentry <span class="string">&#x27;Deepin 15.8 GNU/Linux, with Linux 4.9.0-deepin13-amd64ï¼ˆè¿™é‡Œæ”¹åå­—ï¼‰&#x27;</span> --class deepin --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-4.9.0-deepin13-amd64-advanced-f35aea66-7d3d-46a8-8ad9-ac8abf142a40&#x27;</span> &#123;</span><br><span class="line">load_video</span><br><span class="line">insmod gzio</span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$grub_platform</span> = xxen ]; <span class="keyword">then</span> insmod xzio; insmod lzopio; <span class="keyword">fi</span></span><br><span class="line">insmod part_gpt</span><br><span class="line">insmod ext2</span><br><span class="line"><span class="built_in">set</span> root=<span class="string">&#x27;hd0,gpt9&#x27;</span></span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_platform_search_hint</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">  search --no-floppy --fs-uuid --<span class="built_in">set</span>=root --hint-bios=hd0,gpt9 --hint-efi=hd0,gpt9 --hint-baremetal=ahci0,gpt9  f35aea66-7d3d-46a8-8ad9-ac8abf142a40</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  search --no-floppy --fs-uuid --<span class="built_in">set</span>=root f35aea66-7d3d-46a8-8ad9-ac8abf142a40</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">linux/boot/vmlinuz-4.9.0-deepin13-amd64 root=UUID=f35aea66-7d3d-46a8-8ad9-ac8abf142a40 ro  splash quiet DEEPIN_GFXMODE=<span class="variable">$DEEPIN_GFXMODE</span></span><br><span class="line">initrd/boot/initrd.img-4.9.0-deepin13-amd64</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å¬è¯´æè¿°æœ€åä¸¤è¡Œæ˜¯å¯åŠ¨å†…æ ¸ï¼Œçœ‹äº†ä¸€ä¸‹ï¼Œç¡®å®ï¼šç¬¬ä¸€é¡¹Deepin 15.8 GNU/Linuxçš„å†…æ ¸ä¸ºLinux 4.15.0-29deepin-genericã€‚<br>æ‰€ä»¥æˆ‘æƒ³ä»¥åçœ‹ä¸é¡ºçœ¼äº†å¯ä»¥æŠŠåŸç¬¬ä¸€é¡¹ç»™åˆ äº†ã€‚<br>æœ€åæ”¹äº†ä¸€ä¸‹åï¼ˆä½ç½®å¦‚ä¸Šï¼‰ï¼Œæ”¹ä¸ºDeepin 15.8 GNU/Linux -amd64</p><p>å…³é—­ä»¥åæ›´æ–°é…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ sudo update-grub</span><br><span class="line">  Generating grub configuration file ...</span><br><span class="line">  Found theme: &#x2F;boot&#x2F;grub&#x2F;themes&#x2F;deepin&#x2F;theme.txt</span><br><span class="line">  Found background image: &#x2F;boot&#x2F;grub&#x2F;themes&#x2F;deepin&#x2F;background.png</span><br><span class="line">  Found linux image: &#x2F;boot&#x2F;vmlinuz-4.15.0-29deepin-generic</span><br><span class="line">  Found initrd image: &#x2F;boot&#x2F;initrd.img-4.15.0-29deepin-generic</span><br><span class="line">  Found linux image: &#x2F;boot&#x2F;vmlinuz-4.9.0-deepin13-amd64</span><br><span class="line">  Found initrd image: &#x2F;boot&#x2F;initrd.img-4.9.0-deepin13-amd64</span><br><span class="line">  Found deepin image: &#x2F;boot&#x2F;deepin&#x2F;vmlinuz-4.14.13</span><br><span class="line">  Found initrd image: &#x2F;boot&#x2F;deepin&#x2F;initrd.img-4.14.13</span><br><span class="line">  Found Windows Boot Manager on &#x2F;dev&#x2F;sda1@&#x2F;EFI&#x2F;Microsoft&#x2F;Boot&#x2F;bootmgfw.efi</span><br><span class="line">  Found Ubuntu 18.04.1 LTS (18.04) on &#x2F;dev&#x2F;sda8</span><br><span class="line">  Adding boot menu entry for EFI firmware configuration</span><br><span class="line">  done</span><br></pre></td></tr></table></figure><br>å®Œæˆï¼Œç°åœ¨æˆ‘è¦é‡å¯äº†ï¼Œå¸Œæœ›ä¸€åˆ‡æ­£å¸¸ã€‚ã€‚</p><hr><p>å¥½çš„ä¸€åˆ‡æ­£å¸¸ï¼Ÿï¼Ÿå®Œå…¨æ²¡æœ‰å˜åŒ–ã€‚æ‰“å¼€grub.cfgæ–‡ä»¶ä¸€çœ‹ï¼Œå’¦éš¾é“æˆ‘åˆšåˆšå¿˜äº†ä¿å­˜ï¼Œæ¢å¤åŸæ ·ã€‚<br>çœ‹äº†åŸå¸–ï¼Œå¤§ç¥å·²ç»è¯´çš„å¾ˆæ¸…æ¥šäº†å‘€ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯æ ¹æ®å¦å¤–ä¸¤æ–‡ä»¶ç”Ÿæˆï¼Œæ”¹è¿™ä¸ªæ²¡æœ‰ç”¨çš„ï¼Œupdate-grubåè€Œæ˜¯æ›´æ–°äº†è¯¥æ–‡ä»¶ï¼Œæ‰€ä»¥å¤åŸäº†ã€‚<br>å¥½å§åªèƒ½æ”¹åŸæ–‡ä»¶äº†ã€‚æ˜¯/etc/default/grubï¼Œå’Œ/etc/grub.dä¸‹çš„ä¸€ç³»åˆ—æ–‡ä»¶</p><table><thead><tr><th>/etc/grub.d</th></tr></thead><tbody><tr><td>00_header</td><td>é…ç½®åˆå§‹çš„æ˜¾ç¤ºé¡¹ç›®ï¼Œå¦‚é»˜è®¤é€‰é¡¹ï¼Œæ—¶é—´é™åˆ¶ç­‰ï¼Œä¸€èˆ¬ç”±/etc/default/grubå¯¼å…¥ï¼Œä¸€èˆ¬ä¸éœ€è¦é…ç½®</td></tr><tr><td>05_debian_theme</td><td>é…ç½®å¼•å¯¼ç”»é¢ï¼Œæ–‡å­—é¢œè‰²ç­‰ä¸»é¢˜</td></tr><tr><td>10_linux</td><td>å®šä½å½“å‰æ“ä½œç³»ç»Ÿä½¿ç”¨ä¸­çš„rootè®¾å¤‡å†…æ ¸çš„ä½ç½®,åŒ…å«deepin å¯åŠ¨é¡¹å’Œadvancedé‡Œé¢çš„å¯åŠ¨é¡¹</td></tr><tr><td>15_linux_bar</td><td>æ•‘æ´æ¨¡å¼çš„å¯åŠ¨é¡¹</td></tr><tr><td>20_linux_xen</td><td>è™šæ‹Ÿæœºç›‘è§†å™¨çš„ä¸œè¥¿ï¼Œï¼ˆæš‚æ—¶ä¸çŸ¥æœ‰ä»€ä¹ˆç”¨</td></tr><tr><td>30_uefi-firmware</td><td>â€œsystem setupâ€ çš„å¯åŠ¨é¡¹</td></tr><tr><td>35_os-prober</td><td>windowsçš„å¯åŠ¨é¡¹ä¸€èˆ¬åœ¨è¿™ä¸ªé‡Œé¢</td></tr><tr><td>40_custom</td><td>ç”¨æ¥åŠ å…¥ç”¨æˆ·è‡ªå®šä¹‰çš„å¯åŠ¨é¡¹ï¼Œå°†ä¼šåœ¨æ‰§è¡Œupdate-grubæ—¶æ›´æ–°è‡³grub.cfgä¸­</td></tr><tr><td>41_custom</td><td>åˆ¤æ–­custom.cfgæ­¤é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±åŠ è½½å®ƒ</td></tr></tbody></table><p>å‰é¢çš„æ•°å­—æ˜¯å¯¹æ–‡ä»¶æ’åˆ—æ‰§è¡Œçš„é¡ºåºè¿›è¡Œæ’åºï¼Œå¯è¿›è¡Œæ›´æ”¹ï¼Œæ¯”å¦‚ä½ æƒ³æŠŠwindowså¯åŠ¨é¡¹è°ƒåˆ°ç¬¬ä¸€ä¸ªï¼Œå°±æŠŠ35_os-proberå‰é¢é‚£ä¸ªæ•°å­—æ”¹æˆ5åˆ°10çš„æ•°å­—ï¼Œæ¯”å¦‚06~09.<br>ï¼ˆå¿«æ²¡ç”µäº†ç›´æ¥æ‘˜ï¼‰</p><p>å¥½çš„æˆåŠŸäº†ã€‚ï¼ˆè™½ç„¶ç”±äºè®¡ç®—å¤±è¯¯ï¼‰<br>æ¥ä¸‹æ¥å°±æ˜¯æƒ³åŠæ³•å§å®ƒæŒªåˆ°ç¬¬ä¸€ä¸ªï¼ˆå¥½çœ‹â€¦ï¼‰</p><p>æˆ‘çŒœæµ‹ï¼Œè¿™ä¸ªæ–°æ·»åŠ çš„å¯åŠ¨é¡¹åº”è¯¥å°±æ˜¯<strong>40_custom</strong>ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¹ä¸º9_customã€‚çœ‹èµ·æ¥æ²¡æœ‰æˆåŠŸã€‚åŸæ¥é‚£æ¬¡æ”¹å®Œæ²¡æœ‰updateå°±æ²¡ç”µäº†ã€‚äºæ˜¯æ”¹ä¸º7_customï¼Œupdateã€‚æˆäº†ã€‚åˆ«å¿˜äº†æŠŠå¯åŠ¨é¡¹æ”¹ä¸º0ã€‚</p><hr><h2 id="ç»“æŸæ€»ç»“ï¼š"><a href="#ç»“æŸæ€»ç»“ï¼š" class="headerlink" title="ç»“æŸæ€»ç»“ï¼š"></a>ç»“æŸæ€»ç»“ï¼š</h2><p>å®Œç¾æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ï¼</p><hr><h2 id="ä»¥ä¸‹ä¸ºè¡¥å……ï¼š"><a href="#ä»¥ä¸‹ä¸ºè¡¥å……ï¼š" class="headerlink" title="ä»¥ä¸‹ä¸ºè¡¥å……ï¼š"></a>ä»¥ä¸‹ä¸ºè¡¥å……ï¼š</h2><ol><li>root å‘Šè¯‰å†…æ ¸æ ¹åˆ†åŒºè®¾å¤‡</li><li>ro è¡¨ç¤ºåœ¨è®¾å¤‡å¯åŠ¨æ—¶ä¸ºread-onlyï¼Œå¦‚æœæ˜¯rwè¡¨ç¤ºread-write</li><li>splash è¡¨ç¤ºå¼€æœºç”»é¢</li><li>quiet ç¤ºåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åªæœ‰é‡è¦ä¿¡æ¯æ˜¾ç¤ºï¼Œç±»ä¼¼ç¡¬ä»¶è‡ªæ£€çš„æ¶ˆæ¯ä¸å›æ˜¾ç¤º</li><li>single ä»¥å•ç”¨æˆ·æ¨¡å¼ç™»å½•ï¼Œä¸€èˆ¬ç”¨äºä¿®å¤ç³»ç»Ÿï¼Œæ¯”å¦‚å¿˜è®°å¯†ç </li><li>ä¸€äº›å†…æ ¸ç›¸å…³çš„å‘½ä»¤<ul><li>æŸ¥çœ‹æœ¬æœºçš„å†…æ ¸<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ uname -r</span><br></pre></td></tr></table></figure></li><li>æ˜¾ç¤ºå¯ä»¥å®‰è£…çš„å†…æ ¸<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-cache search linux</span><br></pre></td></tr></table></figure></li><li>å®‰è£…å†…æ ¸  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install -y linux-headers-version-generic linux-image-version-generic linux-image-extra-version-generic</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„å†…æ ¸  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dpkg -l|grep linux-image</span><br></pre></td></tr></table></figure></li><li>å¸è½½æ— ç”¨çš„å†…æ ¸  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get purge xxxxx</span><br></pre></td></tr></table></figure>ä»¥åŠä¸€ä½åŒé“ä¸­äººå¯¹é‡è£…å¤±è´¥æ¢å†…æ ¸çš„å¿ƒå¾—æ€»ç»“ï¼Œæœç„¶å¤–å›½å‹äººçœ‹å¾—æ˜ç™½ï¼Œæˆ‘ä¹Ÿå¼„æ‡‚äº†å¤§æ¦‚æ€ä¹ˆå›äº‹ï¼š<blockquote><p>å½“15.5å‡ºç°å¹¶ä¸”åœ¨å‡çº§ä¹‹åï¼Œæˆ‘æ³¨æ„åˆ°ç³»ç»Ÿå¯ä»¥åœ¨å¯åŠ¨æ—¶ç™»å½•åˆ°ç™»å½•å±å¹•å¹¶ä¸”æ— æ³•åŠ è½½æ¡Œé¢æˆ–ç™»å½•åå‡ºç°çš„ä»»ä½•GUIã€‚ç”±äºå‡çº§åï¼ˆéå…¨æ–°å®‰è£…ï¼‰ï¼Œä»¥å‰ç‰ˆæœ¬é™„å¸¦çš„å†…æ ¸ä»ç„¶é©»ç•™åœ¨ç³»ç»Ÿä¸Šï¼Œæˆ‘å°è¯•ä½¿ç”¨GRUBä¸Šçš„é«˜çº§é€‰é¡¹å¯åŠ¨ç¬”è®°æœ¬ç”µè„‘ï¼ˆç°åœ¨ä½¿ç”¨Deepin 15.5ï¼‰å’Œæ—§å†…æ ¸ï¼ˆé™„å¸¦15.4ï¼‰èœå•ã€‚é€‰æ‹©ä»¥å‰çš„å†…æ ¸Linux 4.9.0-deepin13-amd64æœ‰ç”¨ã€‚æ‰€ä»¥<strong>æ–°çš„15.5ç°åœ¨å¯ä»¥è¿è¡Œï¼Œä½†åªæœ‰15.4é™„å¸¦çš„å†…æ ¸</strong>ã€‚</p><p>å½“15.6å’Œ15.7å‡ºå±€æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å”¯ä¸€æœ‰æ•ˆçš„å†…æ ¸æ˜¯ä¸Deppin 15.4 ä¸€æ ·çš„æ—§Linux 4.9.0-deepin13-amd64ã€‚è¿™æ„å‘³ç€Deepinæ‰“åŒ…çš„æ–°å†…æ ¸ç›®å‰æ— æ³•åœ¨è¿™äº›ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œã€‚</p><p>è¿™æ„å‘³ç€å¦‚æœæˆ‘ç¢°å·§é‡æ–°å®‰è£…Deepin OS 15.5,15.6æˆ–å½“å‰çš„15.7ï¼Œè¿™äº›å†…æ ¸åŒ…è£…çš„æ˜¯15.4ä¸­åŠ è½½çš„å†…æ ¸ä»¥å¤–çš„æ–°å†…æ ¸ï¼Œç¬”è®°æœ¬ç”µè„‘ç”šè‡³éƒ½æ— æ³•å¯åŠ¨ã€‚</p><p>å¦‚æœæˆ‘è¦å®‰è£…Deepin 15.7ï¼Œé‚£ä¹ˆé¦–å…ˆæˆ‘<strong>å¿…é¡»å®‰è£…15.4å¹¶å‡çº§åˆ°15.7ï¼Œè¿™æ ·æˆ‘æ‰èƒ½ä¿ç•™å¹¶ä½¿ç”¨15.4é™„å¸¦çš„å†…æ ¸ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰Deepin 15.4å¯ä»¥åœ¨è¿™äº›æœºå™¨ä¸Šè¿›è¡Œå…¨æ–°å®‰è£…</strong>ã€‚</p><p>åœ¨å…¶ä»–æœºå™¨ä¸Šå¤åˆ¶è¿™äº›å®‰è£…æœ€ç»ˆä½¿æ‰€æœ‰å®‰è£…å·¥ä½œæ­£å¸¸ï¼Œ15.5,15.6å’Œ15.7ä¸æ›´æ–°çš„å†…æ ¸ä¸€èµ·æä¾›ã€‚</p><p>å¥–åŠ±ï¼šæˆ‘è¿˜è§‚å¯Ÿåˆ°ï¼Œåœ¨15.4ï¼ˆå·¥ä½œæ­£å¸¸ï¼‰æ—¶ï¼Œ<strong>Deepinæ¡Œé¢ç¯å¢ƒï¼ˆddeï¼‰çš„ä»»ä½•å‡çº§</strong> éƒ½ä¼šä½¿æœºå™¨å¤„äºä¸å®‰è£…15.5,15.6å’Œ15.7æ—¶ç›¸åŒçš„çŠ¶æ€ã€‚</p></blockquote></li></ul></li></ol><p>è‡³äºä¸ºä»€ä¹ˆæ–°å†…æ ¸ä¸èƒ½ç”¨ï¼ŒåŸå› å¤§æ¦‚æ˜¯ï¼šæ›´æ–°å®Œå†…æ ¸ä¹‹åï¼Œæˆ‘çš„ <strong>Nvidiaç‹¬æ˜¾é©±åŠ¨å’Œå†…æ ¸æ— æ³•ä¸€èµ·å·¥ä½œ</strong>ï¼Œå¯¼è‡´æ— æ³•è¿›å…¥æ¡Œé¢</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ™šä¸Šä¿®æ”¹äº†deepinçš„å¯åŠ¨é¡¹ã€‚&lt;br&gt;è™½ç„¶è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆamd64ç‰ˆæœ¬å°±å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å…ˆç…§ä¸€ä¸ªå¸–å­ä¿®æ”¹äº†å¯åŠ¨é¡¹ã€‚æˆ‘è§‰å¾—æ²¡é—®é¢˜ã€‚ä½†æ˜¯è¿˜æ˜¯è®°å½•ä¸€ä¸‹ä¿®æ”¹è¿‡ç¨‹ä»¥åŠä¸€äº›ç»†èŠ‚&lt;br&gt;</summary>
    
    
    
    <category term="OS" scheme="http://codeminions.github.io/categories/OS/"/>
    
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
    <category term="Deepin" scheme="http://codeminions.github.io/tags/Deepin/"/>
    
  </entry>
  
  <entry>
    <title>Fragmentçš„å°è£…ä¸è°ƒåº¦ä¼˜åŒ– åŠBottomNavigationViewçš„ä½¿ç”¨</title>
    <link href="http://codeminions.github.io/2018/12/06/fragment%E5%B0%81%E8%A3%85/"/>
    <id>http://codeminions.github.io/2018/12/06/fragment%E5%B0%81%E8%A3%85/</id>
    <published>2018-12-06T04:28:29.000Z</published>
    <updated>2019-03-20T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘é€šè¿‡ç½‘è¯¾ï¼Œäº†è§£åˆ°ä¸€ç§ååˆ†å·§å¦™çš„fragmentçš„å°è£…ä»¥åŠè°ƒåº¦æ–¹å¼ã€‚é‚è®°å½•ä¸‹ç†è§£</p></blockquote><h2 id="Fragmentçš„å°è£…"><a href="#Fragmentçš„å°è£…" class="headerlink" title="Fragmentçš„å°è£…"></a>Fragmentçš„å°è£…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Fragment</span> <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">support</span>.<span class="title">v4</span>.<span class="title">app</span>.<span class="title">Fragment</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¾¿äºå¤ç”¨</span></span><br><span class="line">    <span class="keyword">protected</span> View mRoot;</span><br><span class="line">    <span class="keyword">protected</span> Unbinder mRootUnBinder;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“ä¸€ä¸ªfragmentè¢«æ·»åŠ åˆ°ä¸€ä¸ªacitvityä¸­ï¼Œæœ€é¦–å…ˆè¢«è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * contextå³ä¸ºactivity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAttach</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onAttach(context);</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        initArgs(getArguments());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(<span class="meta">@NonNull</span> LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(mRoot == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> layId = getContentLayoutId();</span><br><span class="line">            <span class="comment">// åˆå§‹åŒ–å½“å‰æ ¹å¸ƒå±€ï¼Œä½†ä¸åœ¨åˆ›å»ºæ—¶å°±æ·»åŠ åˆ°containerä¸­å»ï¼ˆreturn rootåæ–¹æ³•å†…éƒ¨è°ƒåº¦è‡ªåŠ¨æ·»åŠ åˆ°containerä¸­å»ï¼‰</span></span><br><span class="line">            View root = inflater.inflate(layId, container, <span class="keyword">false</span>);</span><br><span class="line">            initWidget(root);</span><br><span class="line">            mRoot = root;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// çˆ¶å¸ƒå±€ä¸ç­‰äºç©ºï¼Œåˆ™æŠŠå½“å‰rootä»å…¶çˆ¶æ§ä»¶ä¸­ç§»é™¤</span></span><br><span class="line">            <span class="keyword">if</span>(mRoot.getParent() != <span class="keyword">null</span>)&#123;</span><br><span class="line">                ((ViewGroup)mRoot.getParent()).removeView(mRoot);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mRoot;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ˜¯å¦è·å–åˆ°æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initArgs</span><span class="params">(Bundle bundle)</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“viewç•Œé¢åˆå§‹åŒ–åˆ›å»ºå®Œæˆä»¥å</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        initData();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å½“å‰ç•Œé¢çš„èµ„æºæ–‡ä»¶id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> èµ„æºæ–‡ä»¶id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getContentLayoutId</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initWidget</span><span class="params">(View root)</span></span>&#123;</span><br><span class="line">        mRootUnBinder = ButterKnife.bind(<span class="keyword">this</span>, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æŒ‰é”®è§¦å‘æ—¶è°ƒç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›trueä»£è¡¨æˆ‘å·²å¤„ç†è¿”å›é€»è¾‘ï¼Œactivityä¸ç”¨è‡ªå·±finish</span></span><br><span class="line"><span class="comment">     * è¿”å›flaseä»£è¡¨æœªå¤„ç†é€»è¾‘(ä¸æ‹¦æˆª)ï¼Œactivityè‡ªå·±å¤„ç†é€»è¾‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onBackPressed</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Fragmentçš„ä½¿ç”¨"><a href="#Fragmentçš„ä½¿ç”¨" class="headerlink" title="Fragmentçš„ä½¿ç”¨"></a>Fragmentçš„ä½¿ç”¨</h2><p>fragmentç»å¸¸ä¸BottomNavigationViewä¸€èµ·ä½¿ç”¨ï¼Œä½œä¸ºåº•éƒ¨å¯¼èˆªæ åˆ‡æ¢ç•Œé¢ã€‚æ‰€ä»¥æ¥ç€å­¦ä¹ ä¸€ä¸‹BottomNavigationViewçš„ä½¿ç”¨ä»¥åŠå°è£…ä¸€ä¸ªHelperè®©BottomNavigationViewä½¿ç”¨æ›´åŠ ä¾¿æ·å’Œæ›´å¥½çš„æå‡fragmentæ€§èƒ½</p><h3 id="BottomNavigationViewä½¿ç”¨"><a href="#BottomNavigationViewä½¿ç”¨" class="headerlink" title="BottomNavigationViewä½¿ç”¨"></a>BottomNavigationViewä½¿ç”¨</h3><h4 id="menuå¸ƒå±€"><a href="#menuå¸ƒå±€" class="headerlink" title="menuå¸ƒå±€"></a>menuå¸ƒå±€</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--navigation_items.xml--&gt;</span></span><br><span class="line">&lt;item</span><br><span class="line">    android:icon=&quot;@drawable/ic_home&quot;</span><br><span class="line">    android:title=&quot;@string/action_home&quot;</span><br><span class="line">    app:showAsAction=&quot;always&quot; /&gt;</span><br><span class="line">&lt;item</span><br><span class="line">    android:icon=&quot;@drawable/ic_group&quot;</span><br><span class="line">    android:title=&quot;@string/action_group&quot;</span><br><span class="line">    app:showAsAction=&quot;ifRoom&quot; /&gt;</span><br></pre></td></tr></table></figure><ul><li>alwaysè¡¨ç¤ºä¸€å®šä¼šæ˜¾ç¤ºï¼ŒifRoomè¡¨ç¤ºå¦‚æœå­˜åœ¨ç©ºé—´å°±æ”¾ä¸Šå»ã€‚</li><li>é»˜è®¤åœ¨é¡¶éƒ¨èœå•æ æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ§ä»¶ï¼Œå…¶ä½™æ”¾åœ¨ä¸‹æ‹‰é€‰é¡¹ä¸­ã€‚ä¹Ÿå¯ç”¨äºåº•éƒ¨å¯¼èˆªæ <h4 id="åº•éƒ¨å¯¼èˆªæ ç¤ºä¾‹"><a href="#åº•éƒ¨å¯¼èˆªæ ç¤ºä¾‹" class="headerlink" title="åº•éƒ¨å¯¼èˆªæ ç¤ºä¾‹"></a>åº•éƒ¨å¯¼èˆªæ ç¤ºä¾‹</h4>èœå•æ +é¢œè‰²é€‰æ‹©å™¨<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.design.widget.BottomNavigationView</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;@dimen/len_52&quot;</span><br><span class="line">    android:layout_gravity=&quot;bottom&quot;</span><br><span class="line">    app:menu=&quot;@menu/navigation_items&quot;</span><br><span class="line">    app:itemIconTint=&quot;@color/text_nav&quot;</span><br><span class="line">    app:itemTextColor=&quot;@color/text_nav&quot;&gt;</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®ç›‘å¬"><a href="#è®¾ç½®ç›‘å¬" class="headerlink" title="è®¾ç½®ç›‘å¬"></a>è®¾ç½®ç›‘å¬</h4></li><li>è®¾ç½®ç›‘å¬ setOnNavigationItemSelectedListener(Activity)</li><li>å®ç°æ¥å£ BottomNavigationView.OnNavigationItemSelectedListener<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº•éƒ¨å¯¼èˆªæ è¢«ç‚¹å‡»æ—¶è§¦å‘</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onNavigationItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem menuItem)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®ç°UIæ“ä½œ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="comment">// è®°å¾—è¿”å›trueä»£è¡¨å¯ä»¥å¤„ç†æœ¬æ¬¡ç‚¹å‡»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="fragmentçš„æ›¿æ¢åŠè°ƒåº¦"><a href="#fragmentçš„æ›¿æ¢åŠè°ƒåº¦" class="headerlink" title="fragmentçš„æ›¿æ¢åŠè°ƒåº¦"></a>fragmentçš„æ›¿æ¢åŠè°ƒåº¦</h3></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€èˆ¬æ›¿æ¢fragmentçš„æ–¹æ³•</span></span><br><span class="line">getSupportFragmentManager()</span><br><span class="line">  .beginTransaction()</span><br><span class="line">  .add(R.layout, <span class="keyword">new</span> Fragment)</span><br><span class="line">  .commit();</span><br></pre></td></tr></table></figure><ul><li>getSupporrtFragment()ä¼šè¿”å›ä¸€ä¸ªFragmentManagerï¼Œé‡Œé¢å¸¦æœ‰ä¸€ä¸ªå½“å‰Acivityä¸‹åŠ è½½çš„Fragmentåˆ—è¡¨ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å®ƒæŸ¥çœ‹å½“å‰Fragmantçš„çŠ¶æ€</li><li>æœ¬ä»¥ä¸ºç”¨replace()ä»£æ›¿add()ï¼Œå·²ç»å¯ä»¥é¿å…è¦†ç›–çš„é—®é¢˜ï¼Œå¹¶ä¸”èŠ‚çº¦èµ„æºäº†ã€‚å…¶å®ï¼Œæ¯æ¬¡éƒ½è¦newä¸€éfragmentï¼Œå°±ä¸æ˜¯å¾ˆèŠ‚çº¦èµ„æºï¼Œé‡è¦çš„æ˜¯ï¼Œå¾ˆå¤šfragmentæ•°æ®ä¸èƒ½ä¿ç•™å¤ç”¨ã€‚äºæ˜¯å®šä¹‰ä¸€ä¸ªNavHelperç±»ï¼Œä¼˜åŒ–fragmnentçš„è°ƒåº¦ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£å†³Fragmentçš„è°ƒåº¦ä¸é‡ç”¨é—®é¢˜</span></span><br><span class="line"><span class="comment"> * è¾¾åˆ°æœ€ä¼˜çš„Fragmentåˆ‡æ¢</span></span><br><span class="line"><span class="comment"> * ç”¨äºç®¡ç†å½“å‰å·²åŠ è½½çš„fragment</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NavHelper</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">//æ‰€æœ‰çš„Tabé›†åˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SparseArray&lt;Tab&gt; tabs = <span class="keyword">new</span> SparseArray&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> FragmentManager manager;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> containerId;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Context context;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> OnTabChangeListener&lt;T&gt; listener;</span><br><span class="line">    <span class="comment">//å½“å‰é€‰ä¸­çš„Tab</span></span><br><span class="line">    <span class="keyword">private</span> Tab&lt;T&gt; currentTab;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NavHelper</span><span class="params">(Context context, <span class="keyword">int</span> containerId, FragmentManager manager, OnTabChangeListener&lt;T&gt; listener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.manager = manager;</span><br><span class="line">        <span class="keyword">this</span>.containerId = containerId;</span><br><span class="line">        <span class="keyword">this</span>.context = context;</span><br><span class="line">        <span class="keyword">this</span>.listener = listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›NavHelperå®ä¾‹ï¼Œä¾¿äºé“¾å¼è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> NavHelper&lt;T&gt; <span class="title">add</span><span class="params">(<span class="keyword">int</span> menuId, Tab&lt;T&gt; tab)</span></span>&#123;</span><br><span class="line">        tabs.put(menuId, tab);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tab&lt;T&gt; <span class="title">getCurrentTab</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> currentTab;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œç‚¹å‡»èœå•çš„æ“ä½œï¼Œæ¥ç®¡å¯¹Meunçš„è°ƒåº¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> menuId èœå•é¡¹id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦å¯ä»¥å¤„ç†è¯¥ç‚¹å‡»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">performClickMenu</span><span class="params">(<span class="keyword">int</span> menuId)</span></span>&#123;</span><br><span class="line">        Tab&lt;T&gt; tab = tabs.get(menuId);</span><br><span class="line">        <span class="keyword">if</span>(tab != <span class="keyword">null</span>)&#123;</span><br><span class="line">            doSelect(tab);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿›è¡Œtabçš„é€‰æ‹©æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doSelect</span><span class="params">(Tab&lt;T&gt; tab)</span></span>&#123;</span><br><span class="line">        Tab&lt;T&gt; oldTab = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(currentTab != <span class="keyword">null</span>)&#123;</span><br><span class="line">            oldTab = currentTab;</span><br><span class="line">            <span class="keyword">if</span>(oldTab == tab)&#123;</span><br><span class="line">                <span class="comment">// å³äºŒæ¬¡ç‚¹å‡»</span></span><br><span class="line">                notifyReselect(tab);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        currentTab = tab;</span><br><span class="line">        doTabChanged(currentTab, oldTab);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿›è¡ŒFragmentçš„çœŸå®è°ƒåº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doTabChanged</span><span class="params">(Tab&lt;T&gt; newTab, Tab&lt;T&gt; oldTab)</span></span>&#123;</span><br><span class="line">        FragmentTransaction ft = manager.beginTransaction();</span><br><span class="line">        <span class="keyword">if</span>(oldTab != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(oldTab.fragment != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">// ä»ç•Œé¢ä¸­ç§»é™¤ï¼Œä½†æ˜¯è¿˜åœ¨fragmentçš„ç¼“å­˜ç©ºé—´ä¸­</span></span><br><span class="line">                ft.detach(oldTab.fragment);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(newTab != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(newTab.fragment == <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">// é¦–æ¬¡æ–°å»º</span></span><br><span class="line">                Fragment fragment = Fragment.instantiate(context, newTab.clx.getName(), <span class="keyword">null</span>);</span><br><span class="line">                <span class="comment">// ä¿å­˜åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">                newTab.fragment = fragment;</span><br><span class="line">                <span class="comment">// æäº¤åˆ°FragmentManger</span></span><br><span class="line">                ft.add(containerId, fragment, newTab.clx.getName());</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// ä»FragmentMangerçš„ç¼“å­˜ç©ºé—´ä¸­é‡æ–°åŠ è½½åˆ°ç•Œé¢ä¸­</span></span><br><span class="line">                ft.attach(newTab.fragment);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">        ft.commit();</span><br><span class="line">        notifyTabSelect(newTab, oldTab);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›è°ƒç›‘å¬å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyTabSelect</span><span class="params">(Tab&lt;T&gt; newTab, Tab&lt;T&gt; oldTab)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(listener != <span class="keyword">null</span>)&#123;</span><br><span class="line">            listener.onTabChanged(newTab, oldTab);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyReselect</span><span class="params">(Tab&lt;T&gt; tab)</span></span>&#123;</span><br><span class="line">        <span class="comment">// åˆ·æ–°Tab</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰èœå•çš„ç±»å‹</span></span><br><span class="line"><span class="comment">     * staticä¸èƒ½è®©å¤–éƒ¨ç±»å¼•ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Tab</span> </span>&#123;</span><br><span class="line">         <span class="comment">// Fragmentå¯¹åº”çš„Classä¿¡æ¯</span></span><br><span class="line">         Class&lt;?&gt; clx;</span><br><span class="line">         <span class="comment">// é¢å¤–å­—æ®µï¼Œç”¨æˆ·è‡ªå·±è®¾å®šéœ€è¦ä½¿ç”¨</span></span><br><span class="line">         <span class="keyword">public</span> T extra;</span><br><span class="line">         <span class="comment">// å†…éƒ¨ç¼“å­˜çš„å¯¹åº”çš„fragmentï¼Œä¸èƒ½è¢«å¤–éƒ¨è·å–</span></span><br><span class="line">         Fragment fragment;</span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="title">Tab</span><span class="params">(Class&lt;?&gt; clx, T extra)</span></span>&#123;</span><br><span class="line">             <span class="keyword">this</span>.clx = clx;</span><br><span class="line">             <span class="keyword">this</span>.extra = extra;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnTabChangeListener</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onTabChanged</span><span class="params">(Tab&lt;T&gt; newTab, Tab&lt;T&gt; oldTab)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>NavHelperå®šä¹‰é€»è¾‘ï¼š</li><li>å®šä¹‰performClickMenu()ï¼Œä»å¯¼èˆªæ è¢«ç‚¹å‡»æ—¶è‡ªåŠ¨è§¦å‘çš„onNavigationItemSelected()æ–¹æ³•é‚£æ¥ç®¡å¯¹menuçš„è°ƒåº¦ã€‚è¿”å›booleanæ ‡ç¤ºæ˜¯å¦å¤„ç†è¯¥ç‚¹å‡»</li><li><p>performClickMenu()æ–¹æ³•åˆ¤æ–­ç‚¹å‡»çš„tabæ˜¯å¦å·²æ·»åŠ </p><ul><li>Helperç±»ä¸­å®šä¹‰ä¸€ä¸ªé›†åˆä¿å­˜menuä¸­æ‰€æœ‰çš„tabã€‚ï¼ˆé›†åˆå®ç°ä½¿ç”¨æ¯”Setï¼ŒListæ›´åŠ è½»é‡çº§çš„SparseArrayï¼‰æ‰€ä»¥å¿…é¡»æ·»åŠ ä¸€ä¸ªadd()æ–¹æ³•ç”¨äºåˆå§‹åŒ–helperåæŠŠmenuä¸­çš„tabæ·»åŠ è¿›å»ã€‚æ·»åŠ tabæ—¶éœ€è¦ä¼ å…¥menuçš„ItemIdå’ŒTabçš„å®ä¾‹ã€‚add()ä¸­è°ƒç”¨SparseArray.put()æ·»åŠ å¹¶return thisã€‚æ‰€ä»¥è°ƒç”¨æ—¶æ‰èƒ½helper.add().add()â€¦</li><li><p>å®šä¹‰ä¸€ä¸ªå†…éƒ¨ç±»Tabï¼Œä½œç”¨ç±»ä¼¼äºä¸€ä¸ªä¸­é—´å˜é‡ï¼Œä¸€ä¸ªmenué¡¹ï¼Œfragmentç½®äºå…¶å†…ã€‚å¹¶å®šä¹‰ä¸ºstaticç±»ä½¿å¾—èƒ½å¤Ÿåœ¨å…¶ä»–ç±»ä¸­å¼•ç”¨ã€‚</p><ul><li>éœ€è¦ä¼ é€’å…·ä½“Fragmentçš„Classä¿¡æ¯ï¼Œæœ‰å†…éƒ¨æˆå‘˜Class&lt;? extends Fragment&gt;</li><li>å®šä¹‰å­—æ®µfragmentï¼Œç¼“å­˜fragmentä¿¡æ¯ã€‚</li><li>åˆ‡æ¢fragmentçš„åŒæ—¶åˆ‡æ¢ä¸€äº›å…¶ä»–çš„UIæˆ–æ•°æ®ï¼Œæ‰€ä»¥å†å®šä¹‰ä¸€ä¸ªé¢å¤–å­—æ®µï¼Œç”±ç”¨æˆ·è‡ªå·±è®¾å®šéœ€è¦çš„æ”¹åŠ¨ç±»å‹ï¼Œæ‰€ä»¥å®šä¹‰ä¸ºæ³›å‹ã€‚å› æ­¤class Tab<T>ã€‚ç”±äºåœ¨Helperä¸­å®šä¹‰äº†å­˜æ”¾Tabçš„é›†åˆï¼Œæ‰€ä»¥Helper<T></li><li><p>è‹¥æ·»åŠ äº†è¯¥å­—æ®µï¼Œé‚£ä¹ˆTabçš„æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥Fragmentçš„å…·ä½“Classï¼Œä»¥åŠè¯¥å­—æ®µä¿¡æ¯ã€‚</p><p><strong>æ­¤å¤„å¹¶ä¸ä¸€å®šæ·»åŠ è¯¥å­—æ®µ</strong> å¯¹äºåˆ‡æ¢æ—¶æ›´æ”¹UIï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨Helperæ¥ç®¡å‰æ‰§è¡Œã€‚è¿™æ ·çš„è¯ï¼ŒHeplerä¸­çš„æ‰€æœ‰æ³›å‹åŠåé¢çš„å›è°ƒæ–¹æ³•ä¹Ÿå¯ä»¥ä¸éœ€å®ç°ã€‚åªæ˜¯è¿™æ ·Helperå°±æ²¡æœ‰åŸæ¥é‚£ä¹ˆå…¨æƒæ¥ç®¡Navçš„è°ƒåº¦ã€‚æ„Ÿè§‰éƒ½å¯ä»¥ã€‚</p></li></ul><p>è‹¥å·²æ·»åŠ è¿›é›†åˆï¼Œåˆ™è°ƒç”¨doSelect()å¼€å§‹å¤„ç†æ“ä½œã€‚</p></li></ul></li><li><p>doSelect()ä¸­è°ƒç”¨doTabChanged()å¼€å§‹çœŸæ­£çœŸæ­£çš„æ›¿æ¢æ“ä½œã€‚å› ä¸ºdoTabChanged()æ–¹æ³•ä¸­fragmentæ›¿æ¢åˆ†æ­¥è¿›è¡Œè€Œéä¸€èˆ¬ç›´æ¥ç”¨replace()ï¼Œå³å…ˆèˆå»æ—§çš„ï¼Œå†æ”¾ä¸Šæ–°çš„ï¼Œéœ€è¦ä¸€ä¸ªoldTabå’ŒnewTabã€‚</p><ul><li>æ‰€ä»¥æ·»åŠ ä¸€ä¸ªæˆå‘˜å­—æ®µcurrentTabï¼Œæ–¹ä¾¿æ“ä½œã€‚æ‰€ä»¥éœ€è¦å¯¹è¯¥å­—æ®µè¿›è¡Œæ›´æ–°ï¼Œè¯¥å·¥ä½œç”±doSelect()æ‰¿æ‹…ã€‚</li></ul><p>å®šä¹‰ä¸€ä¸ªoldTabï¼Œä¸åšåˆå§‹åŒ–ã€‚ç”¨æ›´æ–°å‰çš„currentTabç»™oldTabèµ‹å€¼ã€‚<br>è‹¥ç‚¹å‡»çš„tabæ˜¯å½“å‰tabï¼Œåˆ™æ‰§è¡Œåˆ·æ–°notifyReselect()<br>è‹¥ä¸æ˜¯ï¼Œæ›´æ–°currentTabï¼Œè°ƒç”¨æ›¿æ¢æ–¹æ³•</p><p>ä¸ºäº†ä¸¥è°¨ï¼Œåœ¨æ­¤ä¹‹å‰åˆ¤æ–­currentTabæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºï¼Œè°ƒç”¨æ›¿æ¢æ–¹æ³•æ—¶ä¼ å…¥çš„oldTabå³ä¸ºnullã€‚</p></li><li><p>doTabChanged()æ–¹æ³•å¤§æŠµä¸ä¸€èˆ¬æ›¿æ¢fragmentæ–¹å¼ç›¸åŒï¼š<br>ç”¨FragmentManager.beginTransaction()åˆå§‹åŒ–ä¸€ä¸ªfragmentTransaction</p><ul><li>FragmentManageréœ€è¦åœ¨æ¥ç®¡æ—¶ç”±activityä¼ å…¥ï¼Œå› æ­¤éœ€å®šä¹‰å†…éƒ¨å­—æ®µmanager</li></ul><p>ä½¿ç”¨transactionè°ƒç”¨detach()ï¼Œattach()åœ¨å†…å­˜ä¸­æ›¿æ¢fragmentã€‚æäº¤ï¼Œç„¶åè°ƒç”¨notifyTabSelect()é€šçŸ¥å¹¶åˆ·æ–°ã€‚</p><ul><li>notifyTabSelect()æ–¹æ³•ä¸­å›è°ƒæ¥å£æ–¹æ³•onTabChanged()ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ æˆå‘˜å­—æ®µOnTabChangeListener listener;</li></ul><p>åœ¨æ›¿æ¢å‰éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚è‹¥oldTabä¸ä¸ºç©ºï¼Œä¸”oldTab.fragmentä¹Ÿä¸ä¸ºç©ºï¼Œåˆ™åœ¨ç•Œé¢ä¸­ç§»é™¤å…¶ä¸­çš„fragmentã€‚</p><p>è‹¥newTabä¸ä¸ºç©ºï¼Œä½†newTab.fragmentä¸ºç©ºï¼Œåˆ™æ–°å»ºä¸€ä¸ªFragmentï¼Œ<u>ç¼“å­˜åˆ°fragmentä¸­</u>ï¼Œå¹¶transaction.add(containerId, fragmentå®ä¾‹, newTab.clx.getName())æäº¤åˆ°managerã€‚è¿™é‡Œéœ€è¦ä¸€ä¸ªcontainerIdå®¹å™¨IDï¼Œä¹Ÿéœ€è¦ä»å¤–éƒ¨ä¼ å…¥ã€‚</p><ul><li>é€šè¿‡Fragment.instantiate(Context, newTab.clx.getName(), null)åˆå§‹åŒ–ã€‚è¿™é‡Œ <strong>ä½¿ç”¨åˆ°äº†Tabçš„Classä¿¡æ¯</strong>ï¼Œä¹Ÿéœ€è¦ä¸€ä¸ªContextã€‚æ‰€ä»¥éœ€è¦åœ¨æˆå‘˜å­—æ®µä¸­æ·»åŠ ä¸€ä¸ªContextï¼Œå¹¶åœ¨åˆå§‹åŒ–æ—¶ä¼ å…¥ã€‚æ­¤å¤„ç›¸å½“äºä¸€èˆ¬æ“ä½œæ—¶ new MyFragment()ã€‚</li></ul><p>è‹¥fragmentä¸ä¸ºç©ºï¼Œä»manageç¼“å­˜ç©ºé—´ä¸­é‡æ–°æ¥è½½åˆ°ç•Œé¢attach()ã€‚</p></li><li>æ‰€ä»¥æœ€åç¼–å†™æ„é€ æ–¹æ³•ï¼Œä¼ å…¥æ‰€ä»¥éœ€è¦ä»å¤–éƒ¨ä¼ å…¥çš„å®ä¾‹ContainerId, Context, OnTabChangeListener, FragmentManagerã€‚è¿™äº›å†…éƒ¨å­—æ®µåŒ…æ‹¬Sparseé›†åˆåœ¨ç±»ä¸­éƒ½ä¸ºfinalå­—æ®µã€‚<strong>ä¸æ˜¯å¾ˆæ˜ç™½ä¸ºä»€ä¹ˆ</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * NavHelperçš„ä½¿å®é™…è°ƒç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">NavHelper</span>.<span class="title">OnTabChangeListener</span>,</span></span><br><span class="line"><span class="class">    <span class="title">BottomNavigationView</span>.<span class="title">OnNavigationItemSelectedListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@BindView(R.id.navigation)</span></span><br><span class="line">    BottomNavigationView mNavigation;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> NavHelper mNavHelper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        ......</span><br><span class="line">        initWidget();</span><br><span class="line">        <span class="comment">//ä»åº•éƒ¨å¯¼èˆªä¸­æ¥ç®¡menuï¼Œæ‰‹åŠ¨è¿›è¡Œè§¦å‘</span></span><br><span class="line">        Menu menu = mNavigation.getMenu();</span><br><span class="line">        menu.performIdentifierAction(R.id.action_home, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initWidget</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–åº•éƒ¨æ è¾…åŠ©å·¥å…·ç±»</span></span><br><span class="line">        mNavHelper = <span class="keyword">new</span> NavHelper(<span class="keyword">this</span>, R.id.lay_container, getSupportFragmentManager(), <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        mNavHelper.add(R.id.action_home, <span class="keyword">new</span> NavHelper.Tab(ActiveFragment.class))</span><br><span class="line">                .add(R.id.action_contact, <span class="keyword">new</span> NavHelper.Tab(ContactFragment.class))</span><br><span class="line">                .add(R.id.action_group, <span class="keyword">new</span> NavHelper.Tab(GroupFragment.class));</span><br><span class="line"></span><br><span class="line">        mNavigation.setOnNavigationItemSelectedListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åº•éƒ¨å¯¼èˆªè¢«ç‚¹å‡»æ—¶è§¦å‘</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onNavigationItemSelected</span><span class="params">(MenuItem menuItem)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å°†äº‹ä»¶æµè½¬æ¥åˆ°å·¥å…·ç±»ä¸­</span></span><br><span class="line">        <span class="keyword">return</span> mNavHelper.performClickMenu(menuItem.getItemId());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * NavHelperå¤„ç†å®Œæˆåå›è°ƒçš„æ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTabChanged</span><span class="params">(NavHelper.Tab newTab, NavHelper.Tab oldTab)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…è°ƒç”¨ï¼š</p><ul><li>å…ˆåˆå§‹åŒ–NavHelperç±»ï¼Œä¼ å…¥Context(this), FragmentManager(getSupportFragmentManager()), ContainerId(IdRes), OnTabChangeListener(this, activityå·²ç»§æ‰¿è¯¥æ¥å£)</li><li>è°ƒç”¨NavHelper.add()å°†æ‰€æœ‰çš„fragmentä»¥Tabçš„å½¢å¼æ·»åŠ åˆ°é›†åˆä¸­ï¼Œåœ¨æ­¤å¤„ä¼ å…¥å…¶å…·ä½“ç±»å‹ä¸ºClass clxèµ‹å€¼</li><li><p>åˆ«å¿˜äº†ä¸ºBottomNavigationViewæ·»åŠ ç›‘å¬ã€‚</p><ul><li><p>æ·»åŠ ç›‘å¬æ—¶ç»§æ‰¿OnNavigationItemSelectedListeneræ¥å£ï¼Œéœ€è¦å®ç°æ¥å£æ–¹æ³•onNavigationItemSelectedï¼Œæ ‡ç¤ºèƒ½å¦å¤„ç†æ­¤æ¬¡ç‚¹å‡»ï¼ŒåŒæ—¶è°ƒç”¨NavHelper.performClickMenu()æ–¹æ³•å®ç°fragmentè°ƒåº¦çš„äº¤æ¥ã€‚</p><p>åœ¨NavHelperä¸­å®Œæˆåˆ‡æ¢åï¼Œä¼šå›è°ƒæ¥å£æ–¹æ³•OnTabChangeListener.onTabChanged()ã€‚å®ç°è¯¥æ–¹æ³•ï¼Œå®Œæˆåˆ‡æ¢fragmentæ—¶UIä¿®æ”¹ã€‚</p></li></ul></li></ul><p>FragmentTransactionæ“ä½œåŒºåˆ«</p><ul><li>add() :å°†fragmentæ·»åŠ åˆ°containerä¸­</li><li>replace() :æ›¿æ¢containerä¸­çš„fragmentï¼Œç§»é™¤å…¶ä¸­æ‰€æœ‰çš„fragmentã€‚</li><li>hide/show() :éšè—ä¸æ˜¾ç¤ºï¼Œä¸ç§»é™¤containerä¸­çš„fragment</li><li>attach/detach() :ä»å¸ƒå±€ä¸Šç§»é™¤ï¼Œä½†å­˜å‚¨åœ¨ç¼“å­˜é˜Ÿåˆ—ä¸­ã€‚ä¸ä¼šè¢«æµ‹é‡åˆ°ï¼Œä½†å¯ä»¥è¢«é‡ç”¨ï¼Œå‡å°‘fragçš„é‡å¤åˆ›å»ºï¼Œå‡å°‘å†…å­˜æŠ–åŠ¨ã€‚</li><li>remove() :ç›´æ¥ç§»é™¤</li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘é€šè¿‡ç½‘è¯¾ï¼Œäº†è§£åˆ°ä¸€ç§ååˆ†å·§å¦™çš„fragmentçš„å°è£…ä»¥åŠè°ƒåº¦æ–¹å¼ã€‚é‚è®°å½•ä¸‹ç†è§£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Fragmentçš„å°è£…&quot;&gt;&lt;a href=&quot;#Fragmentçš„å°è£…&quot; class=&quot;headerlink&quot; title=&quot;Fragmentçš„å°è£…&quot;&gt;&lt;/a&gt;Fragmentçš„å°è£…&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Fragment&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;android&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;support&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;v4&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;app&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;Fragment&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//ä¾¿äºå¤ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; View mRoot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; Unbinder mRootUnBinder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * å½“ä¸€ä¸ªfragmentè¢«æ·»åŠ åˆ°ä¸€ä¸ªacitvityä¸­ï¼Œæœ€é¦–å…ˆè¢«è°ƒç”¨çš„æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * contextå³ä¸ºactivity&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onAttach&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onAttach(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//åˆå§‹åŒ–å‚æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        initArgs(getArguments());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Nullable&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; View &lt;span class=&quot;title&quot;&gt;onCreateView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;meta&quot;&gt;@NonNull&lt;/span&gt; LayoutInflater inflater, &lt;span class=&quot;meta&quot;&gt;@Nullable&lt;/span&gt; ViewGroup container, &lt;span class=&quot;meta&quot;&gt;@Nullable&lt;/span&gt; Bundle savedInstanceState)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(mRoot == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; layId = getContentLayoutId();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// åˆå§‹åŒ–å½“å‰æ ¹å¸ƒå±€ï¼Œä½†ä¸åœ¨åˆ›å»ºæ—¶å°±æ·»åŠ åˆ°containerä¸­å»ï¼ˆreturn rootåæ–¹æ³•å†…éƒ¨è°ƒåº¦è‡ªåŠ¨æ·»åŠ åˆ°containerä¸­å»ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            View root = inflater.inflate(layId, container, &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            initWidget(root);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mRoot = root;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// çˆ¶å¸ƒå±€ä¸ç­‰äºç©ºï¼Œåˆ™æŠŠå½“å‰rootä»å…¶çˆ¶æ§ä»¶ä¸­ç§»é™¤&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(mRoot.getParent() != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ((ViewGroup)mRoot.getParent()).removeView(mRoot);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mRoot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * åˆ¤æ–­æ˜¯å¦è·å–åˆ°æ•°æ®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;initArgs&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Bundle bundle)&lt;/span&gt;&lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å½“viewç•Œé¢åˆå§‹åŒ–åˆ›å»ºå®Œæˆä»¥å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onViewCreated&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;meta&quot;&gt;@NonNull&lt;/span&gt; View view, &lt;span class=&quot;meta&quot;&gt;@Nullable&lt;/span&gt; Bundle savedInstanceState)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onViewCreated(view, savedInstanceState);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        initData();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * è·å–å½“å‰ç•Œé¢çš„èµ„æºæ–‡ä»¶id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt; èµ„æºæ–‡ä»¶id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getContentLayoutId&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;initWidget&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(View root)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mRootUnBinder = ButterKnife.bind(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, root);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;initData&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * è¿”å›æŒ‰é”®è§¦å‘æ—¶è°ƒç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt; è¿”å›trueä»£è¡¨æˆ‘å·²å¤„ç†è¿”å›é€»è¾‘ï¼Œactivityä¸ç”¨è‡ªå·±finish&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     * è¿”å›flaseä»£è¡¨æœªå¤„ç†é€»è¾‘(ä¸æ‹¦æˆª)ï¼Œactivityè‡ªå·±å¤„ç†é€»è¾‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;     */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onBackPressed&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>Deepinæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»</title>
    <link href="http://codeminions.github.io/2018/12/01/Deepin%EF%BC%88Ubuntu%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%8F%98%E6%88%90%E5%8F%AA%E8%AF%BB/"/>
    <id>http://codeminions.github.io/2018/12/01/Deepin%EF%BC%88Ubuntu%EF%BC%89%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%8F%98%E6%88%90%E5%8F%AA%E8%AF%BB/</id>
    <published>2018-12-01T00:00:00.000Z</published>
    <updated>2019-03-20T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»"><a href="#è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»" class="headerlink" title="è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»"></a>è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»</h2><h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>ä»Šå¤©è¿›å…¥Deepinï¼Œå¦‚å¾€å¸¸ä¸€èˆ¬æ‰“å¼€Android Studioã€‚çªç„¶å¼¹å‡ºæç¤ºæ¡†ï¼Œè¯´æ˜¯logè€Œæ–‡ä»¶å¤¹æœ‰é—®é¢˜ã€‚è¿˜ä»¥ä¸ºæ˜¯asçš„é—®é¢˜ï¼Œåæ¥æ‰å‘ç°ï¼Œæ˜¯æ–‡ä»¶å¤¹å˜æˆåªè¯»çš„äº†æ— æ³•æ“ä½œã€‚</p><h4 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h4><p>Googleåå‘ç°åŸæ¥æ˜¯æŒ‚è½½åˆ†åŒºå‡ºäº†é—®é¢˜ã€‚è¿™ç§é—®é¢˜æœ‰æ—¶å€™å¯ä»¥ç”¨é‡å¯è§£å†³ã€‚ä½†æˆ‘é‡å¯æ— æœï¼Œå¦å¯»ä»–æ³•ã€‚<br>è¿è¡Œmountï¼ŒæŸ¥çœ‹åˆ†åŒºç»“æ„<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># mount</span><br><span class="line">  ...</span><br><span class="line">  &#x2F;dev&#x2F;sda1 on &#x2F;boot&#x2F;efi type vfat (rw)</span><br><span class="line">  &#x2F;dev&#x2F;sda8 on &#x2F;media&#x2F;UserName&#x2F;407fe087 type ext4 (rw)</span><br><span class="line">  &#x2F;dev&#x2F;sda7 on &#x2F;media&#x2F;UserName&#x2F;Others type fuseblk (ro)</span><br><span class="line">  &#x2F;dev&#x2F;sda6 on &#x2F;media&#x2F;UserName&#x2F;File type fuseblk (ro)</span><br><span class="line">  &#x2F;dev&#x2F;sda5 on &#x2F;media&#x2F;UserName&#x2F;Software type fuseblk (ro)</span><br><span class="line">  &#x2F;dev&#x2F;sda3 on &#x2F;media&#x2F;UserName&#x2F;Windows type fuseblk (ro)</span><br><span class="line">  &#x2F;dev&#x2F;fuse on &#x2F;run&#x2F;user&#x2F;1000&#x2F;doc type fuse (rw)</span><br></pre></td></tr></table></figure><br>å‘ç°é™¤ç³»ç»Ÿç›˜ä»¥å¤–å…¶ä»–å‡ ä¸ªç›˜éƒ½æ˜¯åªè¯»æ¨¡å¼(ro)ï¼Œé‡æ–°æŒ‚è½½ä¸€ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># umount &#x2F;dev&#x2F;sda3</span><br><span class="line"># mount &#x2F;dev&#x2F;sda3 &#x2F;media&#x2F;UserName&#x2F;Windows</span><br></pre></td></tr></table></figure><br>è¿™é‡Œæˆ‘æ˜¯å¤±è´¥äº†ä½†æ˜¯çµå…‰ä¸€é—ªçªç„¶æƒ³èµ·å¥½åƒWindowsçš„éæ­£å¸¸å…³æœºæˆ–æ˜¯ç”µæºé€‰é¡¹å¼€å¯äº†å¿«é€Ÿå¯åŠ¨ï¼Œä¼šå¯¼è‡´æ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™å¼‚å¸¸ã€‚<br>è®°å¾—å¥½åƒæ—©æ™¨ç”¨PSåšå®Œå›¾åï¼Œç¬”è®°æœ¬ç”µæºè€—å°½å…³æœºäº†ï¼Œå……ä¸Šç”µä»¥åæœ‰ç›´æ¥å¼€çš„Deepinã€‚äºæ˜¯æˆ‘é‡å¯ï¼Œè¿›å…¥windowsï¼Œæœç„¶è¿˜ä¿ç•™ç€æ—©æ™¨çš„å·¥ä½œç•Œé¢ã€‚<br>å†è¿›å…¥Deepinï¼Œä¸€åˆ‡æ¢å¤æ­£å¸¸ï¼</p><p>çœ‹åˆ°è¿™é‡Œå¯èƒ½æ„Ÿè§‰åˆ°è¢«éª—äº†ã€‚å…¶å®æƒ³è¯´æ˜¯ä¹Ÿè®¸æ–‡ä»¶ç³»ç»Ÿçš„é”™è¯¯æ˜¯windowséæ­£å¸¸å…³é—­å¯¼è‡´çš„ï¼Œä¸ç”¨æ€¥ç€ä¿®æ”¹æŒ‚è½½åˆ†åŒºå•¥çš„ã€‚<br>å¦‚æœæ˜¯å…¶å®ƒé—®é¢˜å¯ä»¥çœ‹çœ‹ä¸‹è¾¹çš„ä¸¤ç¯‡åšå®¢ï¼Œä¹Ÿè®¸èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚</p><hr><p>å‚è€ƒåšå®¢ï¼š<br><a href="https://www.linuxidc.com/Linux/2010-04/25749.htm">ä¿®å¤äº†Ubuntu 9.10è¯¡å¼‚çš„å˜æˆäº†åªè¯»æ–‡ä»¶ç³»ç»Ÿçš„é”™è¯¯</a><br><a href="http://www.wuwenhui.cn/2513.html">è§£å†³Linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»çš„æ–¹æ³•</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»&quot;&gt;&lt;a href=&quot;#è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»&quot;&gt;&lt;/a&gt;è§£å†³linuxæ–‡ä»¶ç³»ç»Ÿå˜æˆåªè¯»&lt;/h2&gt;&lt;h4 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h4&gt;&lt;p&gt;ä»Šå¤©è¿›å…¥Deepinï¼Œå¦‚å¾€å¸¸ä¸€èˆ¬æ‰“å¼€Android Studioã€‚çªç„¶å¼¹å‡ºæç¤ºæ¡†ï¼Œè¯´æ˜¯logè€Œæ–‡ä»¶å¤¹æœ‰é—®é¢˜ã€‚è¿˜ä»¥ä¸ºæ˜¯asçš„é—®é¢˜ï¼Œåæ¥æ‰å‘ç°ï¼Œæ˜¯æ–‡ä»¶å¤¹å˜æˆåªè¯»çš„äº†æ— æ³•æ“ä½œã€‚&lt;/p&gt;
&lt;h4 id=&quot;è§£æ&quot;&gt;&lt;a href=&quot;#è§£æ&quot; class=&quot;headerlink&quot; title=&quot;è§£æ&quot;&gt;&lt;/a&gt;è§£æ&lt;/h4&gt;&lt;p&gt;Googleåå‘ç°åŸæ¥æ˜¯æŒ‚è½½åˆ†åŒºå‡ºäº†é—®é¢˜ã€‚è¿™ç§é—®é¢˜æœ‰æ—¶å€™å¯ä»¥ç”¨é‡å¯è§£å†³ã€‚ä½†æˆ‘é‡å¯æ— æœï¼Œå¦å¯»ä»–æ³•ã€‚&lt;br&gt;è¿è¡Œmountï¼ŒæŸ¥çœ‹åˆ†åŒºç»“æ„&lt;br&gt;</summary>
    
    
    
    <category term="OS" scheme="http://codeminions.github.io/categories/OS/"/>
    
    
  </entry>
  
  <entry>
    <title>Java Socketä½¿ç”¨</title>
    <link href="http://codeminions.github.io/2018/11/10/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    <id>http://codeminions.github.io/2018/11/10/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</id>
    <published>2018-11-10T04:28:29.000Z</published>
    <updated>2018-11-09T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JAVA-WEBç½‘ç»œç¼–ç¨‹"><a href="#JAVA-WEBç½‘ç»œç¼–ç¨‹" class="headerlink" title="JAVA WEBç½‘ç»œç¼–ç¨‹"></a>JAVA WEBç½‘ç»œç¼–ç¨‹</h2><h3 id="Socketå¥—æ¥å­—"><a href="#Socketå¥—æ¥å­—" class="headerlink" title="Socketå¥—æ¥å­—"></a>Socketå¥—æ¥å­—</h3><ul><li>socketä½¿ç”¨TCPå®ç°è®¡ç®—æœºé—´çš„é€šä¿¡æœºåˆ¶ã€‚clientåˆ›å»ºä¸€ä¸ªsocketï¼Œå¹¶å°è¯•è¿æ¥æœåŠ¡å™¨çš„socketã€‚</li><li><p>å®¢æˆ·ä¸æœåŠ¡ç«¯å¯ä»¥ä½¿ç”¨å¯¹Socketçš„è¯»å†™æ¥å®ç°é€šä¿¡ã€‚</p><p>ServerSocketç±»ä¸ºæœåŠ¡å™¨æä¾›ä¸€ç§ç›‘å¬å®¢æˆ·ç«¯å¹¶å»ºç«‹è¿æ¥çš„æœºåˆ¶ã€‚<br>å…·ä½“å®ç°ï¼š</p><ol><li>Serverç«¯å®ä¾‹åŒ–ä¸€ä¸ªServerSocketï¼Œè¡¨ç¤ºé€šè¿‡æœåŠ¡å™¨ä¸Šçš„ç«¯å£é€šä¿¡ã€‚</li><li>ServerSocket.accept()æ–¹æ³•å°†ä¸€ç›´ç­‰å¾…ç›´åˆ°å®¢æˆ·ç«¯è¿æ¥ä¸ŠæœåŠ¡å™¨çš„ç«¯å£</li><li>Clientç«¯å®ä¾‹åŒ–Socketï¼ŒæŒ‡å®šæœåŠ¡å™¨åœ°å€ä¸ç«¯å£å·è¯·æ±‚è¿æ¥ã€‚</li><li>Socketçš„æ„é€ å‡½æ•°å°è¯•è¿æ¥ã€‚é€šä¿¡è¢«å»ºç«‹åï¼Œåˆ™å¯é€šè¿‡Socketé€šä¿¡ï¼Œå¦åˆ™æŠ›å‡ºIOException</li><li>Serverç«¯accept()è¿”å›ä¸€ä¸ªscoketå¼•ç”¨ï¼Œè¯¥socketè¿æ¥åˆ°Clientçš„Socket<a id="more"></a></li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TCPServer.class</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">6066</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ServerSocket server = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">            System.out.println(<span class="string">&quot;ç­‰å¾…è¿œç¨‹è¿æ¥ï¼Œç«¯å£å·ä¸ºï¼š&quot;</span> + server.getLocalPort() + <span class="string">&quot;...&quot;</span>);</span><br><span class="line">            Socket client = server.accept();</span><br><span class="line">            System.out.println(client.getRemoteSocketAddress());</span><br><span class="line">            <span class="comment">//è·å–è¾“å…¥æµ</span></span><br><span class="line">            DataInputStream in = <span class="keyword">new</span> DataInputStream(client.getInputStream());</span><br><span class="line">            System.out.println(in.readUTF());</span><br><span class="line">            DataOutputStream out = <span class="keyword">new</span> DataOutputStream(client.getOutputStream());</span><br><span class="line">            out.writeUTF(<span class="string">&quot;æ¬¢è¿è¿æ¥ï¼š&quot;</span> + server.getLocalSocketAddress() + <span class="string">&quot;\nGoodbye!&quot;</span>);</span><br><span class="line">            client.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (SocketTimeoutException s)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Time out !&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TCPClient.class</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String serverName = localhost;</span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">6066</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¿æ¥åˆ°ä¸»æœºï¼š&quot;</span> + serverName + <span class="string">&quot;ï¼Œç«¯å£å·ï¼š&quot;</span> + port);</span><br><span class="line">            <span class="comment">//å°è¯•è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line">            Socket client = <span class="keyword">new</span> Socket(serverName, port);</span><br><span class="line">            <span class="comment">//è·å–å¥—æ¥å­—è¿æ¥çš„è¿œç¨‹åœ°å€</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è¿œç¨‹ä¸»æœºåœ°å€ï¼š&quot;</span> + client.getRemoteSocketAddress());</span><br><span class="line">            <span class="comment">//è·å–å¥—æ¥å­—çš„è¾“å‡ºæµ</span></span><br><span class="line">            OutputStream outToServer = client.getOutputStream();</span><br><span class="line"></span><br><span class="line">            DataOutputStream out = <span class="keyword">new</span> DataOutputStream(outToServer);</span><br><span class="line">            out.writeUTF(<span class="string">&quot;Hello from &quot;</span> + client.getLocalSocketAddress());</span><br><span class="line">            <span class="comment">//è·å–å¥—æ¥å­—è¾“å…¥æµ</span></span><br><span class="line">            InputStream inFromServer = client.getInputStream();</span><br><span class="line">            DataInputStream in = <span class="keyword">new</span> DataInputStream(inFromServer);</span><br><span class="line">            System.out.println(<span class="string">&quot;æœåŠ¡å™¨å“åº”ï¼š &quot;</span> + in.readUTF());</span><br><span class="line">            client.close();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  Tip : åˆ©ç”¨è¾“å…¥è¾“å‡ºæµä¼ è¾“æ•°æ®ï¼ŒDataOutputStream(å­—èŠ‚æµ)ï¼Œå¹¶ä¸”ä»¥UTFç¼–ç å†™å…¥ã€‚</p><h3 id="WebæœåŠ¡å™¨å®ç°"><a href="#WebæœåŠ¡å™¨å®ç°" class="headerlink" title="WebæœåŠ¡å™¨å®ç°"></a>WebæœåŠ¡å™¨å®ç°</h3><ul><li>WebæœåŠ¡å™¨ï¼Œä½¿ç”¨httpä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚ä¸»è¦åŒ…æ‹¬HttpServerç±»ï¼ŒRequestç±»ï¼ŒResponseç±»</li><li>åº”ç”¨ç¨‹åºçš„å…¥å£åœ¨HttpServerç±»ä¸­ï¼Œmain()æ–¹æ³•åˆ›å»ºä¸€ä¸ªHttpServerå®ä¾‹ï¼Œç„¶åè°ƒç”¨å…¶await()æ–¹æ³•ï¼Œåœ¨æŒ‡å®šç«¯å£ä¸Šç­‰å¾…HTTPè¯·æ±‚ï¼Œå¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œç„¶åå‘é€å“åº”ä¿¡æ¯å›å®¢æˆ·ç«¯ï¼Œåœ¨æ¥æ”¶åˆ°å…³é—­å‘½ä»¤å‰ï¼Œå®ƒä¼šä¿æŒç­‰å¾…çŠ¶æ€ã€‚</li><li>è¯¥WebæœåŠ¡å™¨ä»…å‘é€ä½äºæŒ‡å®šç›®å½•çš„é™æ€èµ„æºçš„è¯·æ±‚ï¼Œå¦‚htmlæ–‡ä»¶å’Œå›¾åƒï¼Œå®ƒä¹Ÿå¯ä»¥å°†ä¼ å…¥åˆ°çš„httpè¯·æ±‚å­—èŠ‚æµæ˜¾ç¤ºåˆ°æ§åˆ¶å°ï¼Œä½†ä¸å‘é€ä»»ä½•å¤´ä¿¡æ¯åˆ°æµè§ˆå™¨ï¼Œå¦‚æ—¥æœŸæˆ–è€…cookiesç­‰ã€‚</li><li>æˆ‘åªç®€å•å®ç°äº†æœåŠ¡å™¨çš„ä»£ç ï¼Œè¯·æ±‚ä¸å“åº”éƒ¨åˆ†å…ˆç›´æ¥äº¤ç»™æµè§ˆå™¨å¤„ç†ã€‚</li></ul><p><strong>TIP:</strong><br>è¿”å›å®¢æˆ·ç«¯æ—¶æœåŠ¡å™¨å‘é€çš„æ•°æ®:</p><ol><li>HTTP/1.0 200 Document Follows(writeBytes)</li><li>Content-Type:image/jpg(writeBytes)   (è§£ææ–¹å¼)</li><li>Content-Lenght(writeBytes)</li><li>æ–‡ä»¶ -&gt; write(æ–‡ä»¶çš„å­—èŠ‚å½¢å¼, 0, Lenght)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//HTTPServer.class</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Server</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServerSocket server;</span><br><span class="line">    <span class="keyword">private</span> String[] msg;</span><br><span class="line">    <span class="keyword">private</span> String fileName;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Server</span><span class="params">(<span class="keyword">int</span> post)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        server = <span class="keyword">new</span> ServerSocket(post);</span><br><span class="line">        msg = <span class="keyword">new</span> String[<span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                Socket client = server.accept();</span><br><span class="line">                BufferedReader read = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(client.getInputStream()));</span><br><span class="line">                msg = read.readLine().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(msg[<span class="number">0</span>].equals(<span class="string">&quot;GET&quot;</span>))&#123;</span><br><span class="line">                    <span class="keyword">if</span>(msg[<span class="number">1</span>].startsWith(<span class="string">&quot;/&quot;</span>))</span><br><span class="line">                        fileName = msg[<span class="number">1</span>].substring(<span class="number">1</span>);</span><br><span class="line">                    File f = <span class="keyword">new</span> File(fileName);</span><br><span class="line">                    <span class="keyword">int</span> lenght = (<span class="keyword">int</span>) f.length();</span><br><span class="line">                    <span class="keyword">byte</span>[] fileInByte = <span class="keyword">new</span> <span class="keyword">byte</span>[lenght];</span><br><span class="line">                    FileInputStream fin = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">                    fin.read(fileInByte);</span><br><span class="line"></span><br><span class="line">                    DataOutputStream outputToClient = <span class="keyword">new</span> DataOutputStream(client.getOutputStream());</span><br><span class="line">                    outputToClient.writeBytes(<span class="string">&quot;HTTP/1.0 200 Document Follows\r\n&quot;</span>);</span><br><span class="line">                    outputToClient.writeBytes(<span class="string">&quot;Content-Type:image/jpg\r\n&quot;</span>);</span><br><span class="line">                    outputToClient.writeBytes(<span class="string">&quot;Content-Lenght:&quot;</span> + lenght + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                    outputToClient.writeBytes(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                    outputToClient.write(fileInByte, <span class="number">0</span>, lenght);</span><br><span class="line">                    outputToClient.close();</span><br><span class="line">                &#125;<span class="keyword">else</span> System.out.println(<span class="string">&quot;bad request message&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (SocketTimeoutException e)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Time out ...&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;bad requset file &quot;</span> + fileName);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">new</span> Server(<span class="number">6066</span>).start();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;JAVA-WEBç½‘ç»œç¼–ç¨‹&quot;&gt;&lt;a href=&quot;#JAVA-WEBç½‘ç»œç¼–ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;JAVA WEBç½‘ç»œç¼–ç¨‹&quot;&gt;&lt;/a&gt;JAVA WEBç½‘ç»œç¼–ç¨‹&lt;/h2&gt;&lt;h3 id=&quot;Socketå¥—æ¥å­—&quot;&gt;&lt;a href=&quot;#Socketå¥—æ¥å­—&quot; class=&quot;headerlink&quot; title=&quot;Socketå¥—æ¥å­—&quot;&gt;&lt;/a&gt;Socketå¥—æ¥å­—&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;socketä½¿ç”¨TCPå®ç°è®¡ç®—æœºé—´çš„é€šä¿¡æœºåˆ¶ã€‚clientåˆ›å»ºä¸€ä¸ªsocketï¼Œå¹¶å°è¯•è¿æ¥æœåŠ¡å™¨çš„socketã€‚&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å®¢æˆ·ä¸æœåŠ¡ç«¯å¯ä»¥ä½¿ç”¨å¯¹Socketçš„è¯»å†™æ¥å®ç°é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;ServerSocketç±»ä¸ºæœåŠ¡å™¨æä¾›ä¸€ç§ç›‘å¬å®¢æˆ·ç«¯å¹¶å»ºç«‹è¿æ¥çš„æœºåˆ¶ã€‚&lt;br&gt;å…·ä½“å®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Serverç«¯å®ä¾‹åŒ–ä¸€ä¸ªServerSocketï¼Œè¡¨ç¤ºé€šè¿‡æœåŠ¡å™¨ä¸Šçš„ç«¯å£é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;ServerSocket.accept()æ–¹æ³•å°†ä¸€ç›´ç­‰å¾…ç›´åˆ°å®¢æˆ·ç«¯è¿æ¥ä¸ŠæœåŠ¡å™¨çš„ç«¯å£&lt;/li&gt;
&lt;li&gt;Clientç«¯å®ä¾‹åŒ–Socketï¼ŒæŒ‡å®šæœåŠ¡å™¨åœ°å€ä¸ç«¯å£å·è¯·æ±‚è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;Socketçš„æ„é€ å‡½æ•°å°è¯•è¿æ¥ã€‚é€šä¿¡è¢«å»ºç«‹åï¼Œåˆ™å¯é€šè¿‡Socketé€šä¿¡ï¼Œå¦åˆ™æŠ›å‡ºIOException&lt;/li&gt;
&lt;li&gt;Serverç«¯accept()è¿”å›ä¸€ä¸ªscoketå¼•ç”¨ï¼Œè¯¥socketè¿æ¥åˆ°Clientçš„Socket</summary>
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Java" scheme="http://codeminions.github.io/tags/Java/"/>
    
    <category term="Network" scheme="http://codeminions.github.io/tags/Network/"/>
    
    <category term="ç§˜ç±å¸–" scheme="http://codeminions.github.io/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/"/>
    
  </entry>
  
  <entry>
    <title>RecyclerViewå¸¸ç”¨å°è£…</title>
    <link href="http://codeminions.github.io/2018/11/01/Recycler%E5%B0%81%E8%A3%85/"/>
    <id>http://codeminions.github.io/2018/11/01/Recycler%E5%B0%81%E8%A3%85/</id>
    <published>2018-11-01T00:00:00.000Z</published>
    <updated>2019-10-18T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼"><a href="#RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼" class="headerlink" title="RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼"></a>RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼</h1><p>æœ¬æ–‡ä»‹ç»ä¸€ç§RecyclerViewçš„å¸¸ç”¨å°è£…å½¢å¼ï¼Œæœ€åæ•ˆæœæ˜¯è°ƒç”¨æ—¶åªéœ€å®šä¹‰å›è°ƒæ–¹æ³•getItemViewType()ä¸onCreateViewHolder(View, int)<br>å› ä¸ºåœ¨ä½¿ç”¨æ—¶ä¸€èˆ¬ä¼šæœ‰ç‰¹æ®Šçš„itemå¡«å……çš„éœ€æ±‚ï¼Œä»¥åŠä¸åŒä½¿ç”¨åœºæ™¯ä¼šä½¿ç”¨ä¸åŒçš„ViewHolderè¿›è¡Œå¡«å……çš„éœ€æ±‚ã€‚<br>å…ˆä¸Šä»£ç â€¦</p><h2 id="å…·ä½“ä»£ç "><a href="#å…·ä½“ä»£ç " class="headerlink" title="å…·ä½“ä»£ç "></a>å…·ä½“ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RecyclerAdapter</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerAdapter</span>.<span class="title">ViewHolder</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span>, <span class="title">AdapterCallBack</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;T&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AdapterListener&lt;T&gt; mListener;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ„é€ æ¨¡å—</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataList</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> listener</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecyclerAdapter</span><span class="params">(List&lt;T&gt; dataList, AdapterListener&lt;T&gt; listener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mListener = listener;</span><br><span class="line">        <span class="keyword">this</span>.list = dataList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecyclerAdapter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RecyclerAdapter</span><span class="params">(AdapterListener&lt;T&gt; listener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="keyword">new</span> ArrayList&lt;T&gt;(), listener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ViewIdè·å–æ¨¡å—</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     * å¤å†™é»˜è®¤å¸ƒå±€è¿”å›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> position åæ ‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›å¸ƒå±€id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getItemViewType(position, list.get(position));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å¸ƒå±€ç±»å‹(id)</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> position åæ ‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data     å½“å‰æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¸ƒå±€idï¼Œç”¨äºåˆ›å»ºViewHolder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position, T data)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ViewHolderåˆ›å»ºæ¨¡å—</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºä¸€ä¸ªViewHolder</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parent</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> viewType Itemçš„ç±»å‹ï¼Œçº¦å®šä¸ºXMLçš„idï¼ˆç®€åŒ–æ“ä½œï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ViewHolder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewHolder&lt;T&gt; <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        LayoutInflater inflater = LayoutInflater.from(parent.getContext());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†ä¸€ä¸ªxml idä¸ºViewTypeçš„æ–‡ä»¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªroot View</span></span><br><span class="line">        View root = inflater.inflate(viewType, parent, <span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">// é€šè¿‡å­ç±»å¿…é¡»å®ç°çš„æ–¹æ³•å¾—åˆ°ä¸€ä¸ªViewHolder</span></span><br><span class="line">        ViewHolder&lt;T&gt; holder = onCreateViewHolder(root, viewType);</span><br><span class="line">        <span class="comment">// å¯¹Holderçš„äº‹ä»¶æ“ä½œå®é™…ä¸Šæ˜¯å¯¹viewè¿›è¡Œæ“ä½œã€‚å¯¹ä¸€ä¸ªViewHolderè®¾ç½®äº‹ä»¶å®é™…ä¸Šè¿˜æ˜¯å¯¹å…¶æ ¹å¸ƒå±€è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®Viewçš„Tagä¸ºHolderè¿›è¡ŒåŒå‘ç»‘å®š</span></span><br><span class="line">        root.setTag(R.id.tag_recycler_holder, holder);</span><br><span class="line">        <span class="comment">// è®¾ç½®äº‹ä»¶ç‚¹å‡»</span></span><br><span class="line">        root.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›è¡Œç•Œé¢æ³¨è§£ç»‘å®š</span></span><br><span class="line">        holder.unBinder = ButterKnife.bind(holder, root);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»‘å®šcallback</span></span><br><span class="line">        holder.callBack = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">return</span> holder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“å¾—åˆ°ä¸€ä¸ªæ–°çš„ViewHolder</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parent   æ ¹å¸ƒå±€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> viewType å¸ƒå±€ç±»å‹ï¼Œå³xmlçš„id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ViewHolder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> ViewHolder&lt;T&gt; <span class="title">onCreateViewHolder</span><span class="params">(View parent, <span class="keyword">int</span> viewType)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Holderæ•°æ®ç»‘å®šæ¨¡å—</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> holder</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> position</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder&lt;T&gt; holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¾—åˆ°éœ€è¦ç»‘å®šçš„æ–¹æ³•</span></span><br><span class="line">        T data = list.get(position);</span><br><span class="line">        <span class="comment">// è§¦å‘Holderçš„ç»‘å®šæ–¹æ³•</span></span><br><span class="line">        holder.bind(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œæ•°æ®åˆ—è¡¨æ¨¡å—</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">        list.add(data);</span><br><span class="line">        notifyItemInserted(list.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥ä¸€å †æ•°æ®å¹¶é€šçŸ¥è¿™æ®µé›†åˆæ›´æ–°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datalist data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T... datalist)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (datalist != <span class="keyword">null</span> &amp;&amp; datalist.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> startPos = list.size();</span><br><span class="line">            Collections.addAll(list, datalist);</span><br><span class="line">            notifyItemRangeInserted(startPos, datalist.length);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥ä¸€å †æ•°æ®å¹¶é€šçŸ¥è¿™æ®µé›†åˆæ›´æ–°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datalist data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Collection&lt;T&gt; datalist)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (datalist != <span class="keyword">null</span> &amp;&amp; datalist.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> startPos = list.size();</span><br><span class="line">            list.addAll(datalist);</span><br><span class="line">            notifyItemRangeInserted(startPos, datalist.size());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        list.clear();</span><br><span class="line">        notifyDataSetChanged();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›¿æ¢ä¸ºä¸€ä¸ªæ–°çš„é›†åˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataList æ–°é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">replace</span><span class="params">(Collection&lt;T&gt; dataList)</span> </span>&#123;</span><br><span class="line">        list.clear();</span><br><span class="line">        <span class="keyword">if</span> (dataList == <span class="keyword">null</span> || dataList.size() == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        list.addAll(dataList);</span><br><span class="line">        <span class="comment">// å…¨éƒ¨æ›´æ–°</span></span><br><span class="line">        notifyDataSetChanged();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç‚¹å‡»è®¾ç½®åŠç›‘å¬æ¨¡å—</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        ViewHolder holder = (ViewHolder) v.getTag(R.id.tag_recycler_holder);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.mListener != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¾—åˆ°ViewHolderå½“å‰å¯¹åº”é€‚é…å™¨ä¸­çš„åæ ‡</span></span><br><span class="line">            <span class="keyword">int</span> pos = holder.getAdapterPosition();</span><br><span class="line">            <span class="comment">// å›è°ƒ</span></span><br><span class="line">            <span class="keyword">this</span>.mListener.onItemClick(holder, list.get(pos));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®é€‚é…å™¨ç‚¹å‡»ç›‘å¬</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> adapterListener</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setListener</span><span class="params">(AdapterListener&lt;T&gt; adapterListener)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mListener = adapterListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AdapterListener</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">        <span class="comment">// å½“cellç‚¹å‡»æ—¶è§¦å‘</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(RecyclerAdapter.ViewHolder holder, T data)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onItemLongClick</span><span class="params">(RecyclerAdapter.ViewHolder holder, T data)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ ä¸Šabstractä½¿å­ç±»å®ç°æ—¶è‡³å°‘å®ç°å…¶ä¸­ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * æŠ½è±¡æ–¹æ³•ä¸éœ€è¦å­ç±»å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œè€Œæ¥å£è¦æ±‚å®ç°æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AdapterListenerImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">AdapterListener</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(ViewHolder holder, T data)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemLongClick</span><span class="params">(ViewHolder holder, T data)</span> </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ViewHolderçš„å°è£…ç±»</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨æ—¶éœ€ç»§æ‰¿è¯¥ç±»å¹¶å®ç°onBind()æ–¹æ³•å®Œæˆæ§ä»¶ä¸æ•°æ®çš„ç»‘å®š</span></span><br><span class="line"><span class="comment">     * ------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Unbinder unBinder;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> AdapterCallBack&lt;T&gt; callBack;</span><br><span class="line">        <span class="keyword">protected</span> T data;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç”¨äºç»‘å®šæ•°æ®çš„è§¦å‘</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> data æ•°æ®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">bind</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.data = data;</span><br><span class="line">            onBind(data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * é€šçŸ¥æ•´ä¸ªåˆ—è¡¨æ›´æ–°çš„æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">         * é€šè¿‡ViewHolderåå‘è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œæ›´æ–°</span></span><br><span class="line"><span class="comment">         * Holderè‡ªå·±å¯¹è‡ªå·±å¯¹åº”çš„dataè¿›è¡Œæ›´æ–°çš„</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updataData</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.callBack != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.callBack.updata(data, <span class="keyword">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è§¦å‘å¸®é¡¶æ•°æ®æ—¶çš„å›è°ƒã€‚å¿…é¡»å¤å†™</span></span><br><span class="line"><span class="comment">         * ç•Œé¢åˆ·æ–°èµ‹å€¼</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> data ç»‘å®šçš„æ•°æ®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onBind</span><span class="params">(T data)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç çœ‹ç€æœ‰ç‚¹å¤šï¼Œå› æ­¤åˆ†ä¸ºå‡ ä¸ªæ¨¡å—ï¼Œåˆ†å¼€ç†è§£å°±éƒ½å¾ˆç®€å•äº†ã€‚</p><h2 id="ä»£ç åˆ†æ"><a href="#ä»£ç åˆ†æ" class="headerlink" title="ä»£ç åˆ†æ"></a>ä»£ç åˆ†æ</h2><p>å…¶å®æ³¨é‡Šå·²ç»å†™å¾—å¾ˆæ¸…æ¥šäº†ä½†è¿˜æ˜¯å…·ä½“åˆ†æä¸€ä¸‹ã€‚</p><h4 id="æ„é€ æ¨¡å—"><a href="#æ„é€ æ¨¡å—" class="headerlink" title="æ„é€ æ¨¡å—"></a>æ„é€ æ¨¡å—</h4><ul><li>ä¼ å…¥AdapterListenerç›‘å¬å™¨å®ä¾‹</li></ul><h4 id="ViewTypeæ¨¡å—"><a href="#ViewTypeæ¨¡å—" class="headerlink" title="ViewTypeæ¨¡å—"></a>ViewTypeæ¨¡å—</h4><ul><li>getItemViewType() å¤å†™é»˜è®¤å¸ƒå±€è¿”å›ï¼Œå¸ƒå±€idç”¨äºåˆ›å»ºViewHolderï¼Œè¿”å›è°ƒç”¨åŒåæŠ½è±¡æ–¹æ³•ï¼ˆä¸åŒå‚ï¼‰</li></ul><h4 id="åˆ›å»ºViewHolderæ¨¡å—"><a href="#åˆ›å»ºViewHolderæ¨¡å—" class="headerlink" title="åˆ›å»ºViewHolderæ¨¡å—"></a>åˆ›å»ºViewHolderæ¨¡å—</h4><ul><li>onCreateViewHolder åˆ›å»ºä¸€ä¸ªViewHolder<ul><li>è°ƒç”¨ç±»å†…å®šä¹‰çš„åŒåæŠ½è±¡æ–¹æ³•onCreateViewHolder()è·å–holderï¼Œå‚æ•°ä¸ºViewè€Œä¸æ˜¯ViewGroup</li><li>Viewä¸Holderè¿›è¡ŒåŒå‘ç»‘å®šï¼ˆä¸¤ç§å®ç°æ–¹å¼ï¼‰<ul><li>view.setTag()å®ç°ï¼ˆkeyä¸ºä¸€ä¸ªç‰¹å®šidï¼‰</li><li>Butterknife.bind()å®ç°ï¼Œå¹¶å°†è¿”å›çš„UnBinderä¿å­˜åœ¨Holderä¸­å¤‡ç”¨</li></ul></li></ul></li></ul><h4 id="æ•°æ®ç»‘å®šæ¨¡å—"><a href="#æ•°æ®ç»‘å®šæ¨¡å—" class="headerlink" title="æ•°æ®ç»‘å®šæ¨¡å—"></a>æ•°æ®ç»‘å®šæ¨¡å—</h4><ul><li>onBindViewHolder<ul><li>è§¦å‘ <strong>Holder.bind()</strong> æ–¹æ³•ï¼ˆæœ‰ç‚¹ä¼šå›è°ƒçš„æ„æ€ï¼‰</li></ul></li></ul><h4 id="ç‚¹å‡»å“åº”ä»¥åŠç›‘å¬æ¨¡å—"><a href="#ç‚¹å‡»å“åº”ä»¥åŠç›‘å¬æ¨¡å—" class="headerlink" title="ç‚¹å‡»å“åº”ä»¥åŠç›‘å¬æ¨¡å—"></a>ç‚¹å‡»å“åº”ä»¥åŠç›‘å¬æ¨¡å—</h4><ul><li>AdapterListener ç‚¹å‡»ç›‘å¬æ¥å£<ul><li>ç”±onClick()æ–¹æ³•å›è°ƒæ¥å£æ–¹æ³•</li><li>å¢åŠ ä¸€ä¸ªæ¥å£å®ç°ç±»ï¼Œå°±å¯ä»¥åªå®ç°æ¥å£ä¸­çš„å…¶ä¸­ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸éœ€è¦å…¨éƒ¨å®ç°</li></ul></li></ul><h4 id="ViewHolderæŠ½è±¡ç±»æ¨¡å—"><a href="#ViewHolderæŠ½è±¡ç±»æ¨¡å—" class="headerlink" title="ViewHolderæŠ½è±¡ç±»æ¨¡å—"></a>ViewHolderæŠ½è±¡ç±»æ¨¡å—</h4><ul><li>ViewHolder å†…éƒ¨ç±»å®šä¹‰<ul><li>ä»¥å‰çš„å†™æ³•æ˜¯åœ¨æ„é€ æ–¹æ³•ä¸­ç»‘å®šæ§ä»¶ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯å®šä¹‰äº†ä¸€ä¸ªbind(T)è¿›è¡Œç»‘å®š<ul><li>bind()ä¸­è°ƒç”¨abstract onBind()æ–¹æ³•</li></ul></li><li>éœ€è¦é€šçŸ¥æ•´ä¸ªåˆ—è¡¨æ›´æ–°çš„æ¶ˆæ¯ï¼Œå®šä¹‰æ–¹æ³•updataData()<ul><li>updataDataæ–¹æ³•å›è°ƒäº†AdapterCallBackï¼ˆå¤–éƒ¨å®šä¹‰ï¼‰ã€‚</li></ul></li></ul></li></ul><h4 id="æ•°æ®æ“ä½œæ¨¡å—"><a href="#æ•°æ®æ“ä½œæ¨¡å—" class="headerlink" title="æ•°æ®æ“ä½œæ¨¡å—"></a>æ•°æ®æ“ä½œæ¨¡å—</h4><ul><li>add() &amp; clear() &amp; replace() &amp; ä»¥åŠå¿…é¡»å®ç°çš„ getItemCount()<ul><li>å¯¹æ•°æ®æºè¿›è¡Œä¿®æ”¹ï¼Œæ³¨æ„åˆ·æ–°åˆ—è¡¨æ›´æ–°</li></ul></li></ul><hr><p>å¯¹RecyclerViewä½¿ç”¨çš„ä¸€ç§å¸¸ç”¨å°è£…ï¼Œä¸ºäº†å¼€å‘æ˜¯èƒ½å¤Ÿä¾¿æ·ç®€æ˜çš„è°ƒç”¨è€Œåˆä¸å½±å“å…¶å¤ç”¨ã€‚</p><p>ä»¥ä¸Šæ˜¯å¯¹è¿™ç§å°è£…å½¢å¼çš„å­¦ä¹ ç†è§£å’Œåˆ†æï¼Œç†è§£æœ‰æ‰€åå·®æˆ–å…¶ä»–çœ‹æ³•æ¬¢è¿å¤§ä½¬äº¤æµï¼Œå…±åŒè¿›æ­¥ï½</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼&quot;&gt;&lt;a href=&quot;#RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼&quot;&gt;&lt;/a&gt;RecyclerViewå¸¸ç”¨çš„ä¸€ç§å°è£…æ–¹å¼&lt;/</summary>
      
    
    
    
    <category term="Code" scheme="http://codeminions.github.io/categories/Code/"/>
    
    
    <category term="Android" scheme="http://codeminions.github.io/tags/Android/"/>
    
    <category term="æŠ€èƒ½å¸–" scheme="http://codeminions.github.io/tags/%E6%8A%80%E8%83%BD%E5%B8%96/"/>
    
  </entry>
  
</feed>
