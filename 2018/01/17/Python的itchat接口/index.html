<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"codeminions.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="关于itchat的学习体验pip模块下载在控制台窗口用pip install下载，并用1pip list查看，已载入。在python-Shell下始终无法导入。后来改用命令pip3 install安装成功。pip3 list已载入，再导入，成功！ itchat初体验 获取网页登陆的二维码1itchat.auto_login( ) 发信息1itchat.send 1itchat.search_fri">
<meta property="og:type" content="article">
<meta property="og:title" content="Python的itchat接口">
<meta property="og:url" content="http://codeminions.github.io/2018/01/17/Python%E7%9A%84itchat%E6%8E%A5%E5%8F%A3/index.html">
<meta property="og:site_name" content="初学者">
<meta property="og:description" content="关于itchat的学习体验pip模块下载在控制台窗口用pip install下载，并用1pip list查看，已载入。在python-Shell下始终无法导入。后来改用命令pip3 install安装成功。pip3 list已载入，再导入，成功！ itchat初体验 获取网页登陆的二维码1itchat.auto_login( ) 发信息1itchat.send 1itchat.search_fri">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-01-17T05:28:28.000Z">
<meta property="article:modified_time" content="2018-01-18T16:00:00.000Z">
<meta property="article:author" content="minions">
<meta property="article:tag" content="秘籍帖">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://codeminions.github.io/2018/01/17/Python%E7%9A%84itchat%E6%8E%A5%E5%8F%A3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Python的itchat接口 | 初学者</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2e98ba91428e00ba53246c847babdd82";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="初学者" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">初学者</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/CodeMinions" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://codeminions.github.io/2018/01/17/Python%E7%9A%84itchat%E6%8E%A5%E5%8F%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="minions">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="初学者">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python的itchat接口
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-17 13:28:28" itemprop="dateCreated datePublished" datetime="2018-01-17T13:28:28+08:00">2018-01-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-01-19 00:00:00" itemprop="dateModified" datetime="2018-01-19T00:00:00+08:00">2018-01-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Code/" itemprop="url" rel="index"><span itemprop="name">Code</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2018/01/17/Python%E7%9A%84itchat%E6%8E%A5%E5%8F%A3/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/01/17/Python%E7%9A%84itchat%E6%8E%A5%E5%8F%A3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="关于itchat的学习体验"><a href="#关于itchat的学习体验" class="headerlink" title="关于itchat的学习体验"></a>关于itchat的学习体验</h1><h3 id="pip模块下载"><a href="#pip模块下载" class="headerlink" title="pip模块下载"></a>pip模块下载</h3><p>在控制台窗口用pip install下载，并用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure><br>查看，已载入。在python-Shell下始终无法导入。后来改用命令pip3 install安装成功。pip3 list已载入，再导入，成功！</p>
<h3 id="itchat初体验"><a href="#itchat初体验" class="headerlink" title="itchat初体验"></a>itchat初体验</h3><ol>
<li><strong>获取网页登陆的二维码</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.auto_login( )</span><br></pre></td></tr></table></figure></li>
<li><strong>发信息</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.send</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.search_friends(name = <span class="string">u&quot;备注名称或昵称&quot;</span>)  <span class="comment">#获取对方的全部信息（列表）</span></span><br></pre></td></tr></table></figure>
列表中只有一个元素，是一个字典，引索”UserName”得到微信号，是一长串十六进制的数字<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.send(msg = <span class="string">&#x27; &#x27;</span>,toUserName = user)</span><br></pre></td></tr></table></figure>
下图是失败与成功的返回信息。</li>
</ol>
<hr>
<p>2018/1/19/13：26</p>
<p>今天开始系统了解itchat。这应该是官方的文档：<br><a target="_blank" rel="noopener" href="http://itchat.readthedocs.io/zh/latest/">itchat官方文档</a></p>
<p>-入门实例</p>
<blockquote>
<p>itchat.auto_login( ) 登陆账号<br>itchat.logout( ) 注销账号<br>itchat.run( ) 运行<br>user = itchat.search_friends(name = “昵称或备注”) 获取对方账户信息<br>itchat.send(msg = “文本信息”, toUserName = “对方微信号”)<br>user[0].send(msg = “文本信息”) </p>
</blockquote>
<p>PS:</p>
<p>微信移动端只要退出登录（断网），其网页版PC版e也会被强制登出，故需要<strong>保持移动端登录状态</strong></p>
<p>有一些微信账户天生不能给自己发信息，可以改用filehelper</p>
<p>用对方发给自己的文本消息回复<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="meta">@itchat.msg_register(<span class="params">itchat.content.TEXT</span>) </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_reply</span>(<span class="params">msg</span>):</span> </span><br><span class="line">	<span class="keyword">return</span> msg.text</span><br><span class="line">itchat.auto_login()</span><br><span class="line">itchat.run()</span><br></pre></td></tr></table></figure><br>itchat.search_friend 方法搜索用户</p>
<ul>
<li>仅获取自己的用户信息:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.search_friends()</span><br></pre></td></tr></table></figure></li>
<li>获取特定UserName的用户信息:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.search_friends(userName=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>获取备注、微信号、昵称中的任何一项等于name键值的用户:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.search_friends(name=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>获取备注、微信号、昵称分别等于相应键值的用户:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.search_friends(wechatAccount=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>前两项功能可以一同使用:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.search_friends(name=<span class="string">&#x27; &#x27;</span>, wechatAccount=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="（正式开始预警-分割线。。。）"><a href="#（正式开始预警-分割线。。。）" class="headerlink" title="（正式开始预警+分割线。。。）"></a>（正式开始预警+分割线。。。）</h2><p><strong>-登陆配置</strong></p>
<p>itchat提供了登陆状态暂存，关闭程序后一定时间内不需要扫码即可登录。由于目前微信网页版提供上一次登录的微信号不扫码直接手机确认登陆，所以如果开启登陆状态暂存将会自动使用这一功能。该方法会生成一个静态文件itchat.pkl，用于存储登陆的状态。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.auto_login(hotReload = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure><br>-Send方法回复<br>返回Bool值。对象为空则发给自己。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">send(msg=<span class="string">&#x27;Text Message&#x27;</span>, toUserName=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><br><strong>请确保该程序目录下存在：gz.gif 以及 xlsx.xlsx</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">itchat.send(<span class="string">&#x27;@img@%s&#x27;</span> % <span class="string">&#x27;gz.gif&#x27;</span>)                  <span class="comment">#识别为发送图片</span></span><br><span class="line">itchat.send(<span class="string">&#x27;@fil@%s&#x27;</span> % <span class="string">&#x27;xlsx.xlsx&#x27;</span>)               <span class="comment">#识别为发送文件</span></span><br><span class="line">itchat.send(<span class="string">&#x27;@vid@%s&#x27;</span> % <span class="string">&#x27;demo.mp4&#x27;</span>)               <span class="comment">#识别为发送视频</span></span><br></pre></td></tr></table></figure><br>其他：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">send_msg(msg=<span class="string">&#x27;Text Message&#x27;</span>, toUserName=<span class="literal">None</span>)</span><br><span class="line">send_file(fileDir, toUserName=<span class="literal">None</span>)</span><br><span class="line">send_img(fileDir, toUserName=<span class="literal">None</span>)</span><br><span class="line">send_video(fileDir, toUserName=<span class="literal">None</span>)        <span class="comment">#需保证发送视频为一实质的mp4文件</span></span><br></pre></td></tr></table></figure></p>
<h4 id="注册消息方法"><a href="#注册消息方法" class="headerlink" title="注册消息方法"></a>注册消息方法</h4><p>itchat将根据接收到的消息类型寻找对应的已经注册的方法。如果一个消息类型没有对应的注册方法，该消息将会被舍弃。在运行过程当中也可以动态注册方法，注册方式与结果不变。</p>
<h5 id="不带具体对象注册，将注册为普通消息的回复方法"><a href="#不带具体对象注册，将注册为普通消息的回复方法" class="headerlink" title="不带具体对象注册，将注册为普通消息的回复方法"></a>不带具体对象注册，将注册为普通消息的回复方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">simple_reply</span>(<span class="params">msg</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;I received: %s&#x27;</span> % msg[<span class="string">&#x27;Text&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h4 id="带对象参数注册，对应消息对象将调用该方法"><a href="#带对象参数注册，对应消息对象将调用该方法" class="headerlink" title="带对象参数注册，对应消息对象将调用该方法"></a>带对象参数注册，对应消息对象将调用该方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@itchat.msg_register(<span class="params">TEXT, isFriendChat=<span class="literal">True</span>, isGroupChat=<span class="literal">True</span>, isMpChat=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_reply</span>(<span class="params">msg</span>):</span></span><br><span class="line">    msg.user.send(<span class="string">&#x27;%s: %s&#x27;</span> % (msg.<span class="built_in">type</span>, msg.text)) </span><br></pre></td></tr></table></figure>
<h4 id="注册消息的优先级"><a href="#注册消息的优先级" class="headerlink" title="注册消息的优先级"></a>注册消息的优先级</h4><p>优先级分别为：<strong>后注册消息先于先注册消息，带参数消息先于不带参数消息</strong>。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itchat.content <span class="keyword">import</span> *</span><br><span class="line"><span class="meta">@itchat.msg_register </span></span><br><span class="line"><span class="meta">@itchat.msg_register(<span class="params">TEXT</span>)</span></span><br></pre></td></tr></table></figure><br>看了这个例子，我也终于懂了itchat处理信息的机制。<strong>@msg_register方法注册信息类型</strong>，其后定义函数来表明处理该类信息的方法。<br>尝试打印<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search_friends( )</span><br><span class="line"><span class="built_in">list</span> = itchat.search_friends()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><br>得到一个字典，保存自己的用户信息</p>
<blockquote>
<p>MemberList     UserName    City    DisplayName     PYQuanPin   RemarkPYInitial     Province    KeyWord     RemarkName   PYInitial   EncryChatRoomId    Alias   Signature   NickName    RemarkPYQuanPin     HeadImgUrl  UniFriend   Sex     AppAccountFlag      VerifyFlag      EncryChatRoomId   HideInputBarFlag       AttrStatus      SnsFlag    MemberCount      OwnerUin    ContactFlag   Uin   StarFriend      Statues    WebWxPluginSwitch      HeadImgFlag </p>
</blockquote>
<p>写了一段代码实现一个简单的微信自动回复。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="keyword">from</span> itchat.content <span class="keyword">import</span> *</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="meta">@itchat.msg_register(<span class="params">PICTURE, RECORDING</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">all_reply</span>(<span class="params">msg</span>):</span></span><br><span class="line">    <span class="keyword">global</span> count</span><br><span class="line">    print(<span class="string">&quot;收到一条信息。。(第%d条)&quot;</span> % count)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;我还看不懂图片语音，发文字谢谢。。&quot;</span></span><br><span class="line"><span class="meta">@itchat.msg_register(<span class="params">TEXT</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_reply</span>(<span class="params">msg</span>):</span></span><br><span class="line">    <span class="keyword">global</span> count</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    print(<span class="string">&quot;收到一条信息。。(第%d条)&quot;</span> % count)</span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;嗯？&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> count == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;说什么大点声。。&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> count == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;好吧我是机器人。。&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> count &gt;= <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;我看到了马上回复你哈。。&quot;</span></span><br><span class="line">itchat.auto_login(hotReload = <span class="literal">True</span>)</span><br><span class="line">itchat.run()</span><br></pre></td></tr></table></figure><br>但是前边那个注册信息不带参数却能处理所有信息的语句我还是无法实现。</p>
<p>关于动态注册，并不能完全看懂，文档中有一个例子。</p>
<h4 id="微信消息内容"><a href="#微信消息内容" class="headerlink" title="微信消息内容"></a>微信消息内容</h4><p>这一页都挺重要的，特别贴出来。<a target="_blank" rel="noopener" href="http://itchat.readthedocs.io/zh/latest/intro/messages/">消息内容 - itchat</a></p>
<h4 id="命令行二维码显示"><a href="#命令行二维码显示" class="headerlink" title="命令行二维码显示"></a>命令行二维码显示</h4><p>通过以下命令可以在登陆的时候使用命令行显示二维码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchat.auto_login(enableCmdQR=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><br>部分系统可能字幅宽度有出入，可以通过将，故赋enableCmdQR赋值为特定的倍数进行调整：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如部分的linux系统，块字符的宽度为一个字符（正常应为两字符）值为2</span></span><br><span class="line">itchat.auto_login(enableCmdQR=<span class="number">2</span>) </span><br><span class="line"><span class="comment"># 默认控制台背景色为暗色（黑色），若背景色为浅色（白色），可以将enableCmdQR赋值为负值：</span></span><br><span class="line">itchat.auto_login(enableCmdQR=-<span class="number">1</span>) </span><br></pre></td></tr></table></figure></p>

    </div>

    
    
    

    <div style=" width:100%; text-align:center; margin-left:15px; margin-right:15px;">
	<hr style="width:30%;vertical-align:middle; display:inline-block;"/>  
	    完结 
	    <i class="fa fa-paw"></i> 
	     撒花 ฅ&gt;ω&lt;*ฅ  
	<hr style="width:30%;vertical-align:middle; display:inline-block;"/>
    </div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>minions
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://codeminions.github.io/2018/01/17/Python%E7%9A%84itchat%E6%8E%A5%E5%8F%A3/" title="Python的itchat接口">http://codeminions.github.io/2018/01/17/Python的itchat接口/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/%E7%A7%98%E7%B1%8D%E5%B8%96/" rel="tag"><i class="fa fa-tag"></i> 秘籍帖</a>
              <a href="/tags/python/" rel="tag"><i class="fa fa-tag"></i> python</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/01/01/%E9%80%92%E5%BD%92%E5%B0%8F%E7%BB%93/" rel="prev" title="递归小结">
      <i class="fa fa-chevron-left"></i> 递归小结
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/01/24/%E9%93%BE%E8%A1%A8%E5%85%A5%E9%97%A8/" rel="next" title="链表入门">
      链表入门 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B3%E4%BA%8Eitchat%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%93%E9%AA%8C"><span class="nav-number">1.</span> <span class="nav-text">关于itchat的学习体验</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pip%E6%A8%A1%E5%9D%97%E4%B8%8B%E8%BD%BD"><span class="nav-number">1.0.1.</span> <span class="nav-text">pip模块下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#itchat%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="nav-number">1.0.2.</span> <span class="nav-text">itchat初体验</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BC%88%E6%AD%A3%E5%BC%8F%E5%BC%80%E5%A7%8B%E9%A2%84%E8%AD%A6-%E5%88%86%E5%89%B2%E7%BA%BF%E3%80%82%E3%80%82%E3%80%82%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">（正式开始预警+分割线。。。）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E6%B6%88%E6%81%AF%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.0.1.</span> <span class="nav-text">注册消息方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8D%E5%B8%A6%E5%85%B7%E4%BD%93%E5%AF%B9%E8%B1%A1%E6%B3%A8%E5%86%8C%EF%BC%8C%E5%B0%86%E6%B3%A8%E5%86%8C%E4%B8%BA%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF%E7%9A%84%E5%9B%9E%E5%A4%8D%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.0.1.1.</span> <span class="nav-text">不带具体对象注册，将注册为普通消息的回复方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E5%AF%B9%E8%B1%A1%E5%8F%82%E6%95%B0%E6%B3%A8%E5%86%8C%EF%BC%8C%E5%AF%B9%E5%BA%94%E6%B6%88%E6%81%AF%E5%AF%B9%E8%B1%A1%E5%B0%86%E8%B0%83%E7%94%A8%E8%AF%A5%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.0.2.</span> <span class="nav-text">带对象参数注册，对应消息对象将调用该方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E6%B6%88%E6%81%AF%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">1.1.0.3.</span> <span class="nav-text">注册消息的优先级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E5%86%85%E5%AE%B9"><span class="nav-number">1.1.0.4.</span> <span class="nav-text">微信消息内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%98%BE%E7%A4%BA"><span class="nav-number">1.1.0.5.</span> <span class="nav-text">命令行二维码显示</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="minions"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">minions</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CodeMinions" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CodeMinions" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="rss → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>rss</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">minions</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0 & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.8.0 强力驱动
  </div>
  <div class="post-count> 
    <span class="post-meta-item-icon">
      <!-- <i class="fa fa-chart-area"></i> -->
    </span>
    <span title="post-meta-item-text">
	博主minions已经码了
	  181k
	字辣  ~\(≧▽≦)/~
    </span>
    
  </div>
  <div class="busuanzi-count">
    <span id="busuanzi_container_site_pv" style='display:none'>
        ///▽///
	本站已经被访问<span id="busuanzi_value_site_pv"></span>次	 	 
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: inline;">
      <span class="post-meta-item-icon">
        <!-- <i class="fa fa-user"></i> -->
      </span>
      <span class="site-uv" title="一共有">
        <span id="busuanzi_value_site_uv"></span>人来过辣
	♪( ´θ｀)ノ
      </span>
    </span>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'ksFXxiyOicesm1H1gQuK6RvU-MdYXbMMI',
      appKey     : 'eswY6MY2MKFfOeYILl9HsUHo',
      placeholder: "Just go go",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      avatar_cdn:'https://www.gravatar.com/avatar/',
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : '',
    });
  }, window.Valine);
});
</script>

</body>
</html>
